Disclamer:

All the text that you find in this document is generated with a simple script. That read a list of URL as input, do a bit of screaping and past here the text
As you can see there are the original URL. Feel free to use them to navigate in these importatn rerosuces to understand better.

As you will notice, in this file there are irrelative content. PLease be aware that this is a work in progress, you should only read the think that improves you


<h2>Content from: https://evilmartians.com/chronicles/vite-lizing-rails-get-live-reload-and-hot-replacement-with-vite-ruby</h2>
<div><div>
<div><p>Recently, I upgraded my AnyCable demo application to Ruby 3 and Rails 7 with its new asset management tooling. As a result, assets:precompile became fast as lightning, but we lost one important productivity feature along the way: live reloading. Switching back to Webpacker in 2022 was not a good idea. Luckily, Vite Ruby had been on my radar for quite some time, so I decided to give it a try.</p></div>
<p>Rails has had an answer to the assets problem since the Assets Pipeline (Sprockets) was introduced. That was an important step forward for the entire world of web development frameworks, not only for Ruby and Rails.</p>
<p>Then, the frontend revolution began, and we, the Rails community, needed to catch up. So, Webpacker was born. Although it served its purpose well, it always felt like Webpacker was a “foreign body” in the Rails ecosystem.</p>
<p>Rails 7 turned a new page in the history of asset bundlers. Webpacker has been retired; instead, we have a handful of official ways of dealing with frontend: import maps, jsbundling-rails, cssbundling-rails, tailwindcss-rails. All of these were built on top of modern tooling, play nice with Rails, and are easy to work with. Well, except maybe for the confusion this diversity can cause developers.</p>
The Rails team works hard to improve the documentation around the modern Asset Pipeline and the variety of available choices. Follow this pull request to learn more.
<p>The problem is that they provide a Sprockets-like experience, that is, build-oriented. But for many developers, instant feedback is important, they got used to it. So, the question is: what is the modern alternative to webpack-dev-server? And my answer is Vite.</p>
<p>In this post, I’d like to share my Vite Ruby setup (using the AnyCable demo) and I’ll cover the following topics:</p>
 
Getting started with Vite on Rails
Live reload and HRM
To dockerize Vite, or not
 
 Getting started with Vite on Rails 
<p>Migrating from ”&lt;whatever&gt;bundling-rails” to Vite was almost as simple as stated in the vite_rails documentation: install the gem and run the installation rake task (bundle exec vite install).</p>
<p>I replaced the javascript_include_tag and stylesheet_link_tag helpers with vite_javascript_tag and vite_stylesheet_tag respectively, and updated the sourceCodeDir value in vite.json to frontend (since my setup deviates from the Rails app/javascript approach).</p>
You can find the corresponding commit here.
<p>I also created the frontend/entrypoints/application.css file to point to my styles/index.css (previously used by esbuild to compile the app/assets/builds/application.css).</p>
<p>After these minor chages, I expected my application to work without any additional changes (backed by the Vite Ruby auto build feature). But instead, I saw this in my server logs:</p>
Building with Vite ⚡️
vite v2.9.13 building for development...
transforming...
✓ 13 modules transformed.
Could not resolve './**/*_controller.js' from frontend/controllers/index.js
error during build:
Error: Could not resolve './**/*_controller.js' from frontend/controllers/index.js
    at error (/app/node_modules/rollup/dist/shared/rollup.js:198:30)
    at ModuleLoader.handleResolveId (/app/node_modules/rollup/dist/shared/rollup.js:22508:24)
    at /app/node_modules/rollup/dist/shared/rollup.js:22471:26
Build with Vite failed! ❌
<p>We relied on esbuild-rails support for glob imports (import './**/*_controller.js') to auto-load Stimulus controllers, but now, once switching to Vite, we no longer have this.</p>
<p>Luckily, we have import.meta.globEager, which returns the path-module map, so we can use it:</p>
const controllers = import.meta.globEager("./**/*_controller.js");
for (let path in controllers) {
  let module = controllers[path];
  let name = path.match(/\.\/(.+)_controller\.js$/)[1].replaceAll("/", "--");
  application.register(name, module.default);
}
<p>Looks like a bit of hackery involved. No worries, we have the stimulus-vite-helpers plugin which can do this for us with just a single line of code:</p>
import { registerControllers } from "stimulus-vite-helpers";
const controllers = import.meta.globEager("./**/*_controller.js");
registerControllers(application, controllers);
<p>Nice! And that’s it: we’ve just migrated our application to Vite Ruby. But, do you recall why we were doing that in the first place?</p>
 Live reload and HMR 
<p>In the auto-build mode, Vite Ruby compiles the assets on demand, one output file per entrypoint; just like good old Sprockets:</p>
Serving auto-built assets with Vite Ruby
<p>This is how Rubyists might use Vite in development; however, the main selling points of Vite are “Instant Server Start” and “Lightning Fast HMR” (HMR stands for hot module replacement). How can we get there? We should run a Vite development server!</p>
<p>With Vite Ruby, it’s as simple as running bin/vite dev. Here’s the page loaded with the help of the dev server:</p>
Serving assets via Vite dev server
<p>Now we have many JavaScript files loaded: all our dependencies and custom modules (files)—but only those needed for this particular page. The source code is processed on-the-fly using Rollup under-the-hood, and third-party (NPM) libraries are also pre-compiled (this time via esbuild). But you don’t need to worry about all these fancy frontend technologies, Vite has got you covered.</p>
<p>This is where “Instant Server Start” comes from. What about HMR?</p>
<p>Hot module replacement is a technology which makes it possible to refresh the current state of a browser’s JavaScript environment without reloading the enitre page (by just reloading a module). Not every piece of JavaScript code can be hot-reloaded, but modern frameworks such as Vue and React are compatible with this tech. And so is Stimulus, by the way.</p>
<p>Vite uses plugins to provide HMR capabilities (the bundler itself only provides the API). So, we need to add Stimulus HMR to our configuration:</p>
import StimulusHMR from 'vite-plugin-stimulus-hmr'
export default {
  plugins: [
    StimulusHMR(),
  ],
};
<p>Now we can open a page which has an element with a Stimulus controller attached and try to play with it:</p>
Stimulus HMR demo
<p>You see that? Our JavaScript code is getting reloaded and controllers are being re-connected, while page contents stay unchanged (the input field, for example). This is the hot module replacement in action.</p>
<p>As I’ve already mentioned, HMR only works with compatible JavaScript code. What if we want to react to, say, HTML template changes? We can use the ever reliable live reload via vite-plugin-full-reload. Here is our final configuration:</p>
import { defineConfig } from "vite";
import RubyPlugin from "vite-plugin-ruby";
import StimulusHMR from "vite-plugin-stimulus-hmr";
import FullReload from "vite-plugin-full-reload";
export default defineConfig({
  plugins: [
    RubyPlugin(),
    StimulusHMR(),
    
    FullReload(["app/views/**/*.erb"])
  ],
});
 Dockerizing Vite, or not 
<p>As you probably know, I’m building my apps in a Dockerized environment. Setting up Vite Ruby to work within Docker is pretty straightforward:</p>
 
We add volumes to keep Vite assets:
 
x-backend: &amp;backend
  
  volumes:
    
    - vite_dev:/app/public/vite-dev
    - vite_test:/app/public/vite-test
volumes:
  
  vite_dev:
  vite_test:
 
We define a new service to run a Vite dev server:
 
vite:
  &lt;&lt;: *backend
  command: ./bin/vite dev
  volumes:
    - ..:/app:cached
    - bundle:/usr/local/bundle
    - node_modules:/app/node_modules
    - vite_dev:/app/public/vite-dev
    - vite_test:/app/public/vite-test
  ports:
    - "3036:3036"
 
Finally, we “connect” our Rails app to the vite service by providing the VITE_RUBY_HOST value:
 
x-backend: &amp;backend
  environment:
    
    VITE_RUBY_HOST: ${VITE_HOST:-vite}
<p>Now we can run docker-compose up vite (or dip up vite) to run a dev server.</p>
<p>Note that I made it possible to provide a different Vite host in the configuration (${VITE_HOST:-vite}). This could be used to have an alternative, hybrid configuration: Rails running in Docker and Vite running locally.</p>
<p>We use Vite mostly in frontend-heavy projects, i.e., projects involving JavaScript frameworks and a dedicated frontend team. That usually involves having advanced DX machinery (linters, git hooks, IDE extensions, and so on), which in most cases doesn’t play well with Docker. That’s why we make it possible to fallback to local system development (for frontend only).</p>
<p>But we’re using a Ruby gem (vite_ruby) to manage Vite configuration, so does this mean that now we have to run the full, massive Rails application locally just for the sake of a tiny Vite wrapper? Of course, not. Let me show you a better way.</p>
See this commit for the relevant changes.
<p>First, we isolate vite_ruby by keeping a separate Gemfile for it (and other possible frontend dependencies):</p>
source "https://rubygems.org"
gem "vite_rails"
<p>We include it into our main Gemfile by using eval_gemfile "gemfiles/frontend.gemfile" (this way we can use Vite helpers in the Rails app or run commands in production).</p>
<p>Then, we define a custom bin/vite command, which uses this frontend.gemfile:</p>
#!/bin/bash
cd $(dirname $0)/..
export BUNDLE_GEMFILE=./gemfiles/frontend.gemfile
bundle check &gt; /dev/null || bundle install
bundle exec vite $@
<p>This is the same trick I use for RuboCop: a bundle exec wrapper using a custom Gemfile and auto-installing dependencies. All you need is Ruby (yeah, you still need it, but not all other system deps).</p>
<p>Now, you can launch a Vite dev server as usual:</p>
<p>And you can launch a dockerized Rails application “connected” to this locally running server by specifying the VITE_HOST parameter:</p>
VITE_HOST=host.docker.internal dip rails s
<p>NOTE: It’s important to set "host": "0.0.0.0" in the config/vite.json to make a dev server accessible from Docker containers.</p>
<p>With Dip, we can go further and provide a useful shortcut to be used for hybrid development:</p>
interaction:
  frontend:
    description: Frontend development tasks
    subcommands:
      rails:
        description: Run Rails server pointing to a local Vite dev server
        service: web
        environment:
          VITE_HOST: host.docker.internal
        compose:
          run_options: [ service-ports, use-aliases ]
<p>No, you don’t need to think about hosts, just run dip frontend rails and that’s it.</p>
 Wrapping things up 
<p>So, there you have it. We have a Ruby Vite setup with working live reload, hot replacement, and our demand for instant gratification has been fully restored! Feel free to share this setup and use it in your own projects—I hope it comes in handy!</p>
<div></div>
<p>And one more thing: if you have a problem or project in need, whether it’s Ruby related, or not, Evil Martians are ready to help! Get in touch!</p>
</div></div>


Error downloading or parsing https://www.rubyjobboard.com/blog/2022/07/13/six-amazing-ways-to-create-enumerated-types-in-rails-and-postgres: Failed to open TCP connection to www.rubyjobboard.com:443 (getaddrinfo: nodename nor servname provided, or not known)


<h2>Content from: https://levelup.gitconnected.com/the-best-engineers-think-like-investors-not-builders-cf005e75ab80</h2>
<div><div>
<p> The Best Engineers Think Like Investors, Not Builders </p>
Google CEO Sundar Pichai<p>I lived in the library during college.</p>
<p>“The more textbook theory I studied, the better an engineer I would become,” I thought.</p>
<p>Yet when I started working, I noticed that the best engineers in the industry didn’t necessarily know more theory than new grads. They just brought a different mindset, the investor’s mindset, to work.</p>
<p>It was this mindset that helped them ask smarter questions, prioritize better, and set themselves apart. Like an investor they:</p>
 
focused on work that paid off sooner than later
calculated if the work was worth their time or not before diving into it
weighed the opportunity costs of their work
 
<p>In this article, I discuss 3 common problems every engineer will face in their career, and how the investor’s mindset will help you make the right technical decision every time.</p>
 1. When will your work payoff? 
<p>In investing, there’s a concept called the “time value of money.” This refers to the fact that money now is worth more than money later. You’d rather have an investment pay off one year from now rather than five years from now.</p>
<p>Engineering work has “time value” as well. Engineering projects that payoff now are worth more than engineering projects that payoff later.</p>
<p>We saw this recently with Facebook stock. It dipped by 50% from its all-time highs when executives revealed their Metaverse investments might not pay off for as long as “15 years later.”</p>
Meta invested over $10B into it already too.<p>Just as how the long payoff period of the metaverse spooked investors, engineers should avoid work that pays off too far into the future. This mistake happens particularly when it comes to engineering migrations.</p>
<p>Why Migrations Are Costlier Than You Think</p>
<p>From an investment standpoint, engineering migrations are a guaranteed upfront cost, for…</p>
</div></div>


<h2>Content from: https://blog.appsignal.com/2022/08/10/a-deep-dive-into-memory-leaks-in-ruby.html</h2>
<div><div>
<p>In the first part of this two-part series on memory leaks, we looked at how Ruby manages memory and how
Garbage Collection (GC) works.</p>
<p>You might be able to afford powerful machines with more memory, and your app might
restart often enough that your users don't notice, but memory usage matters.</p>
<p>Allocation and Garbage Collection aren't free. If you have a leak, you
spend more and more time on Garbage Collection instead of doing
what you built your app to do.</p>
<p>In this post, we'll look
deeper into the tools you can use to discover and diagnose a memory leak.</p>
<p>Let's continue!</p>
 Finding Leaks in Ruby 
<p>Detecting a leak is simple enough. You can use GC, ObjectSpace,
and the RSS graphs in your APM tool to watch your memory usage increase. But
just knowing you have a leak is not enough to fix it. You need to
know where it is coming from. Raw numbers can't tell you that.</p>
<p>Fortunately, the Ruby ecosystem has some great tools to attach context to
those numbers. Two are memory-profiler and derailed_benchmarks.</p>
 
memory_profiler in Ruby 
<p>The memory_profiler gem offers a very simple API and a detailed (albeit a
little overwhelming) allocated and retained memory report — that includes the
classes of objects that are allocated, their size, and where they were allocated.
It's straightforward to add to our leaky program.</p>
<p>Outputting a report that looks similar to this.</p>
<p>There is a lot of information here, but generally, the
allocated objects by location and retained objects by location sections
can be the most useful when looking for leaks. These are the file locations
that allocate objects, ordered by the number of allocated objects.</p>
 
allocated objects are all objects allocated (created) within the
report block.
retained objects are objects that have not been garbage collected by
the end of the report block. We forced a GC run before the end of the
block so we could see the leaked objects more clearly.
 
<p>Be careful about trusting the retained object counts. They depend heavily
on what portion of the leaking code is within the report block.</p>
<p>For example,
if we move the declaration of an_array into the report block, we might be
fooled into thinking the code isn't leaky.</p>
<p>The top of the resulting report won't report many retained objects
(just the report itself).</p>
↓ Article continues below
 
derailed_benchmarks in Ruby 
<p>The derailed_benchmarks gem is a suite of very useful tools for all
kinds of performance work, primarily aimed at Rails apps. For finding
leaks, we want to look at perf:mem_over_time, perf:objects, and
perf:heap_diff.</p>
<p>These tasks work by sending curl requests to a running app, so we can't add
them to our little leaky program. Instead, we'll need to set up a small
Rails app with an endpoint that leaks memory, then install the
derailed_benchmarks on that app.</p>
<p>You should now be able to boot the app with bin/rails s. You'll be able
to curl an endpoint that leaks on each request.</p>
<p>We can now use derailed_benchmarks to see our leak in action.</p>
 perf:mem_over_time 
<p>This will show us memory use over time (similarly to how we watched the
memory growth of our leaky script with watch and ps).</p>
<p>Derailed will boot the app in production mode, repeatedly hit an endpoint
(/ by default), and report the memory usage. If it never stops growing, we
have a leak!</p>
<p>Note: Derailed will boot the Rails app in production mode to perform the tests. By default, it will also require rails/all first. Since we don't have a database in this app, we need to override this behavior with DERAILED_SKIP_ACTIVE_RECORD=true.</p>
<p>We can run this benchmark against different endpoints to see which one/s (if
any) leak.</p>
 perf:objects 
<p>The perf:objects task uses memory_profiler under the hood so the produced
report will look familiar.</p>
<p>This report can help narrow down where your leaked memory is being
allocated. In our example, the report's last section — the
Retained String Report — tells us exactly what our problem is.</p>
<p>We've leaked 10,000 strings containing "ABC" from the LeaksController on
line 3. In a non-trivial app, this report would be significantly larger and
contain retained strings that you want to retain — query caches, etc. —
but this and the other 'by location' sections should help you narrow down your
leak.</p>
 perf:heap_diff 
<p>The perf:heap_diff benchmark can help if the report from perf:objects is too complex to
see where your leak is coming from.</p>
<p>As the name suggests, perf:heap_diff produces three
heap dumps and calculates the difference between them. It creates a report
that includes the types of objects retained between dumps and the
location that allocated them.</p>
<p>You can also read Tracking a Ruby memory leak in 2021 to understand better what's going on.</p>
<p>The report points us exactly where we need to go for our leaky baby app. At the
top of the diff, we see 999991 retained string objects allocated
from the LeaksController on line 3.</p>
 Leaks in Real Ruby and Rails Apps 
<p>Hopefully, the examples we've used so far have never been put into real-life
apps — I hope no one intends to leak memory!</p>
<p>In non-trivial apps, memory
leaks can be much harder to track down. Retained objects are not always bad —
a cache with garbage collected items would not be of much use.</p>
<p>There is something common between all leaks, though. Somewhere, a root-level
object (a class/global, etc.) holds a reference to an object.</p>
<p>One common example is a cache without a limit or an eviction policy. By
definition, this will leak memory since every object put into the cache will
remain forever. Over time, this cache will occupy more and more of the memory
of an app, with a smaller and smaller percentage of it actually in use.</p>
<p>Consider the following code that fetches a high score for a game. It's
similar to something I've seen in the past. This is an expensive request, and
we can easily bust the cache when it changes, so we want to cache it.</p>
<p>The @scores hash is completely unchecked. It will grow to hold
every single high score for every user — not ideal if you have a lot of
either.</p>
<p>In a Rails app, we would probably want to use Rails.cache
with a sensible expiry (a memory leak in Redis is still a memory leak!) instead.</p>
<p>In a non-Rails app, we want to limit the hash size, evicting the oldest
or least recently used items. LruRedux is a nice
implementation.</p>
<p>A more subtle version of this leak is a cache with a limit, but
whose keys are of arbitrary size. If the keys themselves grow, so too will the
cache. Usually, you won't hit this. But, if you're serializing objects as JSON and
using that as a key, double-check that you're not serializing things that grow
with usage as well — such as a list of a user's read messages.</p>
 Circular References 
<p>Circular references can be garbage collected. Garbage Collection in Ruby uses
the "Mark and Sweep" algorithm. During their
presentation introducing variable
width allocation, Peter Zhu and Matt Valentine-House gave an excellent
explanation of how this algorithm works.</p>
<p>Essentially, there are two phases: marking and sweeping.</p>
 
In the marking phase, the garbage collector starts at root objects
(classes, globals, etc.), marks them, and then looks at their referenced
objects.
It then marks all of the referenced objects. Referenced objects that are already
marked are not looked at again. This continues until there are no more
objects to look at — i.e., all referenced objects have been marked.
The garbage collector then moves on to the sweeping phase. Any object not
marked is cleaned up.
 
<p>Therefore, objects with live references can still be cleaned up. As long as a root object does not eventually reference an object, it will be collected. In
this way, clusters of objects with circular references can still be garbage
collected.</p>
 Application Performance Monitoring: The Event Timeline and Allocated Objects Graph 
<p>As mentioned in the first part of this series, any production-level app should use some form of Application Performance
Monitoring (APM).</p>
<p>Many options are available, including rolling your
own (only recommended for larger teams). One key feature you should get from an APM is the ability
to see the number of allocations an action (or background job) makes. Good APM
tools will break this down, giving insight into where allocations come from — the controller, the view, etc.</p>
<p>This is often called something like an 'event timeline.' Bonus points if your
APM allows you to write custom code that further breaks down the timeline.</p>
<p>Consider the following code for a Rails controller.</p>
<p>When reported by an APM, the 'event timeline' might look something like the
following screenshot from AppSignal.</p>
<p>This can be instrumented so we can see which part of the
code makes the allocations in the timeline. In real apps, it is probably going to be less obvious
from the code 😅</p>
<p>Here's an example of an instrumented event timeline, again from AppSignal:</p>
<p>Knowing where to instrument can often be difficult to grasp. There's no substitute for really understanding your application's code, but there are some signals that can serve as 'smells'.</p>
<p>If your APM surfaces GC runs or allocations over time, you can look for spikes to see if they match up with certain endpoints being hit or certain running background jobs. Here's another example from AppSignal's Ruby VM magic dashboard:</p>
<p>By looking at allocations in this way, we can narrow down our search when
looking into memory problems. This makes it much easier to use tools like
memory_profiler and derailed_benchmarks efficiently.</p>
<p>Read about the latest additions to AppSignal's Ruby gem, like allocation and GC stats tracking.</p>
 Wrapping Up 
<p>In this post, we dived into some tools that can help find and fix memory leaks, including memory_profiler, derailed_benchmarks, perf:mem_over_time, perf:objects, perf:heap_diff, the event timeline and allocated objects graph in AppSignal.</p>
<p>I hope you've found this post, alongside part one, useful in diagnosing and sorting out memory leaks in your Ruby app.</p>
<p>Read more about the tools we used:</p>
<p>Additional detailed reading:</p>
<p>Happy coding!</p>
<p>P.S. If you'd like to read Ruby Magic posts as soon as they get off the press, subscribe to our Ruby Magic newsletter and never miss a single post!</p>
</div></div>


<h2>Content from: https://www.honeybadger.io/blog/a-rubyist-s-guide-to-big-o-notation</h2>
<div><div>
            <p>I don't have a degree in computer science. Lots of us Rubyists don't. So for a long time I avoided learning about big-O notation. It looks a little too much like higher math. I mean: O(N^2). Come on.  </p>
<p>Instead, I learned rules of thumb:</p>
 
Finding a specific item in a Hash is faster than in an Array
Avoid nested loops
Watch out for accidental DB queries when generating lists in your views
 
<p>These rules are nice, but unless you understand WHY they work, you're going to find yourself making mistakes and having inexplicable performance problems. </p>
 Why does it matter? 
<p>Big-O notation is just a fancy way of describing how your code's performance depends on the amount of data it's processing. </p>
<p>Performance means one of two things: speed, or ram usage. In computer science class you'd refer to these as "time complexity" and "space complexity." Big-O notation is used for both, but we're going to focus on speed here, since that seems to be the more common usage. </p>
<p>You would expect that processing an array of 100 items would be slower than an array of 10 items. But by how much? 10x, 100x? 1000x?</p>
<p>It's not a big deal with small datasets, but if your app gets exponentially slower for each row in the database it soon becomes a problem. </p>
<p>Before we get into the details, I made a quick chart showing common big-Os with emoji showing how they'll make you feel as your data scales. </p>
Big O
Rank
Meaning
O(1)
😎
Speed doesn't depend on the size of the dataset
O(log n)
😁
10x the data means 2x more time
O(n)
😕
10x the data means 10x more time
O(n log n)
😖
10x the data means about 20x more time
O(n^2)
😫
10x the data take 100x more time
O(2^n)
😱
The dilithium crystals are breaking up!
<p>So when someone says Array#bsearch is better than Array#find because it's O(log n) vs O(n) you can just compare 😁 to 😕 and see that they might be onto something. </p>
<p>For something a little more robust, check out the Big-O Cheat Sheet</p>
 Deciphering the Notation 
<p>You don't have to memorize all of the different Big-O values, so long as you understand how the notation works. </p>
<p>Take, for example, the horrible horrible O(2^n). If we were to express that in Ruby, it might look like this:</p>
<div># O(2^n) translated to Ruby
def o(n)
  2 ** n  # This is ruby for 2^n
end
</div>
<p>Still not obvious? How about if I rename the method and argument to something more user-friendly?</p>
<div># O(2^n) translated to prettier Ruby
def execution_time(size_of_dataset)
  2 ** size_of_dataset
end
</div>
<p>You can do this for all of them:</p>
<div># O(1)
def o1_execution_time(size_of_dataset)
  1
end
# O(n)
def on_execution_time(size_of_dataset)
  size_of_dataset
end
# O(n^2)
def on2_execution_time(size_of_dataset)
  size_of_dataset * size_of_dataset
end
...etc
</div>
<p>Now that you know how the notation works, let's take a look at some typical ruby code and see how it relates.</p>
 O(1) 
<p>When we say that something is O(1) it means that its speed doesn't depend on the size of its data set. </p>
<p>For example, hash lookup times don't depend on the hash size:</p>
<div># These should all take the same amount of time
hash_with_100_items[:a]
hash_with_1000_items[:a]
hash_with_10000_items[:a]
</div>
<p>This is why we tend to say that hashes are faster than arrays for larger datasets. </p>
 O(n) 
<p>In contrast, Array#find is O(n). That means Array#find depends linearly on the number of items in the array. An array with 100 items will take 100 times longer to search than an array with one item</p>
<p>A lot of code that iterates over arrays follows the O(n) pattern. </p>
<div>(0..9).each do |i|
  puts i
end
# This example is 1/2 the speed of the previous because it contains 2x the items. 
(0..19).each do |i|
  puts i
end
</div>
 O(n^2) 
<p>Code that fits an O(n^2) profile tends to involve nested loops. That makes sense if you think about it. One loop gives you O(n), a second nested loop gives you O(n^2). If — for some unholy reason — you had a 5-level nested loop, it'd be O(n^5).</p>
<div>data = (0..100)
data.each do |d1|
  data.each do |d2|
    puts "#{ d1 }, #{ d2 }"
  end
end
</div>
 O(n log n) 
<p>O(n log n) code is often the result of someone finding a clever way to reduce the amount of work that an otherwise O(n^2) algorithm would do. </p>
<p>You wouldn't be able to just look at a piece of code and tell it's O(n log n). This is where the higher math comes in, and it's also where I bow out. </p>
<p>But it is important to know about O(n log n) because it describes a lot of common search algorithms. Ruby's Array#sort uses the venerable quicksort algorithm,  which on average is O(n log n) and worst-case is O(n^2)</p>
<p>If you're not familiar with quicksort, check out this excellent demonstration. </p>
 Putting it all together: Your Database 
<p>One of the most common problems with new web applications is that they're fast on the developer's computer, but in production they get slower and slower. </p>
<p>This happens because the amount of records in your database grows over time, but your code is asking the DB to do operations that don't scale well. ie. O(n) or worse. </p>
<p>For example, did you know that in postgres, count queries are always O(n)?  </p>
<div># This makes the DB iterate over every row of Users
# ...unless you're using a Rails counter cache. 
Users.count
</div>
<p>We can see this by using the postgres explain command. Below, I use it to get the query plan for a count query. As you can see, it plans on doing a sequential scan (that means looping) over all 104,791 rows in the table. </p>
<div># explain select count(*) from users;
                           QUERY PLAN
-----------------------------------------------------------------
 Aggregate  (cost=6920.89..6920.90 rows=1 width=0)
   -&gt;  Seq Scan on users  (cost=0.00..6660.71 rows=104701 width=0)
(2 rows)
</div>
<p>Lots of common rails idioms can trigger unintentional sequential scans, unless you specifically optimize the database to prevent them. </p>
<div># This asks the DB to sort the entire `products` table
Products.order("price desc").limit(1)
# If `hobby` isn't indexed, the DB loops through each row of Users to find it. 
User.where(hobby: "fishing")
</div>
<p>You can use the explain command to see that as well. Here we see we're doing a sort (probably quicksort) on the whole table. If there are memory constraints, it may have chosen a different sorting algorithm with different performance characteristics. </p>
<div># explain select * from users order by nickname desc limit 1;
                               QUERY PLAN
-------------------------------------------------------------------------
 Limit  (cost=7190.07..7190.07 rows=1 width=812)
   -&gt;  Sort  (cost=7190.07..7405.24 rows=104701 width=812)
         Sort Key: nickname
         -&gt;  Seq Scan on users  (cost=0.00..6606.71 rows=104701 width=812)
</div>
<p>The answer to all these problems is, of course, indexing. Telling the database to use an index is a little like in Ruby, when you use a hash lookup O(1) instead of an array find O(n). </p>
 That's all, folks 
<p>I hope this has been a useful introduction to Big-O notation and how in impacts you as a ruby developer! Please ping me @StarrHorne if you have any questions. </p>
          </div></div>


<h2>Content from: https://ivoanjo.me/blog/2017/09/20/why-i-always-use-attr_reader-to-access-instance-variables/</h2>
<div><div> <p>Ruby’s attr_reader method can be used to automatically generate a “getter” for a given instance variable.</p> <p>In simple terms, doing</p>  <p>is the same as writing</p>  <p>I’ve adopted a programming style where I always try to use attr_reader to access instance variables (or getters, if you prefer to call them that 😁). I’ve been asked about the reasons that led me to adopt this style in several PRs, so I wanted to write a quick post motivating my choice.</p> <p>As a driving running example, I will use the following class to represent a car:</p> <div>
<div> <div>class Car
  attr_reader :owner
  attr_reader :license_plate
  private
  attr_reader :engine
  attr_reader :gearbox
  public
  def initialize(owner:, license_plate:)
    # ...
  end
  # ...
end
</div> </div> </div> <p>And here’s my reasoning:</p>  Placing all attr_readers at the top of the class  <p>This serves as documentation: You can open up a class and immediately spot what its internal state is.</p> <p>Furthermore, if your code is well-behaved and there’s no attr_writers or attr_acessors, you can quickly know if a class is mutable (its internal state can change during its lifetime) or immutable (its internal state cannot change after initialization — note that this only covers the object itself, and not the objects it references, e.g. if the variable points at an unfrozen array).</p> <p>By following this simple code discipline, you can get a lot of useful information at a glance.</p>  Using the attr_readers to access instance variables from inside the class  <p>This helps avoid typing mistakes. For instance, consider we add the following method to our Car class, but mistakenly add a typo while writing it (e.g. @eNgine instead of @engine):</p> <div>
<div> <div>  def start
    @gearbox.neutral
    @eNgine.start
  end
</div> </div> </div> <p>What happens when we try to run our code?</p> <div>
<div> <div>$ ruby car.rb 
car.rb:20:in `start': undefined method `start' for nil:NilClass (NoMethodError)
        from car.rb:24:in `&lt;main&gt;'
</div> </div> </div> <p>“What? Why is my engine nil?” you may ask yourself. And off you go on a wild goose chase trying to hunt down why your engine was not correctly initialized because you haven’t noticed that there’s a typo on your start method.</p> <p>So instead let’s not access the instance variables directly, but let’s use the methods that the attr_reader created:</p> <div>
<div> <div>  def start
    gearbox.neutral
    eNgine.start
  end
</div> </div> </div> <p>And what happens when we run this version?</p> <div>
<div> <div>$ ruby car.rb 
car.rb:20:in `start': undefined local variable or method `eNgine' for #&lt;Car:0x000000c9d9522d50&gt; (NameError)
Did you mean?  @engine
        from car.rb:24:in `&lt;main&gt;'
</div> </div> </div> <p>Our output is a lot clearer: there’s no eNgine declared and “did you mean?” engine. You immediately spot your typo and move on.</p>  The usual advantages of using a getter  <p>When you use a method to access your instance variable, it becomes a lot easier to later refactor it, without needing to update all the places where it is used.</p> <p>For instance, consider that we wanted to lazily initialize an engine whenever one is not provided when our car object is created. We can easily change our</p>  <p>into</p> <div>
<div> <div>def engine
  @engine ||= EngineFactory.create
end
</div> </div> </div> <p>Done! This saves us from hunting down usages of @engine in our class and its subclasses.</p>  …Even for private instance variables…  <p>Because all of the advantages above are applicable to instance variables that are not exposed to the outside of the class, I recommend using attr_reader for these variables too, even if you would not usually do so.</p> </div></div>


<h2>Content from: https://thoughtbot.com/blog/using-a-dependency-graph-to-visualize-rspec-let</h2>
<div><div>
<p>What data is created when I execute this RSpec test? This question is not as
straightforward as you might think. Spec files that rely on let often spread
these declarations all over the file so you have to scroll around to find them.
Additionally, let is lazy so a particular declaration won’t actually be
executed unless it is referenced, either directly by your test or indirectly via
one of the direct references. And just to make things even harder, there is also
let! which is eager and always executes no matter what! 😱</p>
<p>In these situations, I like to use a visual approach with a dependency graph to
understand what is going on.</p>
<p>Consider a test file like this. It has a mix of let and let! defined at
various places in the file and at various levels of nesting. What data is
created for the it "is complete" and it "is an active product" tests?</p>
<div>describe User do
  let(:organization) { create(:organization) }
  let(:user) { create(:user, organization: organization) }
  let!(:admin) { create(:user, admin: true, organization: organization) }
  # lots of other tests
  describe "Invoices" do
    let(:product) { create(:product) }
    let(:invoice) { create(:invoice, owner: user, items: [product] }
    it "is complete" do
      expect(invoice).to be_complete
    end
    it "is an active product" do
      expect(product).to be_active
    end
  end
end
</div>
<p>The first step is to list the let declarations in our file. Start near your
test and work outward. This lets us know what we are working with. In our
example we have:</p>
 
invoice
product
admin
user
organization
 
<p>Next, go through the list and see if the associated block references any other
let declarations. For example let(:user) { create(:user, organization:
organization) } references the organization let. If they do, draw an arrow
pointing to that reference (in this case from user to organization). You should
end up with a diagram that looks like this.</p>
<p>Now we can start marking which items get executed. Let’s shade them orange.</p>
<p>let! is eager - it will always be executed regardless of whether it is
referenced or not. Since admin is defined with let!, we can immediately
shade it without looking at the individual tests.</p>
<p>When a let is invoked, its block might reference other lets, causing them to
be evaluated as well. To account for this, we find all of our shaded boxes,
follow the outbound arrows, and shade all dependencies. Keep doing this until
we’ve gone as far as we can go.</p>
<p>It’s important not to follow arrows in reverse! Here we follow the arrow from
the admin to the organization and shade it. We can’t go backwards from the
organization to the user.</p>
<p>Now we can actually get to the individual tests. For each test, mark any let
referenced directly in the test. Then, as before, follow the outbound arrows as
far as they will go, marking every box.</p>
<p>For the test it "is complete", the final diagram looks like this. Every box is
shaded so all of these lets will trigger. Perhaps that’s more than you expected?
Does this test really need a product?</p>
<p>For the test it "is an active product", the diagram looks like this. You can
see that not all of our lets get executed this time.</p>
<p>If we streamline the process a bit by merging the two “follow the dependencies”
steps together, we end up with the following 5 steps:</p>
 
List the lets
Draw connections
Mark eager values
Mark values in tests
Follow the dependency arrows
 
<p>Using this visual approach, I find it much easier to understand what data is and
isn’t created in large, gnarly spec files. It can also be a good teaching tool
for understanding the nuances between let and let!.</p>
<p>If all this complexity with let is frustrating for you, check out Let’s Not
and The Self-Contained Test for a radically different approach to writing
tests that avoids let altogether.</p>
</div></div>


<h2>Content from: https://www.bootrails.com/blog/ruby-multiline-string</h2>
<div><div>&#13;
&#13;
		&#13;
		
<p>We will explore multiple scenarios where the display of a simple String in Ruby on multiple lines could be useful.</p>
 What is a multiline string ? 
<p>A multiline string is a string that, when displayed, returns the output in more than one line.</p>
message = "Hello!
This is my first multiline string."
p message
# =&gt; Hello!
# =&gt; This is my first multiline string.
<p>With Ruby, there are different ways to create multiline strings. In this article, we will go over the main methodologies and highlight their functionalities. But before that, there are two things that are relevant when writing multiline strings.</p>
 The two main aspects to consider before writing a multiline string 
<p>You might consider these two aspects before choosing the methodology to write a multiline string:</p>
 
If you want to include or exclude the blank spaces before each line (in your code). Note that this also includes indentation.
If you need to interpolate variables within your string.
 
 Single and double quotes 
<p>The most common way of writing strings with more than one line is by using either single quotes or double quotes. The characteristics of this method are:</p>
 
Single quotes do not allow interpolation, while double quotes do.
It preserves any blank spaces at the beginning of each line.
If your string includes quotes as part of its content, make sure to use the opposite quotes to encapsulate your string.
You can create line breaks in your code even if you write in one line by using \n.
 
name = "Christian"
message = "Hello #{name},\nHow are you?
       Note the blank spaces here."
p message
# =&gt; Hello Christian,
# =&gt; How are you?
# =&gt;      Note the blank spaces here.
 Multiple lines with HEREDOC 
<p>Heredoc is a particular syntax that relies on a delimiting identifier to write multiline strings. The identifier is used at the beginning (after &lt;&lt;) and the end of the string, and it can be any word/character in capital letters. Normally, and as best practice, developers use the words HEREDOC, TEXT or EOF. When using Heredoc notation, please consider that:</p>
 
It allows interpolation.
It keeps blank spaces and indentations at the beginning of each line. But if you wish to ignore indentation, you can do so by using the special character ~ after &lt;&lt;.
 
name = "Marie"
message = &lt;&lt;TEXT
    Hi, #{name}!
      How are you?
TEXT
p message
# =&gt;     Hi, Marie!
# =&gt;       How are you?
<p>Now using ~:</p>
name = "Marie"
message = &lt;&lt;~TEXT
  Hi, #{name}!
  What's up?
  TEXT
p message
# =&gt; Hi, Marie!
# =&gt; What's up?
<p>Note that indentation is also ignored on the last delimiter, TEXT. If you need to ignore indentation just in that line, you can use - instead of ~.</p>
 Multiple lines thanks to the percent sign (%) 
<p>Finally, the last method to create strings with more than one line is by using % notation. It has several forms, but the most common syntax is %q(YOUR_STRING). The characteristics of this method are:</p>
 
%qdoes not allow interpolation, but %Q does.
It keeps indentations and blank spaces.
 
string = %q(This is the longest
loooooongest string
    I have ever written
)
p string
# =&gt; This is the longest
# =&gt; loooooongest string
# =&gt;    I have ever written
 Summary 
<p>We have summed up the different ways to create multiline strings with Ruby. Knowing the characteristics of each method, should help you understand when to use each option to write efficient and readable code. Remember to check other entries that will help you write efficient Ruby code!</p>
<p>On a final note, keep in mind that when defining hashes and arrays we can use strings, and that also includes multiline strings!</p>
&#13;
		&#13;
		&#13;
			</div></div>


<h2>Content from: https://blog.appsignal.com/2023/03/29/diving-into-custom-exceptions-in-ruby.html</h2>
<div><div>
<p>Customizing exceptions is usually not a common concern during software development. But if you catch an error in an observability tool and can't correctly and quickly identify the problem, you may need more information and details about an exception.</p>
<p>This article will show you how to customize exceptions in Ruby and mitigate potential future problems due to a lack of error information.</p>
<p>Let's dive straight in!</p>
 A Quick Side-Note 
<p>This post is a natural progression to Debugging in Ruby with AppSignal, so we recommend reading that first for an overview of debugging and an introduction to custom exceptions.</p>
 How to Rescue an Exception with Ruby 
<p>Ruby has a class called Exception, from which error-handling classes inherit. In this section, we'll better understand Ruby's structural exception flow before we create our custom exception.</p>
<p>Exception is the main exception class in Ruby, and rescue Exception will catch all exceptions inherited from Exception. It isn't best practice to use this in our app, as it will catch all exceptions used internally by Ruby.</p>
<p>The easiest way to rescue an exception in Ruby is to create a begin ... rescue block of code like the example below:</p>
<p>Since Exception will catch all exceptions, we should try to use something more specific to filter and get only the error we want.
One example is the StandardError class, a standard rescuer used to catch exceptions related to application code errors by ignoring Ruby's internal exceptions.</p>
<p>To catch a StandardException, you can use the example below:</p>
<p>Or, if no exception class is stated, Ruby will return the exceptions handled by the StandardException class.</p>
<p>To create a custom exception with Ruby, you'll probably create a class that inherits from StandardError. We'll cover that in the next few sections.</p>
<p>To learn more about exceptions and find the best one to inherit, check Ruby's exceptions list.</p>
 Adding Additional Information to the Ruby Exception 
<p>Creating a new exception without sending relevant information will not effectively help in debugging — identifying and fixing — the problem. You need to add the error details. Here, we will see how to pass information from objects to the custom exception.</p>
↓ Article continues below
<p>Let's create a new custom exception just to receive the data we want to log. As mentioned in the previous section, the custom exception needs to inherit from StandardError.</p>
<p>You can use a simple Rails project to test this implementation. Create a new folder called exceptions inside the app folder and a class called custom_exception.rb in your Rails project.</p>
<p>In this exception class, we can define all the information that needs to be shown in the logs and we use four attributes for our data:</p>
 
a code to enumerate the exception
a name
an informational message
internal information details about the exception already provided by Ruby
 
<p>And now we create a begin...rescue block to raise the CustomException and pass the parameters to the exception attributes.</p>
<p>This looks useful, so let's continue the implementation and use this data to customize the exception log.</p>
 Extending an Exception in Ruby 
<p>Extending an exception allows us to elevate customization to a more specific and reusable level. Just as Ruby has several exceptions for different types of errors, we can also follow this line of programming in our systems.</p>
<p>Next, let's understand how to override our exception and use it in a context that demands an extension.</p>
<p>Finding information in logs is a painful activity. Developers often blame themselves for not including more information about errors or how to search and filter. If you are not using any monitoring tools that provide this, including meaningful data could save you in the foreseeable future.</p>
<p>Pro-tip: Check out the section on 'Debugging Exceptions in Ruby with AppSignal' in our post Debugging in Ruby with AppSignal for information about how to set up and track custom exceptions in AppSignal.</p>
<p>In the example below, we will customize the display of exceptions in the log. Initially, you might think that it's just a light and pretty way to show data. However, the keywords used in the data are key to finding an error and helping whoever will be monitoring the application.</p>
<p>Add the colorize gem to your project by including the code below in your Gemfile.</p>
<p>Run the bundle to install the colorize gem and launch your Rails application.</p>
<p>Now, in your exception class, import the gem. Print the attributes in a formatted way, so it's easy to see and quickly find an important error.</p>
<p>Check out the result of this visual customization and test some options to create your format and style.</p>
 Wrapping Up and Next Steps 
<p>In this post, we covered how to customize and highlight a Ruby exception in your logs. Many other customizations are possible, but what's most important is that you handle the exceptions relevant to your application. And remember, don't apply the same formatting style to all exceptions, as Rails already does.</p>
<p>Happy coding!</p>
<p>P.S. If you'd like to read Ruby Magic posts as soon as they get off the press, subscribe to our Ruby Magic newsletter and never miss a single post!</p>
</div></div>


<h2>Content from: https://www.hexdevs.com/posts/how-to-remove-dead-code-ruby/</h2>
<div><div>
          <p>
How much does it cost you to carry dead code? How do you find and remove zombie Ruby code? Use these 4 strategies to kill out all the dead code in your Ruby application.
          </p>
<p>
It’s easy to believe that just because a feature is available, it is going to be used someday. But let’s face it: some features in production will go completely unnoticed and unused forever, but you still have to maintain them. How much does it cost to carry all this dead code around?</p>
<p>
After all, to keep these pointless features running, the business has to spend time and money to:</p>
 
  
keep these features working (maintenance costs)  
  
test and deploy them  
  
adjust them so they can interact with other features and not cause bugs  
  
provide user support and documentation  
 
<p>
That’s why finding and deleting dead and redundant code is an important step to increasing the code quality of an application, according to M. Scott Ford.</p>
<p>
💡 This post was inspired by the interview we made with M. Scott Ford at the hexdevs podcast. Check out the full episode here, where we talked about being a mender, building technical wealth, and maintaining legacy code.</p>
<p>
In this post, you’ll learn 4 strategies to uncover dead code and delete it with total confidence from your Ruby application.</p>
 
1 - Find and Remove Dead Code with the Coverband Ruby Gem 
<p>
The scariest part of removing any code is… what if someone is indeed using it but there is no way for us to know?!</p>
<p>
What if there was a way to identify which lines of code have actually been used in production, by real users?</p>
<p>
That’s what the Coverband Ruby Gem is all about. According to their README, Coverband is:</p>
 
  
A gem to measure production code usage, showing a counter for the number of times each line of code that is executed. Coverband allows easy configuration to collect and report on production code usage. It reports in the background via a thread or can be used as Rack middleware, or manually configured to meet any need.  
 
<p>
Coverband is easy to install and use. The dashboard is similar to SimpleCov (but don’t let that confuse you, it has nothing to do with test coverage).</p>
      
    
    Coverband dashboard
    
<p>
The screenshot is from a real project dashboard used by a client. I left Coverband running for a couple of months. Eventually, it was clear that for a given feature X, no lines of code related to that feature were being used.</p>
<p>
From the report, two columns stand out: Runtime and Lines runtime. No one was calling those files. Plus, if you subtract Lines missed from Relevant lines, it’s another indicator that these files are basically only being called when the app loads.</p>
<p>
This analysis was enough to create a PR. Next, I asked the existing developers what was going on with that feature. Was there a sense that the business would need it someday? Or perhaps the feature was only used once a year? I shared the reports with the team and asked if we could safely remove the dead feature.</p>
<p>
They said that the 6,000 lines of code could be removed, and they were happy to see them gone. It was a feature that didn’t go anywhere. It was hard to maintain it, and users didn’t really want it 😿</p>
<p>
If this code was never analyzed and deleted, we wouldn’t have had the opportunity to learn from this mistake. And we would be carrying more than 6,000 lines of dead code.</p>
 
2 - Run a Ruby Static Code Analysis with the Debride Gem 
<p>
Debride Ruby gem is a tool for analyzing code for potentially uncalled/dead methods.</p>
<p>
Similar to Coverband, it generates a report. The difference is that it generates a file listing methods that might not be used. Debride even has some cool features like: a Rails-specific domain knowledge flag, and auto-removal flags.</p>
<p>
Here is an example of a Debride analysis file:</p>
These methods MIGHT not be called:
User
  is_a_cat_owner?                     ./app/models/user.rb:229-230 (2)
  has_new_notifications?              ./app/models/user.rb:312-313 (2)
  has_old_notifications?              ./app/models/user.rb:316-317 (2)
  is_a_member?                        ./app/models/user.rb:140 (1)
<p>
Did you see the MIGHT not be called at the top of the file? That’s because Debride’s report is not 100% accurate. A method or class might be called dynamically at runtime. Plus, the methods might be called somewhere else outside the Ruby code. In this client’s project, for example, we have lots of methods being used only by the frontend.</p>
<p>
As with Coverband, before you go out there removing code, do some due diligence work to figure out what’s really happening.</p>
 
3 - Wrap “Dead or Alive” Code with Feature Flags 
<p>
Coverband and Debride are great tools to get started with removing dead code. Implementing a Code Audit with Feature Flags is another strategy for when they are not enough. </p>
<p>
That’s when the business domain matters: some features are only used once a year, or seasonally. Examples: tax reports, medical reports, and yearly expense reports. How can you confidently remove dead features when business requirements have seasonality?</p>
<p>
Then you might be asking yourself: is this code dead or alive?</p>
      
    
    What if the code comes back and says "I'm still alive!"
    
<p>
When you are unsure whether the code is not gonna come back screaming “I’m still alive!”, a solution is to wrap the entrypoint behind a Feature Flag, and turn it off.</p>
<p>
If nobody complains and the feature flag doesn’t have to be enabled by next year (or longer, depending on the business’s lifecycle), then just delete the code wrapped by the feature flag. It’s dead.</p>
 
4 - Kill Dead Code with Well-Scoped Pull Requests 
<p>
After doing the due diligence to confirm the removal of dead code, another strategy is to make your life easier by creating self-contained PRs.</p>
<p>
Always make sure to create PRs that only affect the dead code. If you need to roll back the changes, it’s going to be easier to revert the PR.</p>
<p>
💡  When you encounter other parts that can be safely deleted when removing dead code, write TODOs with the TODO Or Die gem. Then open new PRs for each one of these TODOs. This will make your life easier. </p>
  
<p>
With these strategies, you can focus on improving the code quality for the files that matter, instead of wasting time poking dead code. Plus, you’ll feel the joy of deleting lines of code.</p>
<p>
To learn more about building technical wealth and how to increase the code quality of your Ruby on Rails applications, follow our How to Improve Code Quality on a Ruby on Rails Application guide.</p>
<p>
All of these 4 strategies work great together. It’s like you’re a zombie detective!</p>
<p>
Which of these strategies have you used? What are you excited to try?</p>
<p>
May the dead code Rest In Peace 🪦🧟</p>
        </div></div>


<h2>Content from: https://railsatscale.com/2023-06-08-automatically-find-memory-leaks-in-native-gems/</h2>
<div><div>
     
  I have a more in-depth article on how ruby_memcheck works internally.
 
 
  This article was adapted as a talk at RubyKaigi 2022.
 
<p>Ruby supports gems written in native languages, such as in C, C++, or Rust. These gems are known as “native gems”. There are several reasons why a gem author would choose to write a native gem over writing one in Ruby, such as for higher performance or to use a native library. However, native gems have several drawbacks, one of which is the risk of memory leaks. High level languages like Ruby have a garbage collector, which manages memory and ensures memory is released after you’re done using it. However, these native languages don’t have a garbage collector, so they require the developer to manually manage and release memory. If the developer forgets to release a piece of memory, then a memory leak will occur.</p>
 Impacts of Memory Leaks 
<p>Here’s a memory usage graph of a production Shopify service over time on a weekend. We see linear memory growth and usage peaking at over 3GB before containers are killed due to running out of memory. This service is on Kubernetes, which has self-healing capabilities, so the killed containers will be replaced with new ones. However, if this service wasn’t self-healing, then we could’ve experienced downtime.</p>
<p>Here’s a memory usage graph of the same service after the memory leaks were fixed. We see that the memory usage is relatively flat at around 1.1GB.</p>
 Using ruby_memcheck to Automatically Find Memory Leaks 
<p>The memory leaks in that service were in a native gem called liquid-c and were automatically found using the ruby_memcheck tool. ruby_memcheck is a tool built on top of Valgrind Memcheck. Valgrind Memcheck is a tool that finds memory leaks and errors inside native binaries. Unfortunately, we cannot directly use Valgrind Memcheck on Ruby since Ruby doesn’t free all of its memory during shutdown. This is deliberate, as the system will reclaim all of the memory after shutdown anyways, so freeing the memory is not necessary and will make Ruby’s shutdown slower. However, this means that Valgrind Memcheck will end up reporting tens of thousands of false positives.</p>
<p>ruby_memcheck uses several aggressive heuristics to filter out these false postives. In most cases, these heuristics filters out all of the false positives that originate from Ruby and leaves only the detected memory leaks from the native gem. However, since these heuristics are designed to filter out all potential false positives, it could potentially result in false negatives (real memory leaks are filtered out).</p>
 Does It Work? 
<p>Yes! It’s found memory leaks in popular native gems such as nokogiri, liquid-c, protobuf, gRPC, and libxml2. You can find more details about the memory leaks it has found in the repo.</p>
  </div></div>


<h2>Content from: https://evilmartians.com/chronicles/meet-yabeda-modular-framework-for-instrumenting-ruby-applications</h2>
<div><div>
<div><p>Adopt metrics-driven development today with a drop-in open source framework and a family of gems that makes instrumenting Ruby web applications a breeze and works with Rails, Sidekiq, and Prometheus out of the box. Learn how Yabeda changed the way we monitor background jobs in one of the products we develop for eBay and adapt it to your own use case.</p></div>
<p>In our previous article dedicated to instrumenting Rails applications with Prometheus, we urged everyone to embrace a “metrics-driven development” mindset that will make your (and everyone’s on your team) life easier after an application is deployed to production.</p>
<p>We shared a belief that thinking about possible bottlenecks and ways to detect them while still in development will reduce your support costs significantly after a push to production.</p>
<p>As we described a sequence of steps necessary to collect Rails application data, we realized that writing boilerplate code for that becomes daunting quickly. So this article is less talk, more work.</p>
 
We are proud to introduce Yabeda—a family of Ruby gems based on an extendable framework that helps you make your first step towards MDD with minimal effort.
 
<p>All you need to do to gauge Rails and Sidekiq performance and push instrumentation data to one of the supported data-stores (Prometheus integration comes out of the box) is to drop a few lines of code in your current application, and run bundle install. If you feel like extending the built-in functionality, the modular structure of the framework makes creating your own plugin rather straightforward, so PRs are welcome!</p>
Yabeda (Russian: ябеда, IPA: [ˈjæbʲɪdə], pronounced “yah-beedah”) is a Russian word that kids use to describe someone who reports wrongdoings to adults, similar to “tattletale” in English
<p>In this article, we will take Sidekiq metrics as an example of things almost any production Rails application has to track and demonstrate how a combination of Yabeda, Prometheus and Grafana paves the way to designing exhaustive dashboards that allow you to keep your hand at the application’s pulse at all times.</p>
<p>First, we are going to show you how things can be hand-rolled (which is, in fact, a look at Yabeda’s internals), and then we will demonstrate how the same can be achieved without any boilerplate code.</p>
Yabeda organization on GitHub currently hosts four gems, but we expect that list to grow soon
 TL;DR (try it yourself) 
<p>If you know your way around Docker and Docker Compose, feel free to clone an example Rails application, run it on your localhost and see Yabeda in action right away!</p>
<p>If you are not yet familiar with the subject matter, Prometheus is a highly configurable open source systems monitoring and alerting toolkit originally built at SoundCloud. It is a tool for collecting metrics, while Grafana turns plain text feed from Prometheus into graphs to be represented on a handy dashboard.</p>
<p>The provided example pulls in necessary Prometheus and Grafana distributions and sets them up automatically. If you already have both tools installed locally and know how to configure them—then the only thing you need is one of Yabeda’s gems.</p>
 Putting Sidekiq on the spot 
<p>We did not pull an idea for Yabeda out of thin air, one of the products we work on since long time: eBay for Business, relies on background jobs heavily. We can not divulge how much data we process precisely, but let’s say we had surpassed our first billion Sidekiq tasks a while ago.</p>
Default Sidekiq dashboard as we know and love it
<p>Sidekiq has a familiar built-in dashboard that can be found at the /sidekiq endpoint. However, if you run a production application at scale, you quickly come to a realization that while the provided data (total process task count, failed task count, current queue size, and few more metrics) is enough for detecting that something went wrong, it is certainly not sufficient to properly investigate problems. Also, it can not alert you once things start going south. It also does not give you any history on the sizes of your queues or failed/retry/dead/scheduled sets.</p>
If you want to know more about how we run product development at eBaymag.com—read our recent article:
<p>From our experience, once the reports about the problem are in, most useful metrics are:</p>
 
The time required for executing a single job (an average or, even better, a 95th percentile). Segmenting those values by worker class names helps to find a non-optimal implementation or a worker gone rogue.
Job count in a queue per originator (can be a rake task, web request, other job or someone just fired rails console in production).
 
<p>They are absent in a default Sidekiq dashboard, but with Prometheus, anything can be tracked! However, writing a Ruby implementation for that from scratch in a clean, maintainable way definitely requires some trial and error.</p>
<p>Read on to see a solution we came up with before extracting it into the Yabeda framework.</p>
 Prometheus rising 
<p>In our previous article, we have already introduced Prometheus’ basic metric types. If we are to adopt Prometheus for book-keeping, we need to set our mind on a right type for each metric and compose our registry (a list of everything we are tracking).</p>
<p>For a plain count of jobs added to queues, a counter would be the first choice. You could write something like:</p>
registry = Prometheus::Client.registry
registry.counter(
  :sidekiq_jobs_enqueued_total,
  "A counter of the total number of jobs sidekiq enqueued."
)
<p>Keep in mind that counters in monitoring solutions are quite special: they can only go one way: up or down (which is still technically “up”, but with negative values).</p>
<p>Strictly speaking, counters in Prometheus, NewRelic or DataDog are implemented as a Conflict-free Replicated Data Type called a G-Counter. Values coming from various sources can be merged without conflicts (it is mathematically proven). This allows monitoring software to not care about state loss at all: things just keep being added up after reset. If you want to keep track of a value that can be decremented, you need to compose two G-Counters: one for increment, one for decrement.</p>
<p>To keep track of job execution times, we need to put together more information: something that will allow us to compute percentiles and averages. The best fit would be a histogram type.</p>
registry = Prometheus::Client.registry
registry.histogram(
  :sidekiq_job_runtime_seconds,
  "A histogram of the job execution time measured in seconds.",
  {}, 
  [
    0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1, 2.5, 5, 10, 
    30, 60, 120, 300, 1800, 3600, 86_400 
  ].freeze
)
<p>Internally, histograms are merely composed out of several counters. One with a count of measurements, one with a total sum of measured values, and few more recording the distribution of observed values by buckets. It is a simple, compact, yet powerful structure that allows for precise measurements. Note that Sidekiq jobs can take quite a long time (as opposed to HTTP requests, for instance), so we also need to enhance a standard set of buckets to add more scales to our histogram.</p>
<p>And for the rest of the registry (note these are the exact metrics that come by default with yabeda-sidekiq):</p>
registry = Prometheus::Client.registry
registry.counter(:sidekiq_jobs_executed_total, "A counter of the total number of jobs sidekiq executed.")
registry.counter(:sidekiq_jobs_success_total, "A counter of the number of jobs successfully processed.")
registry.counter(:sidekiq_jobs_failed_total, "A counter of the total number of jobs failed in sidekiq.")
registry.gauge(:sidekiq_jobs_waiting_count, "The number of jobs waiting to process in sidekiq.")
registry.gauge(:sidekiq_active_workers_count, "The number of currently running machines with sidekiq.")
registry.gauge(:sidekiq_jobs_scheduled_count, "The number of jobs scheduled for later execution.")
registry.gauge(:sidekiq_jobs_retry_count, "The number of failed jobs waiting to be retried")
registry.gauge(:sidekiq_jobs_dead_count, "The number of jobs exceeded their retry count.")
registry.gauge(:sidekiq_active_processes, "The number of active Sidekiq worker processes.")
registry.gauge(:sidekiq_default_queue_latency, "Default queue latency.")
<p>Now when we know what things we want to track and by what means, it is time to make our Sidekiq actually send the reports.</p>
<p>Sidekiq has a notion of middleware (similar to middleware in Rack). Code examples for implementing server middleware, client middleware, and an “exporter” class that actually updates the registry are somewhat lengthy, but if you’re curious, you can find them in this gist.</p>
<p>Now for the fun part. In Prometheus’ paradigm, all metrics should be exposed through an HTTP server that Prometheus will call from time to time. So, yes, we need to run a WEBrick from inside of a Sidekiq server. And don’t forget about threads:</p>
Sidekiq.configure_server do |config|
  config.server_middleware do |chain|
    chain.add SidekiqMetricsServerMiddleware
  end
  
  Thread.new do
    Rack::Handler::WEBrick.run(
      Rack::Builder.new do
        use Rack::CommonLogger, ::Sidekiq.logger
        use SidekiqExporter, registry: Prometheus::Client.registry
        run -&gt;(_env) { [404, { "Content-Type" =&gt; "text/plain" }, ["Not Found\n"]] }
      end,
      Host: ENV["PROMETHEUS_EXPORTER_BIND"] || "0.0.0.0",
      Port: ENV.fetch("PROMETHEUS_EXPORTER_PORT", 9394),
      AccessLog: []
    )
  end
end
<p>Bingo! Now we can go to /metrics endpoint at localhost:9394 and see Sidekiq reporting diligently. In this example, we have used one of the standard Prometheus ports, but you are free to set your own through an environment variable.</p>
Sidekiq process reports collected metrics in Prometheus’ raw text format
 There’s a gem for that. Or four! 
<p>“Nice! But should I write all the code above each time?”, you might ask, and the answer is “Not anymore!” Just add these gems to your Gemfile:</p>
gem 'yabeda-sidekiq'
gem 'yabeda-prometheus'
<p>With Yabeda, all code from the chapter above is reduced to three lines inside the Sidekiq’s initializer:</p>
Sidekiq.configure_server do |_config|
  Yabeda::Prometheus::Exporter.start_metrics_server!
end
<p>This will declare, collect, and serve at /metrics endpoint all ten built-in metrics that we mentioned above. Port number can be configured through PROMETHEUS_EXPORTER_PORT or PORT environment variables (default is 9310).</p>
 
Now it is finally the time to draw the curtain from Yabeda repository.
 
<p>At the time of this introduction, it holds four gems:</p>
 
yabeda-sidekiq. Tracks a set of useful Sidekiq metrics and inserts Sidekiq middleware to collect them.
yabeda-prometheus. Exports all collected metrics to Prometheus.
yabeda-rails. Automagically registers and tracks basic Rails application metrics (maybe you don’t need to pay for that monitoring solution, after all).
yabeda. The base gem that provides a unified DSL for defining metrics and a common API for all adapters, present, and future.
 
<p>We’ve already seen yabeda-sidekiq, so let’s take a closer look at other members of the family.</p>
 yabeda-prometheus 
<p>This gem is the one that takes care of exporting collected metrics to Prometheus. We’ve seen it working together with yabeda-sidekiq, but you can use it separately—to export any other metrics you might want to collect and register with Yabeda (through an existing adapter or the one you may be willing to create yourself). Here’s how you can quickly set it up:</p>
gem "yabeda-prometheus"
use Yabeda::Prometheus::Exporter
<p>This will add the /metrics endpoint to whatever main web server you are running.</p>
<p>If you need to run a separate server from a long-running non-web process (a complex delayed job, for instance), you can call Yabeda::Prometheus::Exporter.start_metrics_server!</p>
<p>Another option is to use Prometheus’ push gateway, in case you want to report a metric from a short process quickly: Yabeda::Prometheus.push_gateway.add(Yabeda::Prometheus.registry).</p>
<p>Now all the metrics that are known to the base gem through adapters (Rails, Sidekiq, more to come) will be exported to Prometheus automatically. Note that you can plug multiple adapters at the same time to monitor different parts of your application.</p>
 yabeda-rails 
<p>Just drop yabeda-rails into your Gemfile and get the following set of Rails core metrics for free:</p>
 
rails_requests_total (counter). The total number of requests for any controller, action, format and response code.
rails_request_duration (histogram). Seconds Rails took to handle requests per controller#action.
rails_view_runtime (histogram). Seconds spent on rendering views. Find overcomplicated views with a single look on the graph.
rails_db_runtime (histogram). Time spent on executing database requests. This helps to find actions responsible for heavy database requests.
 
<p>Coupled with yabeda-prometheus for exporting and Grafana for creating dashboards, this gem provides a good alternative to paid monitoring solutions!</p>
yabeda-rails metrics displayed on a Grafana dashboard. Sorry, we had to blur out some juicy class names!
<p>Useful hooks make it easy to collect custom metrics. Here we are measuring the duration of an external API request by using the after_controller_action hook (you can place it into one of your existing initializers or create a new one).</p>
Yabeda.histogram(:rails_ext_runtime, unit: :seconds, comment: "External APIs request duration")
Yabeda::Rails.after_controller_action do |event, labels|
  rails_ext_runtime.measure(labels, (event.duration / 1000))
end
 yabeda 
<p>This gem is not supposed to be used directly but provides all the building blocks for creating your own plugin.</p>
<p>In our last article, we have introduced some imaginary metrics for bells and whistles. Here’s how the db_whistles_blows_total can be registered with Yabeda’s DSL:</p>
Yabeda.configure do
  counter :db_whistles_blows_total, comment: 'A counter of whistles blown'
end
<p>That gives you a basic grow-only counter (yes, it sounds fancy, but in fact, it’s just a class that implements an increment public method). You can always access the current value with the name of the metric itself (Yabeda.db_whistles_blows_total) or increment it, attaching labels if necessary:</p>
Yabeda.db_whistles_blows_total.increment(kind: 'success', db_server: 'name_of_db_server_from_config')
 Lo and behold 
<p>Staring at the raw data feed is not fun at all, the whole point for having it is that it can be easily set up as a data source for a visual dashboard, and Grafana is an excellent choice for dashboards. It also plays nice with Prometheus, setting up integration is relatively straightforward.</p>
<p>After a dashboard is up, you can detect production problems at a glance. As they say, there are just three things people can stare at forever: fire, water, and charts.</p>
Essential metrics from yabeda-sidekiq displayed on a Grafana dashboard. Sorry, we had to redact names of classes and queues
<p>Above are some metrics collected by yabeda-sidekiq and exported to Prometheus with yabeda-prometheus, represented on a Grafana dashboard. Let’s take a closer look at the size history by queue, and the 95th percentile of job execution times segmented by worker classes:</p>
Close-up on Sidekiq queue sizes history and average processing times by job type
<p>The screenshot above shows business as usual: we frequently drain our queues, and that means we have enough capacity.</p>
<p>But if things ever go wrong (and they will, per Murphy’s law), we will notice it immediately:</p>
800K tasks in a queue signal a problem
<p>From the picture above we can tell that we won’t be able to drain our queues even after a few days (as queue size decreased just slightly in the past 7 hours):</p>
A close-up of the problem: queues are not being drained in time
<p>And our 95th percentile job processing time has increased to one minute (up to several minutes for some worker classes). Panic mode on.</p>
<p>Now it’s time to try scaling the amount of Sidekiq workers:</p>
It seems that scaling made matters worse…
<p>As we see on the screenshot above, scaling did not seem to help: job processing speeds actually went up after we added more workers.</p>
<p>However, we have enough data to investigate further, and we soon find out that the true reason behind the crisis is a single user who has amassed most of the jobs and it causes deadlocks on the database level.</p>
<p>Now that is a problem we can start solving!</p>
 Join the effort 
<p>We’ve been working on Yabeda for the past year, extracting solutions from the production code and putting them into a modular, extendable, open source framework. While the proof of concept is definitely reached, the API can still be refined, and your input would be invaluable. We do not recommend using Yabeda in production right away, but if you have a greenfield project that allows experiments—we would definitely like to know how smooth was the integration and what features, in your opinion, are still lacking. Feel free to open an issue in any repo listed under our organization.</p>
<p>The documentation is also very minimal at the moment: definitely enough for the first look, but we are willing to put more work on making it as accessible and beginner-friendly as possible. Hopefully, with your help.</p>
<p>For a quick jump-start introduction to Yabeda concepts, we recommend trying out a demo Rails application that comes in a Docker container: nothing beats reading the code and running an application.</p>
<div></div>
<p>We believe that a free, all-inclusive, one-stop solution for instrumenting and monitoring Ruby applications was long overdue and we cannot wait for the reaction from Ruby and Rails communities. Stars, issues, and PRs are welcome!</p>
</div></div>


Error downloading or parsing https://arian-celina.com/how-to-deploy-a-rails-app-in-under-30-mins-and-less-than-5-per-month/](https://arian-celina.com/how-to-deploy-a-rails-app-in-under-30-mins-and-less-than-5-per-month/): bad URI(is not URI?): "https://arian-celina.com/how-to-deploy-a-rails-app-in-under-30-mins-and-less-than-5-per-month/](https://arian-celina.com/how-to-deploy-a-rails-app-in-under-30-mins-and-less-than-5-per-month/)"


<h2>Content from: https://dmitrytsepelev.dev/service-objects-anti-patterns</h2>
<div><div>
    <p>Service objects are hard. Back in days, the goal was to extract business logic from controllers and models, and, in some cases, turned out to a black hole inside app/services folder.</p>
<p>In this post we will discuss two things that are often missing: contracts and composability. After that I will share a list of  anti–patterns I found while working on dozens of Rails applications. We will examine more and less popular gems to see if they help us to avoid these bad practices. The final part is all about diagnosing your code for these problems and fixing them quickly.</p>
<p>Bear in mind that we will talk about pretty standard Rails monoliths with the relational database, key–value storage, background jobs, mailers etc. If you have something complex (e.g., message queues or search engines)—you will be probably able to extend these cases to handle these interactions as well. Also, sometimes service objects are also called interactors or (business) actions—all issues are applicable to anything in this list.</p>
  
       
        
        
          Navigation 
        
        
       
    
       
        
        
          Contracts 
        
        
       
    
<p>Ruby does not have explicit type annotations out of the box. In simple cases it’s easy to guess: what class will be used if the instance called user?</p>
<p>However, what if you want to compose your services? In that case you will have to dig up some code or tests to understand types and make sure you handled all possible cases.</p>
 
  You might be using rbs or Sorbet to get some types. If you use them—let me know if missing contracts are still an issue in your project.
 
<p>Ideally service objects should somehow specify their input and output types explicitly. Also, it would be really helpful to have the validation of the returned value to make sure that there are no hidden scenarios that return something different.</p>
<p>There is a number of ways to add validation for input parameters, for instance using Rails Attributes API:</p>
<div><div>class SignUp
  include ActiveModel::Model
  include ActiveModel::Attributes
  attribute :birthday, :date
  validates :birthday, presence: true
end
</div></div>
<p>You can also take a look at dry-initializer.</p>
<p>Output validation is harder, and it’s more dangerous. Take a look at this code:</p>
<div><div>result = PlaceOrder.call(user:)
</div></div>
<p>What is result? Can this method raise exceptions? We can open up the source code and check, but what if it calls other classes? We will have to reach the maximum depth to get the list of possible results and exceptions. And we will do it every time for every class, because this knowledge is not written anywhere.</p>
 
  As a homework exercise, try to estimate how much time you team could waste while figuring out these missing contracts.
 
       
        
        
          Service composition 
        
        
       
    
<p>In functional programming composition is an act or mechanism to combine simple functions to build more complicated ones. In other words, you can compose two functions into a new one that runs the first function on the input and passes the value to the second one. You get the same thing as you would get if you call two functions manually.</p>
<p>In object–oriented programming composition means the ability to use one object from another. They say that there is a has–a assoctiation between them.</p>
 
  Do not confuse it with has_one from ActiveRecord.
 
<p>You can call one service object from another, i.e., compose them like this:</p>
<div><div>class AddItemToCart
  def initialize(user:, item:)
    @user = user
    @item = item
  end
  def call
    user.with_lock do
      # this is composition of services:
      cart = FindOrCreateCart.call(user: @user)
      cart_item = cart.cart_items
        .create_with(quantity: 0)
        .find_or_initialize_by(item: @item)
      cart_item.quantity += 1
      cart_item.save!
    end
  end
end
</div></div>
       
        
        
          Object–relational impedance mismatch 
        
        
       
    
<p>Object–relational impedance mismatch is a set of concepts that are similar between object–oriented languages and relational databases, but they work in completely different ways. For instance, objects and tuples both can hold data, but databases do not have encapsulation.</p>
<p>The most important thing for us is the difference in error handling. In the program you can write some logic, raise exceptions and handle them, but in the database there is an additional level—transactions. When you start transaction, you can make some changes in the database, and commit or rollback them altogether. This is called atomicity, which is represented by A in ACID).</p>
<p>Depending on the isolation level, database can behave differently when you make queries. For instance, default isolation level READ COMMITTED can return different data when you make the same query two times if something had changed in between, but REPEATABLE READ will make queries return the same data until the commit.</p>
       
        
        
          Non–atomic actions 
        
        
       
    
<p>Database is not the only thing we use when we write logic: we can also change other data stores (e.g., Redis or Elasticsearch), perform HTTP requests, work with file system and so on. These actions are not managed by transaction—after the rollback, these changes will stay unless we handle it in some way.</p>
       
        
        
          What’s wrong with composition 
        
        
       
    
<p>Take a look again at the example above. Do you think it works fine? Maybe, depends on the implementation of the FindOrCreateCart. For instance, this is how it could look like:</p>
<div><div>class FindOrCreateCart
  def initialize(user:)
    @user = user
  end
  def call
    user.with_lock do
      cart = user.orders.find_or_create_by(status: :cart)
    end
    Redis.instance.incr("carts", 1)
  end
end
</div></div>
<p>Imagine that we use this service directly as well. We need the lock and transaction to make sure that user has only one cart, and we need to increment counter (just for the demonstration purposes).</p>
<p>This service object looks fine as well, this is how it works:</p>
 
  transaction opens;
  cart item is looked up:
    
      if it’s found—transaction commits—Redis counter is incremented;
      if it’s not found—insert is attempted:
        
          if insert succeeds then transaction commits—Redis counter is incremented;
          otherwise—rollback error is thrown, transaction is rolled back and exception prevents counter from the incrementation.
        
      
    
  
 
<p>However, when it’s called as a part of AddItemToCart, two bad things can happen.</p>
<p>First one appears when FindOrCreateCart goes to one of scenarios when counter is incremented, but FindOrCreateCart raises a Rollback error after: in this case cart creation will be rolled back, but counter increment will still happen.</p>
<p>The second one happens when something causes user.orders.find_or_create_by(status: :cart) to raise Rollback: in this case the nested with_lock block will catch the exception, but won’t rollback the transaction because it’s not the place where it was open. As a result, everything will be commited!</p>
 
  Read more about nested transactions issue here
 
<p>How could we avoid these issues? Well, for the second one we could add requires_new: true to make sure a nested transaction will use the SAVEPOINT. The first issue is not trivial: nested service has no way to know that parent transaction was rolled back; parent service has no way to know if nested action needs a specific rollback.</p>
<p>This is the perfect example of services that cannot be composed. One way to fix this issue is to not reuse the code at all: for instance, you can keep everything in controller actions, which will make transaction usage clearer, but I believe that it will lead us to the unmaintainable mess.</p>
<p>Another way is to split service objects into groups: first is used only on top level (opens up transactions, sets locks etc.) and cannot be called from other services; second contains only database actions; third contains only non–atomic actions.</p>
<p>As a summary of this section we can conclude that services should either be fully composable or composition should be prohibited at all. In the next section we will discuss more service object anti–patterns, some of them cause actions to be non—composable.</p>
       
        
        
          Service implementation anti–patterns 
        
        
       
    
       
        
        
          Nested transactions 
        
        
       
    
<p>Nested transactions were already illustrated above: this problem happens when one service object opens up the transaction and calls another service that tries to open up transaction as well. This can lead to the situation when nested rollback is just thrown away.</p>
       
        
        
          Behavior is different depending on how service was called 
        
        
       
    
<p>This one was also illustrated above. The symptom of the problem is that action behaves differently depending on whether it was called directly or from another service object.</p>
       
        
        
          Incompatible transaction levels 
        
        
       
    
<p>This is kinda a sub–problem of nested transactions: if some service needs a higher isolation level that a default one and it’s called from another action that did not request this isolation level, it will either behave in a wrong way or database error will happen.</p>
<p>I might be wrong, but all modern databases I know does not allow it. However, even if it was possible, imagine the following situation:</p>
<div><div>class ParentService
  def call
    ApplicationRecord.transaction do
      ChildService.call
    end
  end
end
class ChildService
  def call
    ApplicationRecord.transaction(isolation: :repeatable_read) do
      # logic
    end
  end
end
</div></div>
<p>ChildService works fine when called directly, but when it’s called inside READ COMMITTED—it will behave in a wrong way.</p>
       
        
        
          Non–atomic action inside transactions 
        
        
       
    
<p>Non–atomic action is literally anything that changes a state of anything except the database that runs the transaction. When something fails, transaction will be rolled back, but change made by non–atomic action will stay.</p>
<p>For example, take a look at the following service:</p>
<div><div>class RegisterUser
  def initialize(email:)
    @email = email
  end
  def call
    ApplicationRecord.transaction do
      user = User.create!(email: @email)
      UserMailer.welcome(user).deliver_now
      IssueDiscount.perform_later(user:)
      CreateCart.call(user:)
    end
  rescue ActiveRecord::RecordNotUnique
    # user already exists
  end
end
</div></div>
<p>This looks kinda fine: if user already exists than we won’t sent mail and issue discount. However, what if CreateCart fails? In this case user record will not be committed, but email will be sent and job will be enqueued.</p>
<p>After that, later job will raise an error because it won’t be able to load (or deserialize) user from the database. Moreover, even if transaction will commit, there is a huge chance that background job processor will pick up the job before the commit, leading to the same error. Of course, it will restart and load the user, so job will succeed but there will be a reported error. Pretty nasty bug to investigate later, right?</p>
<p>It worth mentioning that this issue can be obscure when transaction is opened on the upper level. In this case you won’t notice the issue unless you examine the whole call stack. One possible sign is that you have atomic and non–atomic action in the same class: unless there’s an implicit transaction—there is something going wrong here.</p>
       
        
        
          IO actions inside transaction 
        
        
       
    
<p>This section is dedicated to another similar pattern, but causing different sympthoms is IO actions inside transactions. Imagine a following service:</p>
<div><div>class CheckPayment
  def initialize(order:)
    @order = order
  end
  def call
    @order.with_lock do # lock will force DB snapshot to be taken
      response = PaymentProviderClient.check_payment(order_id: order.external_id)
      order.update!(payment_status: :processed) if response[:status] == :processed
    end
  end
end
</div></div>
<p>From the business logic perspective it looks fine: we fetch the status from the external API and update our database based on the response. However, what if that API is down?</p>
 
  Make sure to not make ANY IO actions in the main (i.e., web server) thread cause it can consume all workers and application will be down. This is the anti–pattern itself, not related to the place where you keep the business logic. Prefer background jobs for such things instead.
 
<p>That will make our transaction longer. Moreover, locks will be held while application waits from the response, preventing other transactions from finishing.</p>
       
        
        
          Two transactions for single controller action 
        
        
       
    
<p>I know there might be exceptions, but most of the time when you have two transactions (not nested) inside the single action it means that something is wrong. What if the second one fails? Should we revert a first one? How?</p>
<p>For instance, imagine the situation, when you need to do 3 things:</p>
 
  change database state (transaction 1);
  fetch some data from HTTP (we already know it should be outside the transaction);
  change database state one more time depending on the response (transaction 2).
 
<p>The best way to do that is to run background job after the first transaction and keep steps 2 and 3 there—it will either complete or we will get the exception to our error tracker, fix the problem and re–run the job.</p>
       
        
        
          I’m using a gem for service objects! 
        
        
       
    
<p>In this section we will discuss ways how to implement service objects using existing popular gems and approaches. As you might have noticed, all these anti–patterns can be more or less easily refactored, but can we prevent them by design? Does gem design help to achieve that?</p>
<p>Linters seem to be helpless here because usually they can check only a single file in isolation, there is no way to see if transaction was opened around. As mentioned earlier, we can mitigate these patterns if we do not have any composition, but that might be a bad solution in terms of maintenance.</p>
       
        
        
          interactor 
        
        
       
    
<p>One of most popular solutions is interactor.</p>
 
  Do not confuse it with Interactor pattern coming from the Clean architecture. By definition from the internet it means “little, reusable chunks of code that abstract logic from presenters while simplifying your app and making future changes effortless”. Not related to our topic at all.
 
<p>A very first thing that’s mentioned in the README at the moment of writing is context. Effectively it’s just a hash that contains all passed arguments, and you can add more if you want. When service runs successfully you get the whole context back, otherwise you get Interactor::Failure. You can also use context.fail! to halt and cause service to return a failure object.</p>
<div><div>class AuthenticateUser
  include Interactor
  def call
    if user = User.authenticate(context.email, context.password)
      # adding two more variables to the context
      context.user = user
      context.token = user.secret_token
    else
      context.fail!(message: "authenticate_user.failure")
    end
  end
end
# args will go to context
AuthenticateUser.call(email:, password:)
</div></div>
<p>The context itself feels a bit dangerous, because it can be used as a replacement of instance variables, which sounds like a breach of encapsulation. Are we sure someone even wants to read these new variables?</p>
<p>Frankly speaking, it took me a second to understand that we need to pass email and password to make this call. However, just to make things even more hard, let’s take a look at organizers:</p>
<div><div>class PlaceOrder
  include Interactor::Organizer
  organize CreateOrder, ChargeCard, SendThankYou
end
</div></div>
<p>What does it accept and return? You will have to go and read specs or code of all three services. Understanding the contract becomes a really hard job.</p>
<p>Let’s see what we got for transactions and non–atomic actions. There is an around hook you can use:</p>
<div><div>class PlaceOrder
  include Interactor::Organizer
  organize CreateOrder, ChargeCard, SendThankYou
  around do |interactor|
    ApplicationRecord.transaction { interactor.call }
  end
end
</div></div>
<p>I bet SendThankYou contains some non–atomic logic. Can we pull it away from the transaction?</p>
<div><div>class PlaceOrder
  include Interactor::Organizer
  organize CreateOrder, ChargeCard
  around do |interactor|
    ApplicationRecord.transaction { interactor.call }
    SendThankYou.call(interactor.context)
  end
end
</div></div>
<p>That kinda works, but what if we need to do something non–atomic inside the service in the middle of the chain? That would be really hard because you will have to not forget to pull it away as well. Moreover, in this case CreateOrder and ChargeCard cannot be used directly without wrapping them into the transaction.</p>
 
  It worth mentioning, that there is a rollback method that can help us to do some cleanup at least.
 
<p>As a result, composition does not play well here too: we have to prohibit a direct usage of services that not open the transaction for themselves. Also, we should always remember to not add anything non–transactional to these services and have separate services for that.</p>
       
        
        
          active_interaction 
        
        
       
    
<p>The next stop is active_interaction. Let’s rewrite our previous example:</p>
<div><div>class AuthenticateUser &lt; ActiveInteraction::Base
  string :email
  string :password
  def execute
    if user = User.authenticate(email, password)
      { user:, token: user.secret_token }
    else
      fail AuthenticationFailed
    end
  end
end
</div></div>
<p>This looks a bit better in terms of contract: we can see that there are two strings expected. The returned value ({ user:, token: user.secret_token }) will be placed to the result object:</p>
<div><div>outcome = AuthenticateUser.run(email:, password:)
outcome.valid? # =&gt; true
outcome.result # =&gt; { user:, token: user.secret_token }
</div></div>
<p>We still need to read the code to understand, what is returned. Note that there is no validation to make sure that result is always the same. For instance, in some cases we might return only user, and the code that uses this service should be aware of it.</p>
<p>What about the composition? According to the README, we can call another service using compose and pass arguments explicitly:</p>
<div><div>class PlaceOrder &lt; ActiveInteraction::Base
  object :user
  def execute
    ApplicationRecord.tranasction do
      order = compose(CreateOrder, user:)
      compose(ChargeCard, user:, order:)
    end
    compose(SendThankYou, user:)
    order
  end
end
</div></div>
<p>It’s better than implicit context and organizer we saw in interactor! However, all other problems are still here: we have to split services into ones that can be directly used and manage transactions by ourselves.</p>
       
        
        
          mutations 
        
        
       
    
<p>Let’s take a quick look at mutations:</p>
<div><div>class AuthenticateUser &lt; Mutations::Command
  required do
    string :email, matches: EMAIL_REGEX
    string :password
  end
  def execute
    if user = User.authenticate(email, password)
      { user:, token: user.secret_token }
    else
      :auth_failed
    end
  end
end
</div></div>
<p>There is an input validation. The same as active_interaction there is an implicit result, but the difference is that there are no other validations except data types, README suggests to do everything manually in the execute method.</p>
<p>Composition is done using plain old method calls:</p>
<div><div>class PlaceOrder &lt; Mutations::Command
  required do
    object :user
  end
  def execute
    ApplicationRecord.tranasction do
      order = CreateOrder.execute(user:)
      ChargeCard.execute(user:, order:)
    end
    SendThankYou.execute(user:)
    order
  end
end
</div></div>
<p>This approach has same issues as previous solutions we inspected.</p>
       
        
        
          LightService 
        
        
       
    
<p>Another popular gem I found is LightService:</p>
<div><div>class Transactional
  def self.call(context)
    ApplicationRecord.transaction { yield }
  end
end
class CalculatesTax
  extend LightService::Organizer
  def self.call(order)
    with(order:).with(Transactional).reduce(
        LooksUpTaxPercentageAction,
        CalculatesOrderTaxAction,
        ProvidesFreeShippingAction
      )
  end
end
class LooksUpTaxPercentageAction
  extend LightService::Action
  expects :order
  promises :tax_percentage
  executed do |context|
    tax_ranges = TaxRange.for_region(context.order.region)
    context.tax_percentage = 0
    if object_is_nil?(
      tax_ranges,
      context,
      'The tax ranges were not found'
    )
      next context
    end
    context.tax_percentage = tax_ranges.for_total(context.order.total)
    if object_is_nil?(
      context.tax_percentage,
      context,
      'The tax percentage was not found'
    )
      next context
    end
  end
  def self.object_is_nil?(object, context, message)
    if object.nil?
      context.fail!(message)
      return true
    end
    false
  end
end
</div></div>
<p>What we can notice here:</p>
 
  interactor–like organizers;
  interactor–like around hooks for transactions (or run them manually);
  
promises to specify the output.
 
<p>Contract is defined better for separate services, but it’s still a challenge to read it for the organizer. Composition has all the issues we saw before.</p>
       
        
        
          Granite 
        
        
       
    
<p>You might be curious how gem with &lt;200 stars appeared here. Take a look:</p>
<div><div>class PlaceOrder &lt; Granite::Action
  subject :user
  private def execute_perform!(*)
    # no need to open transaction — gem will do that for us when needed and use same
    # transaction for other services
    order = create_order_service.perform!
    charge_card_service.perform! # not sure how to pass order here, see below
  end
  after_commit do
    UserMailer.thank_you(user: subject).perform_later
  end
  memoize def create_order_service
    CreateOrder.new(subject)
  end
  memoize def charge_card_service
    ChargeCard.new(subject)
  end
end
</div></div>
<p>The thing that’s done in a different way is that Granite supports service composition out of the box. As you see, we instantiate other services and call them, the gem handles transactions.</p>
<p>Here comes a problem: gem requires all services to be defined as memoized instances, making it impossible to pass anything that was created by another service. I guess it’s possible to implement anything one might need using some code jiggling.</p>
<p>There are many more things in the gem: various hooks, validations, data representers, policies, context, associations, exceptions, I18n and many more. What’s missing is the documentation—it’s fairly short so you will have to dig into gem source to learn it better. I like this gem way more than others because it has a lot of cool ideas, but writing services this way feels hard: you need to keep in mind too many rules.</p>
       
        
        
          dry-* 
        
        
       
    
<p>Often times people mention dry stack when they are asked about the way they implement service objects. This is a set of gems that can do different things, so the way you cook them really matters. There are a couple of thins to remember if you decide to go that way.</p>
<p>dry-validation can be used for the contract of input data, output is not covered by anything if I’m not mistaken.</p>
<p>dry-transaction is about business transactions and does not help with database transactions at all, so you have to manage that manually as discussed in previous solutions.</p>
<p>dry-monads are often used as result objects, but there are some common pitfalls. One of the most popular features is do notation that implements a popular railway pattern:</p>
<div><div>class CreateAccount
  include Dry::Monads[:result]
  include Dry::Monads::Do.for(:call)
  def call(params)
    values = yield validate(params)
    account = yield create_account(values[:account])
    owner = yield create_owner(account, values[:owner])
    Success([account, owner])
  end
  def validate(params)
    # returns Success(values) or Failure(:invalid_data)
  end
  def create_account(account_values)
    # returns Success(account) or Failure(:account_not_created)
  end
  def create_owner(account, owner_values)
    # returns Success(owner) or Failure(:owner_not_created)
  end
end
</div></div>
<p>This looks good, but be aware that when yield Failure happens the database transaction will be rolled back. This brings us to the problem of “all or nothing”. Imagine that you want to create an order for user from his cart, but also cleanup the cart from items that are out of stock. As a result we have 3 possible scenarios:</p>
 
  Success when order is created;
  Failure when cart is empty;
  something when cart became empty.
 
<p>I’d really like to use Failure(:empty_cart) but I cannot, because it will roll back my transaction! As a result we have to do a following thing:</p>
<div><div>def call
  ApplicationRecord.transaction do
    yield clear_cart
    yield create_order
  end
end
def clear_cart
  cart.cart_items.filter(&amp;:out_of_stock?).delete_all
end
def create_order
  if cart.cart_items.any?
    order = user.orders.create!(cart)
    Success(:order_created, order:)
  else
    Success(:empty_cart)
  end
end
</div></div>
<p>Alternatively, we can stop using do notation or yield, but that’s what we came for.</p>
<p>One last thing to mention that Failure rolls back transaction only when used with yield, this won’t work:</p>
<div><div>def call
  ApplicationRecord.transaction do
    yield clear_cart
    create_order
  end
end
</div></div>
       
        
        
          Anyway, are my services fine or not? 
        
        
       
    
<p>After reading this bunch of text you might be asking yourself if your services are fine or they need some changes. I prepared a checklist for you.</p>
<p>First of all, if you are not reusing the code at all or have separate classes for actions that happen before and after transactions and never mix them—probably you can stop thinking about composition issues. Otherwise—your services might be affected by some of the related anti–patterns.</p>
<p>The fastest way to check this is to install isolator. It will report cases when someone performs non–atomic action, schedules job or makes HTTP request from inside the transaction. It might find some issues caused by composition. As soon as you get some offences, you can quickly fix some of them by after_commit_everywhere:</p>
<div><div>class SomeService
  include AfterCommitEverywhere
  def call
    ApplicationRecord.transaction do
      # db operations
      after_commit do
        # jobs, mails and etc go here
      end
      # you can continue db operations if you want
    end
  end
end
</div></div>
<p>This is not ideal and you might still need to redesign your service object, but at least it will help to fix some nasty bugs right away by separating flows.</p>
<p>HTTP queries can be moved away from transaction by putting it before the transaction block:</p>
<div><div>class CheckPayment
  def initialize(order:)
    @order = order
  end
  def call
    response = PaymentProviderClient.check_payment(order_id: order.external_id)
    ApplicationRecord.transaction do
      order.update!(payment_status: :processed) if response[:status] == :processed
    end
  end
end
</div></div>
<p>However, it’s not always easy, because this service might be called from another one which opened the transaction already. As you might have guessed, the hardest part is nested transactions. I did not found an existing solution, so I prepared a quick and dirty script for you:</p>
<div><div>ApplicationRecord.singleton_class.prepend(Module.new do
  def transaction(**kwargs)
    Thread.current[:transaction_stack] ||= []
    unless kwargs[:requires_new]
      location = caller_locations(1, 1).first
      if Thread.current[:transaction_stack].any?
        puts &lt;&lt;~TEXT
          Found nested transaction in #{location}.
          Opened up in:
          #{Thread.current[:transaction_stack].join("\n")}
        TEXT
      end
    end
    if Thread.current[:transaction_stack].empty? || !kwargs[:requires_new]
      Thread.current[:transaction_stack] &lt;&lt; location
    end
    super(**kwargs).tap do
      Thread.current[:transaction_stack].pop
    end
  rescue e
    Thread.current[:transaction_stack] = []
    raise e
  end
end)
</div></div>
<p>Put it to the initializer and run your specs—maybe there will be something.</p>
<p>As mentioned, input validation can be handled by Rails Attributes API, dry-initializer or something similar.</p>
  
<p>You might be wondering how to to completely avoid nested transactions, write fully reusable and composable service objects without any way to make it wrong. I’m curious too, stay tuned and I’ll share something in the next post!</p>
 
  If you want to take a look at the thing I’m experimenting with—here it is.
 
<p>At the meantime, take a look at your services, see if you can spot some anti–patterns using your eyes and tools. Check if that causes some bugs or performance issues in your system. Think if you are using composition, try to remember bugs caused by unhandled scenarios after the service call.</p>
<p>Maybe you will be able to solve it by redesigning the class layout. Probably making some new team agreements will help. It might turn out that your services are fine and you don’t face any issues at all.</p>
  </div></div>


<h2>Content from: https://rubyhero.dev/rails-request-cycle</h2>
<div><div>
<p>When we talk about the request that is coming to the Rails application, we usually consider two elements of the application: routes configuration and controller action. The route configuration decides which controller action should be triggered when the given request comes.</p>
<p>However, there is a lot more than that. Knowing the request cycle’s nuances allows us to understand the Rails application’s architecture better and extend it when needed. This article is a journey from a moment when the visitor submits the website address to a moment when a view in your Rails application is rendered. Jump on board!</p>
<p>All my notes are based on years of hands-on experience at iRonin.IT - a top software development company, where we provide custom software development and IT staff augmentation services for a wide array of technologies.</p>
 From the domain name to the server 
<p>To access the website, we are using domain names rather than IP addresses because it’s easier to remember them, and in most cases, the domain name is part of the company’s or person’s brand.</p>
 Domain Name System (DNS) 
<p>Each time you type the domain name into the browser bar and hit the enter key, the request to the Domain Name System (DNS) is sent. The DNS helps our computers to translate the domain name to the proper IP address under which the webserver is available. You can treat the IP address as a telephone number. Our browser can now “call” the number, and the server will respond.</p>
 HTTP and HTTPS protocols 
<p>Most likely, if the person that is calling and the person who is picking up the phone doesn’t talk in the same language, they won’t understand each other. The same applies to the browser and the server. Human beings can use languages like English, Spanish, etc., while it was agreed that HTTP will be the language that both the server and browser will understand.</p>
<p>HTTP and HTTPS are the same protocol, but the main difference is that with the safer version, the message we send from the browser to the server is encrypted, so nobody between those two points will be able to read it.</p>
<p>Now that we know how the request gets to the server and is understood by the server, it’s time to see how it gets processed and passed to the application.</p>
 The file in the Rails application that is triggered as the first 
<p>Have you ever wondered which file in the Rails application is executed first when the request comes to the server? It’s the file named config.ru. This information reveals to us the truth behind processing the requests in our application. Let’s take a closer look at this file.</p>
 Rails application’s entry point 
<p>The config.ru consists of two lines of code:</p>
require_relative 'config/environment'
run Rails.application
<p>The first line loads the config/environment.rb file, and in the second line, we are passing the instance of our application to the run method that is available out of the box. If you named your application as Guestbook, then the instance of your application would come as Guestbook::Application.</p>
<p>Then the run method is provided by Rack - API for Ruby frameworks to communicate with web servers. Rack informs the web application about the request using the call method.</p>
<p>The call method implemented by the web application has to accept one argument, the env hash, and has to return an array with three elements - status, headers, and response body.</p>
 The simple web application with rack 
<p>If we would like to build a straightforward application that would imitate the Rails application and run it on Rack, we would have to write the following code:</p>
class ImitationOfRails
  def call(env)
    [200, {'Content-Type' =&gt; 'text/plain'}, ['Hello from every path']]
  end
end
<p>and we can now replace the contents in the config.ru file:</p>
require_relative 'imitation_of_rails.rb'
run ImitationOfRails.new
<p>The rack gem comes with a web server called rackup, so you can execute the following command to start the server and see if our “imitation” of Rails works:</p>
rackup
<p>Of course, you can now extend our simple application and display different responses for different paths, but this part is just a topic for another article.</p>
 Rack and Rails 
<p>Now as we understand how Rack is working and how the application can use it, we can go back to Rails. Remember what we passed to the run method? It was Rails.application instance. So as we know now, it implements the call method so it can work with Rack. Let’s test it in the console:</p>
2.7.0 :001 &gt; Rails.application.call({})
Traceback (most recent call last):
        1: from (irb):1
NoMethodError (undefined method 'start_with?' for nil:NilClass)
<p>We end up with an error because we passed a blank environment hash, which is never the case. The application always receives the environment information containing a path, the request method, and other information.</p>
<p>We don’t have to build our env hash from the bottom; the Rack provides a nice method to produce a hash for any path in our application:</p>
2.7.0 :001 &gt; env = Rack::MockRequest.env_for('/')
2.7.0 :002 &gt; Rails.application.call(env)
<p>You can try executing the above code in the rails console inside a Rails project, and you will receive an output that is passed to the server when the request for the given path is made.</p>
 In the middle of the request process 
<p>We are in the middle of the request process - the server accepted the request and passed it to the application. It’s a perfect moment to mention the middleware.</p>
<p>The middleware, as the name suggests, is a code that is executed in the middle. Let’s modify our “imitation of Rails” application to demonstrate the simple middleware in action.</p>
<p>In the same directory you created imitation_of_rails.rb and config.ru files, create new file called hello_middleware.rb with the following code:</p>
class HelloMiddleware
 def initialize(app, path:)
   @app = app
   @path = path
 end
 def call(env)
   if env['PATH_INFO'] == @path
     [200, {'Content-Type' =&gt; 'text/plain'}, ['Hello from middleware!']]
   else
     @app.call(env)
   end
 end
end
<p>We would like to render a different message when the configured path is requested. Now it’s time to edit the config.ru file and let Rack know that we want to have the custom message rendered when /home is the requested path:</p>
require_relative 'imitation_of_rails'
require_relative 'hello_middleware'
use HelloMiddleware, path: '/home'
run ImitationOfRails.new
<p>You can execute the rackup command and see the results.</p>
 Rails middleware 
<p>Rack uses the run method to run the application and use method to run middleware - does it mean that Rails is not using any middleware if the config.ru file does not contain any use instructions? No. Rails is calling middlewares differently.</p>
<p>You can see the list of middlewares used by Rails by using the following command:</p>
bin/rails middleware
<p>The list is quite long. One of the middlewares that are shipped with Rails by the default is ActionDispatch::RequestId. If we would look into the source of that class, we would see that it implements the call method that accepts the env hash - just like Rack expects the middleware class to implement.</p>
<p>The initializer of the class also accepts the header argument. If this argument is passed, it looks for this header values as a request id; otherwise, it generates a unique string using SecureRandom.uuid method.</p>
<p>The last position on the middlewares list is Guestbook::Application.routes (if you named your application as Guestbook) - this is where our application is triggered.</p>
 Routes 
<p>Because the run method is invoked on Guest::Application.routes instance, this class implements the call method. Let’s take a closer look at it.</p>
<p>Guest::Application.routes returns instance of ActionDispatch::Routing::RouteSet class. This class is responsible for matching the request path with routes defined in the config/routes.rb file.</p>
<p>When the route is matched, the new instance of the controller is created, and the action method is invoked. Before it happens, the request and response objects are saved because they must be available in any place of the controller.</p>
<p>After the controller’s action is executed, the flash message is set if needed, and the response array is returned.</p>
 Controller’s middleware 
<p>We already discussed the middleware, but since we are talking about the controller structure, it is worth mentioning that each controller can have its list of middlewares.</p>
<p>The same rules apply as before - our middleware class has to implement the call method that takes the env hash as an argument, and the initialize method has to accept the app argument and optional arguments for configuration purposes:</p>
class HelloMiddleware
 def initialize(app)
   @app = app
 end
 def call(env)
   
 end
end
<p>You can now call the use method inside the given controller:</p>
class UsersController &lt; ApplicationController
  use HelloMiddleware
  def index
    
  end
end
<p>Such an approach gives us more granular control over middlewares that are triggered during the request process. You don’t have to add any conditionals to the middleware definition, as you can simply use middleware per controller if needed.</p>
 A moment before rendering 
<p>I mentioned that before the action is rendered, response and request object are saved to be accessible in the controller. It happens in the dispatch method from the ActionController::Metal class:</p>
def dispatch(name, request, response)
  set_request!(request)
  set_response!(response)
  process(name)
  request.commit_flash
  to_a
end
<p>The most exciting part of this method is the execution of the process method. This method is also defined in multiple ancestors from our controller class.</p>
<p>If you would like to list all ancestors for the given controller, you can do it via UsersController.ancestors.</p>
 Rendering 
<p>The final step in the request cycle is the rendering of the view for the action. The result of rendering is stored in the response.body variable.</p>
<p>As you may remember, the response array contains three objects: response code, response body, and headers. The content-type header depends on the kind of view, and the response code depends on whether the given action was found and the request was accepted. The rendering itself is a larger topic and deserves its article so that I won’t go more in-depth right now.</p>
 The response cycle 
<p>As soon as the request cycle ends, the response cycle starts so the server can deliver the response to the browser.</p>
<p>As you can see, the request cycle is heavily based upon Rack. The root application object is a rack app, but controllers behave a little bit differently. Action methods do not return a response directly; they mutate the response object, which is later converted into a Rack response array.</p>
</div></div>


<h2>Content from: https://techcrunch.com/2023/06/02/sample-seed-pitch-deck-oii-ai/</h2>
<div><div>
	<p>
						 Pitch Deck Teardown: Oii.ai’s $1.9M seed deck 
		</p>
			<div>
			
<div>
			
			Haje Jan Kamps		
		
						6 months		
	</div>
		</div>
	
			<div>
			
		</div>
	</div><div>
				<p>The award for the best/worst startup name I’ve seen in a while goes to Oii.ai. This company’s name is weird enough that Google Chrome insists on doing a search for the term “oii.ai’ when you type the URL into the address bar. In any case, a confusing name doesn’t mean it’s a bad business.</p>
<p>The company claims it raised a $1.85 million seed round with this deck. We didn’t cover this round, and the company is tight-lipped about who its investors are, but the deck was interesting enough that I’m choosing to break my usual rule of needing press coverage to do a pitch deck teardown.</p>
  
<p>We’re looking for more unique pitch decks to tear down, so if you want to submit your own, here’s how you can do that. </p>
  
 Slides in this deck 
<p>Oii.ai has an 18-slide deck plus a couple of appendix slides. Some of the slides have been lightly redacted, but the company says it is including every slide so we can get a full picture of the deck that helped it close the round.</p>
<p>Here are the slides:</p>
 
Cover slide
Vision slide
Interstitial slide
Overview slide (“Welcome to Oii”)
Solution slide? with a side of business model slide
Problem slide?
Market trend slide
Traction slide
Team slide
  TAM slide 1 (Pharma sector)
  TAM slide 2 (Retail sector)
  Market overview + competitive landscape slide
  Competitive advantage slide
  Sales pipeline slide
  Product roadmap slide
  The ask + opportunity slide
  Use of Funds slide
  Closing slide + contact detail slide
  Appendix slide 1: Competition (Llamasoft)
  Appendix slide 2: Competition (Llamasoft)
  Appendix slide 3: Acquisition opportunities
 
 Three things to love 
<p>I have to admit that I’ve rarely found it as hard to categorize slides as I did with this deck. The information isn’t organized the way I would expect. It does work sometimes, but it often does not.</p>
 Excellent “what we want to change” narrative 
<p>This slide paints a concise and clear picture of the change Oii wants to see in the world. It’s a simple and effective way to show why the company needs to exist.</p>
<div>
<p>[Slide 6] An unusual take on the value proposition slide. Image Credits: Oii.ai</p>
</div>This slide is unusual because it falls somewhere in the middle of the problem, solution and value proposition narrative. In this case, it works because it helps draw a clear line between what the company is seeing in the world right now and the future it envisions.
<p>I like the creative approach and can see this type of slide being more commonly used in the future.</p>
 A good take on early-stage traction 
<p>The company doesn’t have much in the way of traction, but it does avoid falling into the trap of leaning into vanity metrics:</p>
<div>
<p>[Slide 8] Here’s some traction for ya. Image Credits: Oii AI</p>
</div>It took me a couple of moments to realize that PoC probably meant proof of concept rather than people of color; I do enjoy brevity on slides, but I also think that you can afford to spell out abbreviations.
<p>Now, technically, only the top-level revenue number is the one with the actual traction; the other figures are all benefits and value propositions. The traction that flows from these numbers is efficacy, so the story here is, “In our proof-of-concept phase, we generated X amount of revenue and were successful in proving that our product works.”</p>
<p>In most cases, graphs that show revenue growth over time are better than snapshots when it comes to traction. Having said that, I appreciate how hard it is to show traction as an early-stage startup, and this slide actually does better than most, so we’ll chalk this one up as a win.</p>
 Overall, good visual storytelling 
<p>I like that this deck has clearly had some design attention and that it relies on imagery to tell its story. Good images go a long way in helping a deck come to life, and from that perspective, Oii AI’s deck is pretty compelling. Colorful images and fun design choices all work in its favor.</p>
<p>Although, if I were to pick a nit…</p>
<div>
<p>[Slide 3] The future looks retro. Image Credits: Oii AI</p>
</div>If you are building the cutting edge of AI to disrupt an industry, maybe don’t use a stock image of a GPS device that nobody has used since Apple introduced built-in GPS with the iPhone 3G in 2008.
<p>In this case, I believe the device pictured is one of the Garmin Nuvi 700 series, which was launched the same year as Apple started putting GPS into iPhones and was essentially the beginning of the end for the entire category. Visually aligning your company with a product category that met its very public and extremely painful demise 15 years ago may not send the right message.</p>
<p>In the rest of this teardown, we’ll take a look at three things Oii AI could have improved or done differently, along with its full pitch deck!</p>
			</div></div>


<h2>Content from: https://dev.37signals.com/vanilla-rails-is-plenty/</h2>
<div><div>
<p>I have often heard this: vanilla Rails can only get you so far. At some point, apps become unmaintainable, and you need a different approach that brings the missing pieces, because Rails encourages a poor separation of concerns at the architectural level.</p>
<p>The seminal Domain Driven Design (DDD) book discusses these four conceptual layers: presentation, application, domain, and infrastructure. The application layer implements business tasks by coordinating work with the domain layer. But Rails only offers controllers and models: models include persistence via Active Record, and Rails encourages direct access to them from controllers. Critics argue that the application, domain, and infrastructure layers inevitably merge into a single mess of fat models. Indeed, alternatives always include additional buckets, such as services or use case interactors, at the application layer, or repositories, at the infrastructure layer.</p>
<p>I find this discussion fascinating because here at 37signals we are big fans of both vanilla Rails and Domain Driven Design. We don’t run into the alleged maintenance problems when evolving our apps, so here I would like to discuss how we organize our application code.</p>
  
 We don’t distinguish application and domain layers 
<p>We don’t separate application-level and domain-level artifacts. Instead, we have a set of domain models (both Active Records and POROs) exposing public interfaces to be invoked from the system boundaries, typically controllers or jobs. We don’t separate that API from the domain model, architecturally speaking.</p>
<p>We care a lot about how we design these models and the API they expose, we just find little value in an additional layer to orchestrate the access to them.</p>
<p>In other words, we don’t default to create services, actions, commands, or interactors to implement controller actions.</p>
  
 Controllers access domain models directly 
<p>We are fine with plain CRUD accesses from controllers for simple scenarios. For example, this is how we create boosts for messages and comments in Basecamp:</p>
<div><div>class BoostsController &lt; ApplicationController
  def create
    @boost = @boostable.boosts.create!(content: params[:boost][:content])
  end
</div></div>
<p>But more often, we perform these accesses through methods exposed by domain models. For example, this is the controller to select the desired box for a given contact in HEY:</p>
<div><div>class Boxes::DesignationsController &lt; ApplicationController
  include BoxScoped
  before_action :set_contact, only: :create
  def create
    @contact.designate_to(@box)
    respond_to do |format|
      format.html { refresh_or_redirect_back_or_to @contact, notice: "Changes saved. This might take a few minutes to complete." }
      format.json { head :created }
    end
  end
</div></div>
<p>Most of our controllers use this approach of accessing models directly: a model exposes a method, and the controller invokes it.</p>
  
 Rich domain models 
<p>As opposed to anemic domain models, our approach encourages building rich domain models. We think of domain models as our application API and, as a guiding design principle, we want that one to feel as natural as possible.</p>
<p>Because we like to access business logic via domain models, some core domain entities end up offering much functionality. How do we avoid the issues related to the dreaded fat model problem? With two tactics:</p>
 
  Using concerns to organize model’s code.
  Delegating functionality to additional systems of objects (AKA using plain object-oriented programming).
 
<p>I’ll clarify with an example. A core domain entity in Basecamp is a Recording. Most elements a user manages in Basecamp are recordings — the original use case that motivated Rails’ delegated types.</p>
<p>You can do many things with recordings, including copying them to other places or incinerating them. Incineration is the term we use for “deleting data for good”. For the caller — e.g., controller or job — we want to offer a natural API:</p>
<div><div>recording.incinerate
recording.copy_to(destination_bucket)
</div></div>
<p>But, on the inside, incinerating data and copying are pretty different responsibilities. So we use concerns to capture each:</p>
<div><div>class Recording &lt; ApplicationRecord
  include Incineratable, Copyable
end
module Recording::Incineratable
  def incinerate
    # ...
  end
end
module Recording::Copyable
  extend ActiveSupport::Concern
  included do
    has_many :copies, foreign_key: :source_recording_id
  end
  def copy_to(bucket, parent: nil)
    # ...
  end
end
</div></div>
<p>I wrote an article about how we use concerns here, if you are interested.</p>
<p>Now, incineration and copying are involved operations. Recording wouldn’t be a good spot to implement those. Instead, it delegates the work itself to additional systems of objects.</p>
<p>For incinerating, Recording::Incineratable creates and executes a Recording::Incineration, which encapsulates the logic of incinerating a recording:</p>
<div><div>module Recording::Incineratable
  def incinerate
    Incineration.new(self).run
  end
end
</div></div>
<p>For copying, Recording::Copyable creates a new Copy record.</p>
<div><div>module Recording::Copyable
  extend ActiveSupport::Concern
  included do
    has_many :copies, foreign_key: :source_recording_id
  end
  def copy_to(bucket, parent: nil)
    copies.create! destination_bucket: bucket, destination_parent: parent
  end
end
</div></div>
<p>Here, things are more complex: Copy is a child of Filing. Filing is a common parent class for both the copy and move operations. When a filing is created, it enqueues a job that will eventually invoke its #process method. That method invokes file_recording, a template method to be implemented by child classes. When implementing that method, Copy creates a Recording::Copier instance to perform the copy.</p>
<div><div>module Recording::Copyable
  extend ActiveSupport::Concern
  included do
    has_many :copies, foreign_key: :source_recording_id
  end
  def copy_to(bucket, parent: nil)
    copies.create! destination_bucket: bucket, destination_parent: parent
  end
end
class Copy &lt; Filing
  private
    def file_recording
      Current.set(person: creator) do
        Recording::Copier.new(
          source_recording: source_recording,
          destination_bucket: destination_bucket,
          destination_parent: destination_parent,
          filing: self
        ).copy
      end
    end
end
class Filing &lt; ApplicationRecord
  after_create_commit :process_later, unless: :completed?
  def process_later
    FilingJob.perform_later self
  end
  def process
    # ...
    file_recording
    # ...
  end
end
</div></div>
<p>This example is not as simple as the incineration one, but the principle is the same: rich internal object models hidden behind high-level APIs on domain models. This doesn’t mean we always create additional classes to implement concerns, far from it, but we do when complexity justifies it.</p>
<p>Along with concerns, this makes the approach of classes with a large API surface work. If you are thinking about the Single Responsibility Principle (SRP), as Michael Feathers says in Working effectively with Legacy code you must differentiate between SRP violations at the interface level or the implementation level:</p>
 
  The SRP violation we care more about is violation at the implementation level. Plainly put, we care whether the class really does all of that stuff or whether it just delegates to a couple of other classes. If it delegates, we don’t have a large monolithic class; we just have a class that is a facade, a front end for a bunch of little classes and that can be easier to manage.
 
<p>In our example, there are no fat models in charge of doing too many things. Recording::Incineration or Recording::Copier are cohesive classes that do one thing. Recording::Copyable adds a high-level #copy_to method to Recording’s public API and keeps the related code and data definitions separated from other Recording responsibilities. Also, notice how this is just good old object orientation with Ruby: inheritance, object composition, and a simple design pattern.</p>
<p>On a final note, one could argue that these three are equivalent:</p>
<div><div>recording.incinerate
Recording::Incineration.new(recording).run
Recording::IncinerationService.execute(recording)
</div></div>
<p>We don’t believe they are: we strongly prefer the first form. On one side, it does a better job of hiding complexity, as it doesn’t shift the burden of composition to the caller of the code. On the other, it feels more natural, like plain English. It feels more Ruby.</p>
  
 What about services? 
<p>One of the building blocks of DDD is services, which are meant to “capture important domain operations that can’t find a natural home in a domain entity or value object”.</p>
<p>We don’t use services as first-class architectural artifacts in the DDD sense (stateless, named after a verb), but we have many classes that exist to encapsulate operations. We don’t call those services and they don’t receive special treatment. We usually prefer to present them as domain models that expose the needed functionality instead of using a mere procedural syntax to invoke the operation.</p>
<p>For example, this is the code for signing up a new user in Basecamp via invitation tokens:</p>
<div><div>class Projects::InvitationTokens::SignupsController &lt; Projects::InvitationTokens::BaseController
  def create
    @signup = Project::InvitationToken::Signup.new(signup_params)
    if @signup.valid?
      claim_invitation @signup.create_identity!
    else
      redirect_to invitation_token_join_url(@invitation_token), alert: @signup.errors.first.message
    end
  end
end
class Project::InvitationToken::Signup
  include ActiveModel::Model
  include ActiveModel::Validations::Callbacks
  attr_accessor :name, :email_address, :password, :time_zone_name, :account
  validate :validate_email_address, :validate_identity, :validate_account_within_user_limits
  def create_identity!
    # ...
  end
end
</div></div>
<p>So instead of having a SigningUpService in charge of the “signing up” domain operation, we have a Signup class that lets you validate and create an identity in the app. One can argue this is just a bit of syntax sugar away from being a service or even a form object. But, as I see it, it’s just plain object orientation with Ruby to give a domain concept a proper representation in code.</p>
<p>Also, we don’t make a big deal of distinguishing whether a domain model is persisted or not (Active record or PORO). From the business logic consumer’s point of view, that’s irrelevant, so we don’t capture the distinction between domain entities and value objects in code. They are both domain models to us. You can find many POROs in our app/models folders.</p>
  
 The dangers of isolating the application layer 
<p>My main problem with the idea of an isolated application layer is that people often take it way too far.</p>
<p>The original DDD book warns about the problem of abusing services:</p>
 
  Now, the more common mistake is to give up too easily on fitting the behavior into an appropriate object, gradually slipping towards procedural programming.
 
<p>And you can find the same advice in Implementing Domain Driven Design:</p>
 
  Don’t lean too heavily toward modeling a domain concept as a Service. Do so only if the circumstances fit. If we aren’t careful, we might start to treat Services as our modeling “silver bullet.” Using Services overzealously will usually result in the negative consequences of creating an Anemic Domain Model, where all the domain logic resides in Services rather than mostly spread across Entities and Value Objects.
 
<p>Both books discuss the challenges of isolating the application layer, starting with the nuances of differentiating domain and application services. Furthermore, they acknowledge that most layered DDD architectures are relaxed, with the presentation layer sometimes accessing the domain layer directly. The original DDD book states that what enables DDD is the crucial separation of the domain layer, noting that some projects don’t make a sharp distinction between the user interface and the application layers.</p>
<p>However, in the Rails world, you often see dogmatic takes that advocate against controllers directly talking to models with tremendous conviction. Instead, there should be an intermediary object to mediate between both — e.g. an application service from DDD or an interactor from Clean Architecture. I believe such nuance-free recommendations favor the appearance of either:</p>
 
  Tons of boilerplate code because many of these application-level elements simply delegate the operation to some domain entity. Remember that the application layer should not contain business rules. It just coordinates and delegates work to domain objects in the layer below.
  An anemic domain model, where the application-level elements are the ones implementing the business rules, and domain models become empty shells carrying data around.
 
<p>These approaches are often presented as a tradeoff-free answer to a very complex problem: how to design software properly. They often imply that good architecture happens as a consequence of using a discrete set of archetypes, which is not only very naive but incredibly misleading for the inexperienced audience. I hope that the alternative I presented here resonates with people looking for more pragmatic alternatives.</p>
  
 Conclusion 
<p>In our experience, this approach with vanilla Rails results in maintainable large Rails applications. As a recent example, we just launched Basecamp 4 built on top of Basecamp 3, the codebase of which is almost 9 years old, includes 400 controllers and 500 models, and serves millions of users every day. I don’t know if our approach would work at Shopify scale, but I am sure it would for most businesses using Rails out there.</p>
<p>Our approach reflects one of the Rails’ doctrine pillars: No one paradigm. I love architectural patterns, but a recurring problem in our industry is that people get very dogmatic when translating those into code. I think the reason is that simple strict recipes are very appealing when tackling a problem as complex as software development. 37signals’ code is the best I’ve seen in my career, and I say that as a spectator since I haven’t written most of it. In particular, it is the best incarnation of DDD principles I’ve seen, even if it doesn’t use most of its building blocks.</p>
<p>So if you abandoned the vanilla Rails path and now you are wondering if you really need those additional boilerplate classes whenever you need to handle some screen interaction, be sure that there is an alternative path that won’t compromise the maintainability of your application. It won’t prevent you from having to know how to write software — no alternative will — but it might bring you back to happy territory again.</p>
  
<p>Thanks to Jeffrey Hardy for his valuable feedback as I wrote this article. He’s one of the main contributors to this approach of architecting vanilla Rails applications I’ve come to learn and love.</p>
                
              
            </div></div>


<h2>Content from: https://www.shivamchahar.com/posts/rails-7.1-adds-responsive-images</h2>
<div><div>
<p>Rails 7.1 has added support for picture_tag. It is useful if we want to add responsive images to our rails app.</p>
 Before 
<p>Before, If we wanted to add an image to our app, we would use image_tag which supports resolution switching but misses out on art direction, and fallback image.</p>
 After 
<p>In Rails 7.1, we can use picture_tag for responsive images. picture_tag supports:</p>
 
Resolution switching
Art Direction
Fallback Image
 
 Usage 
 Basic 
<div>&lt;%= picture_tag("image.webp") %&gt;
</div>
<p>Which will generate the following HTML markup:</p>
<div>&lt;picture&gt;
  &lt;img src="image.webp" /&gt;
&lt;/picture&gt;
</div>
 Art Direction 
<div>&lt;%= picture_tag(
    "image-large.jpg",
    sources: [
      { srcset: "image-square.jpg", media: "(max-width: 600px)" },
      { srcset: "image-rectangle.jpg", media: "(max-width: 1023px)" },
      { srcset: "image-large.jpg", media: "(min-width: 1024px)" }
    ])
%&gt;
</div>
<p>Generates:</p>
<div>&lt;picture&gt;
  &lt;source media="(max-width: 600px)" srcset="image-square.jpg"&gt;
  &lt;source media="(max-width: 1023px)" srcset="image-rectangle.jpg"&gt;
  &lt;source media="(min-width: 1024px)" srcset="image-large.jpg"&gt;
  &lt;img src="image-large.jpg"&gt;
&lt;/picture&gt;
</div>
 Block 
<p>Full control via block:</p>
<div>&lt;%= picture_tag do %&gt;
  &lt;%= tag(:source, srcset: image_path("image.webp")) %&gt;
  &lt;%= tag(:source, srcset: image_path("image.png")) %&gt;
  &lt;%= image_tag("image.png") %&gt;
&lt;% end %&gt;
</div>
<p>Generates:</p>
<div>&lt;picture&gt;
  &lt;source srcset="image.webp" /&gt;
  &lt;source srcset="image.png" /&gt;
  &lt;img src="image.png" /&gt;
&lt;/picture&gt;
</div>
 References 
</div></div>


<h2>Content from: https://monn.app/blog/deploying-ruby-on-rails-on-render-with-databse-redis-sidekiq-cron</h2>
<div><div>
 
In this article, I'm going to show you how to deploy a Ruby on Rails app to Render, including a PostgreSQL database, Redis, Sidekiq, and Cron jobs. If you've never heard of Render, it's a great new-age Heroku alternative.
There are other articles covering some of this stuff, including the official Render docs, but they don't cover everything. In particular, the Render docs didn't cover Cron jobs, which I think are vital.
 
Table of Contents<p>Today, I wanted to share my experience setting up a decently complex Ruby on Rails app on Render. This experience came from deploying a previous side project called MONN.</p>
<p>Heres a screenshot of the final Render dashboard —</p>
The final Render.com dashboard after deploying our Rails app, a PostgreSQL databse, Redis, Sidekiq, and a Cron job.<p>Even though Render does have a guide on deploying Rails with a database, Redis, and Sidekiq, the guide doesn't cover how to set up Cron jobs to trigger Sidekiq tasks.</p>
<p>Leaving out Cron jobs is a pretty glaring ommission! Heaps of projects use them for triggering regular jobs (email sending, db cleanups, data syncing etc.), and they pair well with Sidekiq to accomplish this in a Ruby on Rails app.</p>
<p>So, in this blog post, I'll walk you through my journey of deploying a Rails app on Render with a database, Redis for caching and background jobs, Sidekiq for background job processing, and Cron jobs for running scheduled tasks.</p>
<p>Let's dive in!</p>
 
The render.yaml Blueprint 
<p>The key to deploying my app on Render was to use a render.yaml file. This file serves as a blueprint for the entire application deployment, defining all the services and settings required.</p>
<p>After an hours or two of experimenting and tweaking, here's the full render.yaml file that I came up with:</p>
<div>
databases:
  - name: monndb
    databaseName: monndb
    user: monn
services:
  
  - type: redis
    name: sidekiq-redis
    ipAllowList: [] 
    plan: free 
    maxmemoryPolicy: noeviction
  
  - type: cron
    name: update_all_and_ping
    env: ruby
    schedule: '*/5 * * * *'
    buildCommand: 'bundle install; bundle exec rake assets:precompile; bundle exec rake assets:clean;'
    startCommand: rake refresh_api_data:update_all_and_ping --trace
    envVars:
      
      - key: DATABASE_URL
        fromDatabase:
          name: monndb
          property: connectionString
      - key: RAILS_MASTER_KEY
        sync: false
      - key: REDIS_URL 
        fromService:
          type: redis
          name: sidekiq-redis
          property: connectionString
  
  - type: worker
    name: sidekiq-worker
    env: ruby
    buildCommand: bundle install
    startCommand: bundle exec sidekiq -C config/sidekiq.yml
    envVars:
      
      - key: DATABASE_URL
        fromDatabase:
          name: monndb
          property: connectionString
      - key: RAILS_MASTER_KEY
        sync: false
      - key: REDIS_URL 
        fromService:
          type: redis
          name: sidekiq-redis
          property: connectionString
  
  - type: web
    name: monn
    env: ruby
    buildCommand: './bin/render-build.sh'
    startCommand: 'bundle exec puma -C config/puma.rb -t 5:5 -p ${PORT:-3000} -e ${RACK_ENV:-development}'
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: monndb
          property: connectionString
      - key: RAILS_MASTER_KEY
        sync: false
      - key: REDIS_URL 
        fromService:
          type: redis
          name: sidekiq-redis
          property: connectionString
</div>
<p>Now let me break it down for you and explain each of the five services that we initialize — a PostgreSQL database, Redis, a Cron Job, Sidekiq, and the main Ruby on Rails app.</p>
 
1. PostgreSQL Database 
<p>First, I set up a PostgreSQL database for my Rails application. I specified the name, database name, and user like so:</p>
<div>databases:
  - name: monndb
    databaseName: monndb
    user: monn
</div>
<p>This tells Render to create a PostgreSQL database named monndb, with a user called monn.</p>
 
2. Redis 
<p>Next, I needed a Redis instance for caching and background jobs. I created a new Redis service and set some basic configurations:</p>
<div>services:
  
  - type: redis
    name: sidekiq-redis
    ipAllowList: [] 
    plan: free 
    maxmemoryPolicy: noeviction
</div>
<p>I defined a Redis service named sidekiq-redis, allowing only internal connections from other Render services. I chose a free plan for my Redis instance — perfect for small applications — and set the maxmemoryPolicy to noeviction so that no keys would be removed if the Redis instance became full.</p>
 
3. Cron Jobs 
<p>One thing I couldn't find in Render's guide was how to set up Cron jobs to trigger my background jobs. So here's what I came up with:</p>
<div>
- type: cron
  name: update_all_and_ping
  env: ruby
  schedule: '*/5 * * * *'
  buildCommand: 'bundle install; bundle exec rake assets:precompile; bundle exec rake assets:clean;'
  startCommand: rake refresh_api_data:update_all_and_ping --trace
  envVars:
    
    - key: DATABASE_URL
      fromDatabase:
        name: monndb
        property: connectionString
    - key: RAILS_MASTER_KEY
      sync: false
    - key: REDIS_URL 
      fromService:
        type: redis
        name: sidekiq-redis
        property: connectionString
</div>
<p>I set up a Cron service with a schedule of */5 * * * * — this is crontab syntax for run every 5 minutes. So every 5 minutes, the job will run and trigger the following command - rake refresh_api_data:update_all_and_ping --trace.</p>
<p>In my case, it was important to pass in the DATABASE_URL, so that the job could interact with the database. I also passed in the REDIS_URL because my Rails app used Hotwire and Turbo frames to live update the frontend, so the job needed to be able to broadcast it's results to the frontend (which is handled by Redis).</p>
  
<p>I provided the necessary build and start commands to install dependencies and run the Rake task.</p>
<p>After that, Render took care of triggering this Rake task at the specified schedule.</p>
 
4. Sidekiq worker 
<p>As my app relies on Sidekiq for background job execution, I had to set up a Sidekiq worker:</p>
<div>
- type: worker
  name: sidekiq-worker
  env: ruby
  buildCommand: bundle install
  startCommand: bundle exec sidekiq -C config/sidekiq.yml
      envVars:
      
      - key: DATABASE_URL
        fromDatabase:
          name: monndb
          property: connectionString
      - key: RAILS_MASTER_KEY
        sync: false
      - key: REDIS_URL 
        fromService:
          type: redis
          name: sidekiq-redis
          property: connectionString
</div>
<p>My side project used Sidekiq for running a few different background jobs. The main ones were for syncing data with cloud APIs, pinging remote services, and sending emails with ActionMailer.</p>
<p>I created a worker service named sidekiq-worker, using the Ruby environment. The start command included a reference to my Sidekiq configuration file.</p>
<p>For the ENV, I made sure to pass in the REDIS_URL so that Sidekiq could read jobs from the Redis queue.</p>
<p>Render spun up the worker and took care of running the Sidekiq process.</p>
 
5. Rails Application 
<p>Lastly, it was time to set up my main Rails application service:</p>
<div>
- type: web
  name: monn
  env: ruby
  buildCommand: './bin/render-build.sh'
  startCommand: 'bundle exec puma -C config/puma.rb -t 5:5 -p ${PORT:-3000} -e ${RACK_ENV:-development}'
  envVars: ...
</div>
<p>I defined a web service named monn, utilizing the Ruby environment.</p>
<p>I provided the build and start commands to install dependencies, precompile assets, and run the main Puma web server.</p>
<p>The build command references the standard build script that Render recommends for a Rails app —</p>
<div>#!/usr/bin/env bash
set -o errexit
bundle install
bundle exec rake assets:precompile
bundle exec rake assets:clean
bundle exec rake db:migrate
</div>
<p>When we deploy our app to Render, we just have to remember to add our RAILS_MASTER_KEY, so that we can decrypt our Rails Credentials file.</p>
 
Conclusion 
<p>So there you have it! Using Render and a render.yaml file, I was able to successfully deploy the Rails app with a database, Redis caching, Sidekiq background job processing, and Cron tasks for scheduling.</p>
<p>It turned out to be a fun and rewarding experience, and I hope my story helps you deploy your own Rails app with ease.</p>
<p>Happy coding!</p>
</div></div>


<h2>Content from: https://rbates.dev/railscasts-retrospective-part-1-the-fuel</h2>
<div><div>
<p>Sixteen years ago to the day, I started RailsCasts, a screencast series teaching web development using Ruby on Rails. It began with free weekly episodes and eventually grew to make over $1M a year, but it wasn't sustainable. This is the first of a three-part series where I share what happened to RailsCasts.</p>
 An Aging App 
<p>In 2005 the PHP app I was developing started to show its age. Any change to the backend logic threatened to break multiple pages. It was the website for Artbeats, a stock footage company my dad started in 1989.</p>
<p>While hunting for a solution, I came across Ruby on the C2 Wiki where many developers sang its praise. I attempted to build a templating system in Ruby without much success when a new web framework caught my eye: Ruby on Rails.</p>
 A New Framework 
<p>I ran the rails command to create a new app and was immediately put off. "What are all of these files it generated?" At the time I wanted a flexible framework that allowed me to structure the code my way. I spent the first week fighting Rails to make it fit my style of development.</p>
<p>A tradeshow was approaching, and I needed to develop a minimal version of the Artbeats site for kiosk stations around the booth. I decided to give Rails another shot, but this time follow the Rails way of development.</p>
<p>Everything clicked. In two months the kiosk app was done, and I had a better understanding of how Rails was intended to be used. Convention over configuration is the "secret sauce" of Rails. The framework will do a lot for you if you stick to its defaults and principles.</p>
 Fueling Up 
<p>The Ruby community was kind and welcoming to the influx of web developers coming to learn this new framework. This sentiment stems from Matz, the creator of the language. A common expression in the community is MINASWAN: Matz is nice and so we are nice. This was the type of group I wanted to be a part of.</p>
<p>I found a home on the Rails Forum, initially to ask for help understanding Rails, and later to help others do the same. Every morning I spent an hour or two researching solutions to other's problems. The best way for me to learn was to teach, and I learned a lot.</p>
<p>I also enjoyed learning through screencasts. PeepCode by Geoffrey Grosenbach offered high-quality screencasts that were over an hour long. They were filled with useful information, but I found it difficult to sit through and grasp the concepts in the longer format.</p>
<p>Another screencast series that inspired me was Photoshop Killer Tips by Matt Kloskowski. These were free, bite-sized 2-5 minute episodes that were released frequently.</p>
<p>I wished someone would make screencasts that were developer-focused like PeepCode in the shorter format of Photoshop Killer Tips. So I did.</p>
 Starting Small 
<p>I started by applying principles I learned from agile software development: do the simplest thing that could possibly work, get feedback, and iterate on that.</p>
<p>I bought a $10 microphone and recorded a few rough screencasts to share on the Rails Forum. This helped me gauge interest to see what others thought without too much investment. There I also asked for ideas on what to call the series. "Railscasts" someone suggested.</p>
<p>I reached out to Geoffrey Grosenbach who was kind enough to sponsor the show through PeepCode. I then built a simple Rails app to host the screencasts, and within a month, on March 5, 2007, the first episode was released.</p>
 A Spark 
<p>Fueled by what I had learned helping others on the Rails Forum, and my own experience as a developer, I had seemingly endless ideas to record. But I wasn't sure if what I had released so far was hitting the mark. I was missing the feedback cycle mentioned earlier. Was anyone even watching?</p>
<p>At the end of one episode I requested the audience review RailsCasts on iTunes. To my surprise, the next morning I woke up to dozens of positive reviews. This sparked me to pursue screencasting further and turn it into more than just a hobby.</p>
<p>I invested in a better microphone and set up a small recording "studio" in a closet because it was the quietest place in the house.</p>
<p>(I don't recommend working in a closet)</p>
 An Episode Every Week 
<p>Sticking to the format of Photoshop Killer Tips, my original intention was to produce 3 episodes per week at 2-5 minutes each. However, programming is not as visual, and it can be difficult to explain complex topics in only a few minutes. As the episodes grew longer, I decided to reduce the frequency to one episode per week with the sweet spot being around 10 minutes long.</p>
<p>This is when I hit my stride. I released an episode every week like clockwork. My goal was to make a series that one could anticipate and depend on. I kept this up for years to come without missing a single Monday.</p>
 Priming the Pump 
<p>While I didn't realize it at the time, an important part of the initial success was mentioning RailsCasts in my signature on the Rails Forum. This simple act turned all of my previous posts into mini promotions. Many of the first viewers found their way by googling a Rails issue, stumbling across my post, and then clicking the link in the signature.</p>
<p>Once word got out, it spread quickly throughout the community. It turns out I wasn't the only one wanting short, frequent screencasts covering Ruby on Rails. The series was a hit, but I wasn't prepared for how far it would go.</p>
<p>Continue reading Part 2: The Fire.</p>
</div></div>


<h2>Content from: https://twitter.com/strzibnyj/status/1635265344318365696</h2>
<div><div>
      
       JavaScript is not available. 
      <p>We’ve detected that JavaScript is disabled in this browser. Please enable JavaScript or switch to a supported browser to continue using twitter.com. You can see a list of supported browsers in our Help Center.</p>
      <p>Help Center</p>
    
</div></div>


Error downloading or parsing https://fly.io/ruby-dispatch/health-checks/](https://fly.io/ruby-dispatch/health-checks/): bad URI(is not URI?): "https://fly.io/ruby-dispatch/health-checks/](https://fly.io/ruby-dispatch/health-checks/)"


<h2>Content from: https://rubyonrails.org/2023/2/20/amanda-perino-is-our-executive-director</h2>
<div><p>
         Monday, February 20, 2023 
         Amanda Perino is our new executive director for The Rails Foundation 
         Posted by The Rails Foundation 
      </p><div>
        <p>Since announcing the formation of The Rails Foundation in November, we’ve been busy finalizing all the formalities of incorporation, and running a diligent search for the foundation’s executive director. We’re thrilled to announce that all those formalities have now been handled, and that we’ve found our executive director! Please welcome Amanda Perino to the job of leading our mission to improve the documentation, education, marketing, and events in the Rails ecosystem.</p>
<p>Amanda joins us after spending years at HashiCorp as a senior manager for events and experiential marketing. Previous to that, she spent twelve years in marketing roles across several industries. In her career, she’s organized conferences, led marketing efforts, commissioned film productions, and managed social media campaigns. She has led many efforts that line up exactly with the skills she’ll need in the role as executive director of the Rails Foundation. On top of all that, she’s a recent graduate of a Rails bootcamp! Just perfect.</p>
<p>We asked Amanda to share a few words about the opportunity: “Long before I worked in tech, I first heard about the concept of ‘community’ by those who used the term specifically in relation to the Ruby on Rails community. Now, years later, I am excited to devote my time to helping support and grow that same community. I look forward to discovering ways to strengthen the Ruby on Rails ecosystem so that those who rely on it can continue to do so for decades to come.”.</p>
<p>With everything in place to start work on our actual mission, we hope to soon have news to share about the first official Rails conference to be organized by the foundation this year. We also look forward to commissioning work on documentation, education, and ramp up the general marketing for Rails with additional social media engagement and more.</p>
<p>We are excited to welcome Amanda. We have a lot of work to do, and we can’t wait to get started.</p>
<p>If you have ideas or feedback for the foundation’s work, you can reach out to amanda@rubyonrails.org.</p>
<p>The Rails Foundation receives its core funding from Cookpad, Doximity, Fleetio, GitHub, Intercom, Procore, Shopify, and 37signals. See further details on the foundation page.</p>
      </div></div>


<h2>Content from: https://evilmartians.com/chronicles/gemfile-of-dreams-libraries-we-use-to-build-rails-apps</h2>
<div><div>
<div><p>From time immemorial, the Evil Martians team has worked on dozens of Ruby on Rails projects every year. Naturally, this process involves a lot of Ruby gems. Some reflect our desire to be cutting-edge and to use modern tools (or build our own!) Other gems are so flexible they’ve been used in most of our projects. Our development philosophies, programming habits, and soul are within this universe of Martian gems. So what would it look like if they were somehow able to converge into one gemfile—the ideal Martian Gemfile, the toolbox of the extraterrestrial Rails engineer?</p></div>
<p>The Rails ecosystem is quite vast. For (pretty much) every typical task, there are a number of libraries waiting to help you. How can we pick the right one for the job? We could rely on some specific metrics, like GitHub stars or the number of downloads (see The Ruby Toolbox for valuable insights). Or, we could draw from past experience: this approach works well but could lead to extreme conservatism.</p>
<p>At Evil Martians, we bet on our collective experience and alien instinct when choosing a gem or deciding to build a new one. The benefit of this collective experience is that it spans dozens of minds and years: we know which wins to repeat and which fails to avoid. While we cannot turn this knowledge into a super-smart chatty AI (yet), we can share a glimpse of it in this post.</p>
Here, “alien instinct” is nothing more than a framework for evaluating new library quality. Without prior experience, we can only rely on static code properties (API, architecture) and less on popularity metrics. The Gem Check project is a particular implementation of such a framework.
<p>The rest of the article is structured to resemble a Rails application Gemfile, and it contains the following sections:</p>
 Rails fundamentals 
<p>To begin, we need to configure the fundamental elements of a Rails web application: a web server and a database.  
For our database, we’ll bet on PostgreSQL, while Puma will be our web server of choice. So, the beginning of our Gemfile looks like this:</p>
gem 'rails', '~&gt; 7.0.4'
gem 'pg'
gem 'puma'
<p>There’s not much to add here, so let’s move on to the third pillar of Ruby on Rails applications: the background jobs engine.</p>
 Background jobs 
<p>The vital characteristic of web application performance is throughput (how many requests we can handle in a given time). Due to Ruby (MRI) concurrency limitations, more precisely Global Virtual Machine Lock (GVL), the number of requests that can be served in parallel is capped. To increase the throughput, we try hard to minimize request time; the best way to achieve this is by offloading as much work as possible to background execution. That’s where a background jobs processing engine comes into play.</p>
<p>Rails provides an abstraction, Active Job, to define background jobs. But it’s up to users to choose a specific processor implementation. No surprises here—we use Sidekiq:</p>
<p>There are plenty of Sidekiq add-ons (including official Pro and Enterprise versions) which give you better control over background job execution logic. Let me share two of the most frequently used within Martian projects:</p>
gem 'sidekiq-grouping'
gem 'sidekiq-limit_fetch'
<p>The sidekiq-grouping gem allows you to buffer enqueued jobs and process them in batches. This is helpful when the enqueue rate is high, but you don’t need jobs to be instantly processed. A typical use case is re-indexing models, or broadcasting live updates to models.</p>
<p>To keep hard-working (and RAM-bloating) jobs under control, we use sidekiq-limit_fetch. For example, to avoid generating more than a single large XSLX export at a time, we configure a limit for the queue:</p>
---
:queues:
  - default
  
  - exports
:process_limits:
  exports: 1
<p>To finish up this section, let me also mention some gems beyond Sidekiq:</p>
<p>For recurrent jobs, we use a lightweight solution called Schked. It’s a wrapper over the well-known rufus-scheduler with some useful additional features, such as testing support and Rails Engines awareness.</p>
gem 'faktory_worker_ruby'
<p>Finally, in multi-language projects, we use Faktory to enqueue and process jobs from different services. For example, an ML service written in Python can send analysis results to a Rails application, and vice versa: a Rails app can send analysis requests to a Python app.</p>
 Active Record extensions 
<p>As you can see from the section title, we do not “derail” from the Rails Way: we use Active Record to model business logic and communicate with a database.</p>
<p>Active Record is the most feature-rich Rails sub-framework, and its API is growing with every Rails release (we’ll even get Common Table Expressions support in Rails 7.1!) However, there’s still room for even more features, so we’ll add a bunch of plugins to make that happen.</p>
<p>Since we specialize in PostgreSQL, we use its specific features heavily. My personal favorite is JSONB. When used reasonably, it can give you a huge productivity boost (no need to worry about schema, migrations, and so on.) By default, Rails converts JSONB values to plain Ruby hashes, which are not so powerful in terms of modeling business logic. That’s why we usually back our unstructured fields using one of the following libraries:</p>
gem 'store_attribute'
gem 'store_model'
<p>The store_attribute gem extends the built-in Active Record store_accessor feature and adds type-casting support. Accordingly, your JSONB values can be treated as regular attributes.</p>
<p>Store Model goes further and allows you to define model classes backed by JSON attributes.</p>
Want to learn more about PostgreSQL enums and the benefits from using them? Check out this blog post by Justin Searls from Test Double.
<p>The other database features (not PostgreSQL, but SQL specific) from our Top-5 list are views, triggers, full-text search, and enum types. Here are the corresponding gems:</p>
gem 'activerecord-postgres_enum'
gem 'pg_search'
gem 'postgresql_cursor'
gem 'fx'
gem 'scenic'
gem 'pg_trunk'
<p>By the way, PostgreSQL enums support is coming to Rails: (part 1 has been merged, part 2 is just waiting for its time to come).</p>
<p>Speaking of feature-like extensions, I’d like to mention just a couple of them:</p>
gem 'discard'
gem 'groupdate'
<p>Discard provides a minimalistic soft-deletion functionality (with no default_scope attached). Being minimalistic makes it easy to customize to your needs, that’s why this gem is present in most applications where we softly delete data.</p>
<p>Groupdate is a must-have if you deal with time-aggregated reporting (and still haven’t migrated to a time-series database, like, say, TimescaleDB).</p>
 Authentication and authorization 
<p>Most of the applications I’ve worked on in the past five years have had this line in their Gemfile:</p>
<p>And I’d bet that nine out of ten readers have Devise in their bundles, too; this is just the current reality. (But, nevertheless, I want to dream.) In a less common situation, when building a Rails application from scratch, we always consider alternative authentication libraries first. And the leader is… drumroll… Rails itself! You can go pretty far with the has_secure_password feature.</p>
<p>And there are a couple more candidates before giving up and falling back to Devise:</p>
gem 'sorcery'
gem 'jwt_sessions'
<p>Sorcery has been around for years. It’s less magical (despite stating the opposite in its README) and opinionated than Devise, and has a pluggable architecture (so you can easily pick the parts you need).</p>
<p>The JWT Sessions library provides everything you need to build token-based authentication. It’s perfect for building API-only Rails apps with mobile or SPA frontends.</p>
<p>Let’s skip the whole category of OAuth-driven authentication solutions (this question deserves its own post) and switch to authorization.</p>
<p>Wait, what? Isn’t that the same thing? Not at all. The fundamental difference comes down to the questions we’re answering. Authentication answers “Who’s there?”, while authorization answers “Am I allowed to do that?“. Thus, authorization deals with roles and permissions.</p>
<p>Authorization itself could be split into two components: an authorization model and authorization (enforcement) layer. The former represents the business logic behind permissions (whether you use roles, granular permissions, or whatever). The latter one, the authorization layer, defines how to apply the authorization rules.</p>
<p>An authorization model is too application-specific, while for implementing an authorization layer, we can use generic techniques (wrapped into gems). Historically, we’ve used Pundit to implement authorization enforcement, but today we have a better option:</p>
<p>Action Policy is Pundit on steroids. It uses the same concepts (policies) but provides more out-of-the-box features (performance and is developer-experience oriented.)</p>
 HTML views 
<p>The classic Rails Way assumes an HTML-first approach. A server is responsible for each part of the Model-View-Controller paradigm: that is, the “M”, the “V”, and the “C”. After the dark ages of API-only Rails apps, we’ve recently witnessed a renaissance of the HTML-over-the-wire approach in the Rails community. So, here we are, crafting view templates again!</p>
<p>However, in the 2020s, the way to do that is different as the toolbox:</p>
gem 'view_component'
gem 'view_component-contrib'
gem 'lookbook', require: false
gem 'turbo-rails'
<p>Hotwire makes our HTML-based applications interactive and reactive, while view components help us organize the templates and their logic.</p>
 Asset management 
<p>Dealing with assets in Rails has become tricky since the introduction of Webpacker in Rails 5. Today, in Rails 7, we have multiple official solutions to the problem (Import Maps, JS/CSS bundling gems). On Mars, however, we go another way:</p>
<p>Using Vite is a middle ground between backend-oriented and frontend-oriented assets management. It’s simple to use for both Hotwire applications and React SPAs (and we often have hybrid setups). Further, the vite_ruby gem provides a five-star developer experience.</p>
<p>And here are a couple more assets-related goodies to add to our file:</p>
gem 'imgproxy'
gem 'premailer-rails'
<p>Do you have to deal with a lot of user-generated content? Don’t waste your Ruby server resources for image transformations—let a dedicated proxy server do the hard work. Obviously, we use our own imgproxy, and with the companion gem, using it in Rails apps is a piece of cake.</p>
<p>When it comes to styling emails, the premailer-rails gem is truly a gem of a gem. Use your CSS classes freely and let Premailer unwrap them into style attributes during email template rendering.</p>
 Crafting APIs (and GraphQL) 
<p>Even though the HTML-over-the-wire approach is gaining back its popularity, years of JS domination won’t be so easily undone. And so, API-first Rails applications don’t seem like they’re going anywhere.</p>
<p>When crafting JSON APIs, we usually use the following tools:</p>
gem 'alba'
gem 'oj'
gem 'panko_serializer'
<p>Both Alba and Panko focus on data serialization performance and provide familiar (Active Model Serializer-like) interfaces. Panko is the fastest serialization library (due to its use of a C extension) amongst the currently maintained and closer resembles active_model_serializers API (so it’s a good candidate for migration). On the other hand, Alba is more feature-rich and pretty fast, too (when using Oj as a JSON serialization driver).</p>
<p>However, in practice, we more frequently build GraphQL APIs, and here are the relevant gems:</p>
gem 'graphql', '~&gt; 2.0.0'
gem 'graphql-connections'
gem 'graphql-fragment_cache'
gem 'graphql-persisted_queries'
gem 'action_policy-graphql', '~&gt; 0.3'
gem 'graphql-schema_comparator', group: :development
gem 'ar_lazy_preload'
You can read more about GraphQL persisted queries and fragment caching on our blog.
<p>Most of the GraphQL libraries we use are performance-oriented (and Martian built …coincidence?) The graphql-schema_comparator gem is used along with Danger to warn pull request reviewers about schema modifications (so they can pay proper attention to the change.)</p>
<p>You may ask why we added the ar_lazy_preload gem to the GraphQL group. Despite being an Active Record extension, this library is especially handy in conjunction with GraphQL APIs, where classic N+1 busters like #preload and #eager_load are not so efficient. With lazy preload, we can avoid both performance regressions and any complexity overhead from using data loaders or batch loaders (although not completely, of course).</p>
 Logging and instrumentation 
<p>The production group of our mythical Gemfile contains logging and monitoring tools:</p>
group :production do
  gem 'yabeda-sidekiq', require: false
  gem 'yabeda-puma-plugin', require: false
  gem 'lograge'
end
<p>Yabeda is an instrumentation framework for Ruby and Rails apps. It comes with plugins for popular libraries (like Sidekiq and Puma) and monitoring backends (Prometheus, DataDog, etc.).</p>
<p>Lograge turns verbose Rails output into concise structured logs, which can be parsed by log collection systems and turned into queryable data sources.</p>
<p>Let’s move from production to development—our actual work as engineers. Ruby is designed for developer happiness, but to make developing applications with Ruby follow through with this principle, we need to tweak our dev tools a bit. What makes a Rails developer really happy? Having zero trouble with the development environment 🙂 Docker solves this problem well enough. What else? Doing less boring work. So, we’ll add robots to help us with that so we can focus on cool things. Or, we add gems to make our developer experience more pleasant and help us write better code.</p>
<p>Below we list popular development tools used by Martians in Rails projects.</p>
gem 'bootsnap', require: false
<p>Bootsnap is a part of the Rails default bundle, so no introduction is required. Just use it!</p>
gem 'database_validations'
gem 'database_consistency'
<p>This pair of gems, database_validations and database_consistency, helps you to enforce the consistency between your model layer and the database schema. If it’s null: false, then it must have validates :foo, presence: true. If it validates :bar, uniqueness: true then a unique index should be defined for the column(-s).</p>
gem 'isolator'
gem 'after_commit_everywhere'
<p>Since we usually run on a transactional database, we should always remember about ACID. Database transactions are not the same as logical transactions, non-database side-effects are not protected by the database, and we should take care of them ourselves. For example, sending a “Post published” email from within a database transaction could result in a false positive notification in case the transaction would fail to commit. Similarly, performing an API request could lead to inconsistency in the third-party system (e.g., a payment gateway) in case of a rollbacked transaction. Isolator helps to identify such problems and after_commit_everywhere provides a convenient API to perform side-effects on successful COMMIT.</p>
<p>More database-related goodies with short annotations:</p>
gem 'strong_migrations'
gem 'rails-pg-extras'
gem 'evil-seed'
<p>Benchmarking and profiling is a part of the development process; here are some of the gems to help with it:</p>
gem 'derailed_benchmarks'
gem 'rack-mini-profiler'
gem 'stackprof'
<p>Speaking of Stackprof, we can’t help but mention an awesome stack profiling reports viewer—Speedscope.</p>
gem 'bundler-audit', require: false
gem 'brakeman', require: false
<p>Security is a must. Check for any known CVEs in your dependencies by running bundle audit and scan your codebase for security breaches regularly with Brakeman. Nowadays, CI services provide their own security analysis tools which can be used instead.</p>
gem 'danger', require: false
<p>Danger can level up your code review experience by automating routine tasks and highlighting important changes: automatically attach labels, warn about missing tests or undesired structure.sql changes—delegate pretty much whatever you want to automation scripts.</p>
<p>Upgrading Rails? The next_rails gem can guide you through the process.</p>
gem 'attractor'
gem 'coverband'
<p>Keeping codebases in a healthy state requires us to perform regular check-ups and monitor the parts of your code that are hurting the most. You can use static analysis, for example, the famous churn/complexity technique to identify the components worth refactoring. There are plenty of tools for that, but our choice is Attractor. Production coverage (via Coverband) provides a different perspective on which code is more important (and thus requires more attention during refactoring); it also identifies any dead code to be eliminated.</p>
<p>Here’s the final chord in this little symphony:</p>
eval_gemfile 'gemfiles/rubocop.gemfile'
gem 'standard'
gem 'rubocop-rspec'
gem 'rubocop-rails'
<p>You can learn more about our RuboCop-ing approach in the corresponding post: RuboCoping with legacy: Bring your Ruby code up to Standard.</p>
<p>Writing and running tests is also a part of everyday development, but it should still be treated with a personal touch. A highly advanced testing culture is one of the most significant benefits of building applications with Ruby and Rails.</p>
<p>Let’s start with the basics:</p>
gem 'rspec-rails'
gem 'factory_bot'
<p>Yes, we are RSpec fans, and we prefer factories (via FactoryBot ) over fixtures (but not exclusively). Let’s leave a heated discussion on Minitest vs. RSpec and Factories vs. fixtures for another day and continue with paradigm-agnostic libraries.</p>
gem 'cuprite'
gem 'site_prism'
Read more about how we tame browser tests in Rails in the “System of a test” series.
<p>Crafting fast and robust system tests (or browser tests) is a combination of modern tooling to control the browser (Cuprite) and an object-oriented approach to describing scenarios (via site_prism’s page objects).</p>
<p>The with_model gem is one of our favorites. I first discovered it many years ago when I was looking for a better way to test Rails model concerns. The library allows you to create temporary models backed by temporary database tables to test modules, Rails concerns, and any code implementing a shared behavior.</p>
<p>The N+1 queries problem is one of the most frequent issues with Rails applications: it’s so easy to introduce it, and there are some tools to detect it, but not to prevent it (except the recent .strict_loading Active Record feature). With n_plus_one_control gem, you can write tests to protect yourself from introducing N+1 queries in the future.</p>
<p>Tests should never access the outer world. My rule of thumb is as simple as this: a test suite is only good if I can run it while being on a plane and it passes. Simply dropping WebMock.disable_net_connect! to a rails_helper.rb or test_helper.rb can help you to avoid dependency on real network calls.</p>
<p>Network calls (and time, too) could also cause your tests to have flakiness:</p>
<p>One elegant way to prevent time-dependent tests is to run them in a random time zone. The zonebie gem does this by just being included in the bundle.</p>
<p>Note that we haven’t included the famous Timecop gem to control time: that’s because it’s redundant for Rails apps. Instead, you can use built-in time helpers.</p>
gem 'rspec-instafail', require: false
gem 'fuubar', require: false
<p>A couple of goodies for RSpec users: Fuubar is a progress bar formatter (why isn’t it the default?), and the rspec-instafail formatter is useful when running tests on CI (so you can see any errors right away and start fixing them before the entire test suite has finished).</p>
<p>And last, but not least, our final ingredient to our Gemfile’s test group:</p>
<p>TestProf is a “good doctor for slow Rails test suites”. It doesn’t matter if you have hundreds or dozens of thousands of tests, it’s always worth it to make them run faster. And with TestProf, you can drastically improve test run time with little effort.</p>
 Everything else 
<p>It’s basically impossible to describe all the awesome libraries we use in just a single blog post; so we picked a handful of bonus libraries to share here:</p>
gem 'anycable-rails'
gem 'feature_toggles'
gem 'redlock'
gem 'anyway_config'
gem 'retriable'
gem 'dry-initializer'
gem 'dry-monads'
gem 'dry-effects'
<p>Each one of the above answers a particular question:</p>
 
Want to build some real-time features? AnyCable is the key.
Need to quickly introduce feature toggling? There is a minimalistic solution for that: feature_toggles.
Looking for a distributed locking mechanism? Redis works great for that, and redlock is the way to go.
Want to keep application configuration under control? Consider using configuration classes via Anyway Config.
Tired of writing retry logic by hand? Take a look at retriable.
Service objects a mess? Consider standardizing them with a sprinkle of dry-rb. For instance, declarative parameters from dry-initializer and/or Result objects from dry-monads (they work especially well with pattern matching).
Want to move the context around abstraction layers in a safer and predictable way? Try algebraic effects via the dry-effects library.
 
<p>I could go on and on with questions and answers like this, but I don’t want to be too pushy. Every engineer has their own ideal tool belt; try and build your own! Use other kits as a reference—not a source of truth.</p>
 Only in dreams 
<p>On that note, this is a good place to snap back to reality. Hopefully, you have some conception of what the “ideal” Martian Gemfile might look like, and with any luck, you’ve got some inspiration to dream a little on your own, too.</p>
<div></div>
<p>Evil Martians can help with your project and product design needs. So whether it’s the Rails project of your dreams (or something beyond) if you have a web or mobile application in need of expert problem solving with product design, frontend, backend, or software reliability, we’re ready! Or are you looking to get your project off the ground and into reality? Reach out to us!</p>
<div></div>
 Changelog 
 1.0.1 (2023-01-20) 
 
Replace redis-mutex with redlock (because even the author suggests this)
 
</div></div>


<h2>Content from: https://shopify.engineering/ruby-rails-year-in-review-2022</h2>
<div><div>
  <p>Hi everyone! How are you doing? It's me, Aaron (some people know me on the internet as Tenderlove)! I hope you're doing well. ❤️</p>
<p>Since we're coming up on the end of the year, I thought it might be a good idea to take a moment to reflect on cool stuff that's happened or is happening in the Ruby community right now. Actually, it wasn't my idea, one of my coworkers suggested I should write a blog post about cool stuff that's been happening, and I agreed it was a good idea. 😆</p>
<p>It’s no secret that Shopify loves Ruby—we even have a team (I’m on it!) specifically dedicated to improving Ruby and Rails for everyone. So let’s go over a few things that have been happening this year in the Ruby and Rails world, in and out of Shopify, then see if I can make some predictions about next year!</p>
 YJIT on ARM 
<p>The first thing I'd like to highlight is YJIT coming to the ARM platform. Over the past year  the YJIT team rewrote the compiler in Rust. A JIT compiler is a pretty complicated piece of software and the C implementation was getting unwieldy, so they decided to rewrite the compiler in Rust! The Rust port is much more maintainable, and of course the new compiler generates better and faster machine code than the old compiler.</p>
<p>However, the speed benefit isn't the thing I want to highlight here. In addition to generating faster code, YJIT also gained the ability to generate machine code for ARM machines. Not only does this mean you can run YJIT on ARM machines in production, but you can also run it on your Apple Silicon computers! To me, this is really exciting because it means that we can potentially speed up development environments, and we also don't have to special case production environments. In other words, ruby --yjit will work in development as well as production!</p>
 Variable Width Allocation is Default 
<p>In Ruby 3.1 and older (though I'm not actually sure how old), objects occupied a fixed width size of 40 bytes. Ruby uses an optimization on objects where references to instance variables are stored inside the object itself. Due to the way objects are laid out in memory, this means that Ruby could store up to three instance variable references “in-line” with the object itself. Any more references would require allocating an extra buffer and writing references to that extra buffer. The issue is that this extra buffer could be located in memory far away from where the original Ruby object was allocated, meaning that whenever Ruby had to look up an instance variable it would have to go to system memory rather than hitting one of the CPU caches.</p>
<p>The  Variable Width Allocation project aimed to fix this problem and also move the codebase away from the idea that Objects can be one specific width. When an object is allocated with more instance variables than can fit in a particular slot, the system “learns” this fact, and adjusts accordingly. Subsequent instances of the same object will be allocated from a pool where the slot size is wide enough to accommodate the number of instance variables required from the last allocation.</p>
<p>For example:</p>
<p>The first Foo instance can't fit in the slot where it was allocated, but the system “learns”, and the second instance will be wider than the first instance. This allows us to embed all instance variables in the object and improve data locality in the system.</p>
 Object Shapes 
<p> Object shapes is an optimization technique that's been added for Ruby 3.2. If this project is working well, then hopefully you won't notice it's there at all. 🤣</p>
<p>This project adds a “shape” to all objects in the system. The shape represents properties about the object, and the order in which the properties were set. Each time an instance variable is set on an object, it changes the object's shape. The id of the shape can then be used as a cache key for inline caches. The really cool thing about this technique is that the cache key is independent of the class of the object. Any object that sets the same instance variables in the same order can benefit from the shape. This is especially useful in cases where there are many subclasses of some other class (I'm looking at you Active Record!)</p>
<p>For example:</p>
<p>Ruby “remembers” where an instance variable should be written inside an inline cache. I don't want to get too into details, but before the Object Shapes project, the cache key was based on the class of the object. That means that even though @a = 1 is executed for both instances A and B , the cache key wouldn't hit because self had a different class. Since Object Shapes don't care about the class, only the properties and their order, that means this code can now hit on inline caches.</p>
<p>This technique is popular  in JavaScript implementations, and now we have it in Ruby as well!</p>
 Ruby LSP 
<p>I am  so  excited about this project.  Ruby LSP is an LSP server for Ruby. Just like the name says! 🤣</p>
<p>If you haven't played around with LSP servers, I really encourage it. They help with things like formatting your code, looking up documentation, jumping to function declarations, syntax highlighting, etc. Ruby LSP provides this type of functionality for Ruby and Rails applications. We've been working very hard on this project so that it will work well for developers at Shopify, and I hope that it will work well for everyone in the community as well! (If not, please let us know!!!)</p>
<p>If you check the  supported features page, each of the supported features has a gif that demonstrates that particular feature. For example,  the Formatting link shows an example of Ruby LSP fixing the formatting of Ruby code inside VSCode.</p>
<p>I am so excited about this project because I think it will be a boon for Ruby and Rails development productivity. There's nothing I love more than getting done with my job more quickly! 😆</p>
 Error Highlight 
<p> Error Highlight is a gem that was originally written by Yusuke Endoh (also known as Mame, pronounced as “mah may”). When exceptions occurred in Ruby programs, the error output would show a stack trace that included line information, and sometimes there would be a “did you mean?” message as well.</p>
<p>Error Highlight enhances the error messaging even further and provides column information and ascii art showing you exactly where in the code the exception occurred.</p>
<p>For example:</p>
<p>Error Highlight provided the ^^^^^ ASCII art in the error message pointing out exactly where the error occurred. Maybe this example isn't too impressive, but have you ever written code to extract data from many levels of nested hashes from JSON data? I have. And whenever I mess up the hash key it's very hard to figure out which one is broken.</p>
<p>Take the following code for example:</p>
<p>There’s a typo in the extract method, but it might be hard to see. With older versions of Ruby, the output would look like this:</p>
<p>With newer versions (3.1+) the output looks like this:</p>
<p>Now you can see exactly where the error occurred. This functionality isn't new this year, but what  is  new is that Yusuke was able to  incorporate this information into Rails error pages.</p>
<p>Now if you get an exception while developing your Rails application, you'll be able to see exactly where the error occurred right on the error page! It's so cool!!!</p>
 My Predictions 
<p>Alright. We've made it to the predictions portion of the presentation, or the PPP for short. I have some ideas for predictions, but to be honest it's more of a wishlist.</p>
<p>Half of the projects I Error Highlighted (get it?) were performance and Ruby internals related, and the other half were about developer productivity. I think that Ruby performance is going to get better year over year, but that's not the thing I want to predict (I mean I guess it's technically a prediction since I think it will happen, but I don't have any proof!) I really want to talk about developer productivity and ergonomics. I think that the developer community, and programming languages as a whole are going through a revolution with regard to programmer ergonomics. We used to think that stack traces were good enough to debug our programs, but today that is no longer good enough. Today having good error messages, editor integration, and documentation are table stakes for any programming language.</p>
<p>As a language that is optimized for “Developer Happiness”, I think that Ruby and Rails are in a unique situation to provide even easier ways to work, better development environments, and more flexible ways to express your thoughts as code.</p>
<p>My prediction (read: hope) for next year is that our languages, frameworks, and development environments will become more interconnected.</p>
<p>They'll provide us with better suggestions, more help, and better context about our code. That way we can spend less time coding, and more time problem solving.</p>
<p>Thanks everyone! I hope you all have a wonderful and safe holiday season and a happy New Year!</p>
<p>Love,</p>
<p>Aaron 😘</p>
 More Ruby and Rails Stories from 2022 
<div>
<p>Aaron Patterson is a Senior Staff Engineer on Shopify’s Ruby and Rails Infrastructure team, and Ruby on Rails Core Team member. On the internet, you may know him as Tenderlove. You can connect with him on GitHub and Mastodon.</p>
</div>
<p>Open source software plays a vital and integral part at Shopify. If being a part of an Engineering organization that’s committed to the support and stewardship of open source software sounds exciting to you, visit our Engineering career page to find out about our open positions and learn about Digital by Design.</p>
</div></div>


<h2>Content from: https://www.bootrails.com/blog/ruby-multiline-string</h2>
<div><div>&#13;
&#13;
		&#13;
		
<p>We will explore multiple scenarios where the display of a simple String in Ruby on multiple lines could be useful.</p>
 What is a multiline string ? 
<p>A multiline string is a string that, when displayed, returns the output in more than one line.</p>
message = "Hello!
This is my first multiline string."
p message
# =&gt; Hello!
# =&gt; This is my first multiline string.
<p>With Ruby, there are different ways to create multiline strings. In this article, we will go over the main methodologies and highlight their functionalities. But before that, there are two things that are relevant when writing multiline strings.</p>
 The two main aspects to consider before writing a multiline string 
<p>You might consider these two aspects before choosing the methodology to write a multiline string:</p>
 
If you want to include or exclude the blank spaces before each line (in your code). Note that this also includes indentation.
If you need to interpolate variables within your string.
 
 Single and double quotes 
<p>The most common way of writing strings with more than one line is by using either single quotes or double quotes. The characteristics of this method are:</p>
 
Single quotes do not allow interpolation, while double quotes do.
It preserves any blank spaces at the beginning of each line.
If your string includes quotes as part of its content, make sure to use the opposite quotes to encapsulate your string.
You can create line breaks in your code even if you write in one line by using \n.
 
name = "Christian"
message = "Hello #{name},\nHow are you?
       Note the blank spaces here."
p message
# =&gt; Hello Christian,
# =&gt; How are you?
# =&gt;      Note the blank spaces here.
 Multiple lines with HEREDOC 
<p>Heredoc is a particular syntax that relies on a delimiting identifier to write multiline strings. The identifier is used at the beginning (after &lt;&lt;) and the end of the string, and it can be any word/character in capital letters. Normally, and as best practice, developers use the words HEREDOC, TEXT or EOF. When using Heredoc notation, please consider that:</p>
 
It allows interpolation.
It keeps blank spaces and indentations at the beginning of each line. But if you wish to ignore indentation, you can do so by using the special character ~ after &lt;&lt;.
 
name = "Marie"
message = &lt;&lt;TEXT
    Hi, #{name}!
      How are you?
TEXT
p message
# =&gt;     Hi, Marie!
# =&gt;       How are you?
<p>Now using ~:</p>
name = "Marie"
message = &lt;&lt;~TEXT
  Hi, #{name}!
  What's up?
  TEXT
p message
# =&gt; Hi, Marie!
# =&gt; What's up?
<p>Note that indentation is also ignored on the last delimiter, TEXT. If you need to ignore indentation just in that line, you can use - instead of ~.</p>
 Multiple lines thanks to the percent sign (%) 
<p>Finally, the last method to create strings with more than one line is by using % notation. It has several forms, but the most common syntax is %q(YOUR_STRING). The characteristics of this method are:</p>
 
%qdoes not allow interpolation, but %Q does.
It keeps indentations and blank spaces.
 
string = %q(This is the longest
loooooongest string
    I have ever written
)
p string
# =&gt; This is the longest
# =&gt; loooooongest string
# =&gt;    I have ever written
 Summary 
<p>We have summed up the different ways to create multiline strings with Ruby. Knowing the characteristics of each method, should help you understand when to use each option to write efficient and readable code. Remember to check other entries that will help you write efficient Ruby code!</p>
<p>On a final note, keep in mind that when defining hashes and arrays we can use strings, and that also includes multiline strings!</p>
&#13;
		&#13;
		&#13;
			</div></div>


Error downloading or parsing https://www.rubycademy.com/cards/hash-and-fib: 404 Not Found


<h2>Content from: https://www.fastruby.io/blog/case-study/soundcloud-upgrades-monolithic-ruby-and-rails-system.html</h2>
<div><div>
      <p>SoundCloud is the world’s largest music and audio platform. With a diverse creator community, the platform is renowned for its unique content and features, including the ability for artists to share music and connect directly with fans.</p>
 Background 
<p>Founded in 2007, SoundCloud is the world’s largest music and audio platform. With a diverse creator community, the platform is renowned for its unique content and features, including the ability for artists to share music and connect directly with fans. SoundCloud, headquartered in Berlin and with locations worldwide, is used by music and audio creators to share and monetize their content with a global audience, as well as to receive detailed stats and feedback from the community.</p>
 Here was our challenge: 
<p>Jake Maizel, VP of Infrastructure Engineering, is responsible for ensuring the integrity of the IT systems within SoundCloud. From data centers and cloud relationships to internal systems and the runtime environment, Jake and his team support the company’s equipment, services, networking, and operational security, among other things.</p>
<p>As part of the continual improvement process, a decision was made to update an internal portion of their application to enhance security and modernize the code.</p>
 
  “We developed our original application in 2008 in Ruby on Rails, but it was a monolithic system. Over the last several years, we weren’t able to upgrade the application, install security patches, or the dependency code around it because of potential business risks,” said Jake. “Security and privacy were our main concerns, and our goals were to upgrade to a supported version and then move to the most current version of Ruby and Rails.”
 
<p>SoundCloud’s IT team is focused on bringing value in the form of features for its users and didn’t have the time or capacity to tackle the upgrade. Jake decided to seek outside help and reached out to us. After a few technical conversations, we were brought on board to upgrade the application. “I was impressed with the depth of technical knowledge at OmbuLabs,” said Jake. “Their engagement model had an independent approach which fit exactly what we were looking for.”</p>
<p>Our challenge was to seamlessly upgrade the company’s brittle and outdated Ruby and Rails versions while ensuring there would be zero disruptions to internal business processes. Operationally, there was a significant time zone difference between Berlin and the U.S. East Coast, which required careful balancing and coordination in the project management process.</p>
 Here’s how we solved it: 
<p>The project involved two phases, beginning with an initial four-week engagement. The first priority was to upgrade the application to fully supported software versions and install security patches. We met with the SoundCloud team, gathered insights into the code base, and gleaned valuable intel for each step in the upgrade curve. Then, we provided a written roadmap to guide the implementation process.</p>
 
  “The roadmap was invaluable and provided key thinking on how the project would be executed,” noted Jake. “We knew ahead of time what resources on our side would be required, how much time the project would take, the impact on production, and how it would be tested.”
 
<p>Once it was determined that the security patches were up to date, the next step was to upgrade Ruby and Rails to more modern versions.</p>
 
  “I was impressed with the depth of technical knowledge at OmbuLabs. Their engagement model had an independent approach which fit exactly what we were looking for.
 
<p>Weekly face-to-face meetings were scheduled over Zoom to share knowledge, exchange information, and answer questions about upcoming activities during high-bandwidth and low-latency discussions. We also created a Slack channel to manage the day-to-day activities, including requests for PR (pull request) review, and used GitHub for code review.</p>
 
  “The project management and communication were very efficient and effective despite the time zone difference,” said Jake. “We were able to balance the longer-term, deeper discussions with the day-to-day needs of asking and answering questions.”
 
 See the results: 
<p>Within eight months, both phases were successfully completed with zero disruptions or outages during the rollout process. “It was a big lift moving from Ruby version 1.9 to 2.5 and Rails from 2.3 to 6.1,” noted Jake. “A small percentage of users had a few hiccups, but it wasn’t anything significant, and that was pretty impressive considering the scale of changes that were being made.”</p>
 As a result of the upgrade, there were a multitude of benefits, including: 
 
  Airtight security and privacy with up-to-date patches and versions
  Increased memory capacity by 25%
  More efficient use of resources, fewer application servers required
  Lower costs for cloud and on-premises infrastructure
  Reduced start-up time impact
  Easier to scale up or down
  Improved CPU speed and heightened Kubernetes performance
 
 
  “Everything is extremely stable now,” said Jake. “I never hear about any problems, which is the complete opposite of how it used to be, and this is incredible.”
 
<p>The engineering team was ecstatic about the upgrade, as they knew the value of moving to a modern version from a security perspective. Potential risks melted away and the development process became much easier in a modern environment.</p>
 
  “When we launched, there were a lot of thumbs up. We had talked about doing this for a long time, and to finally get it done was a big deal. I’m happy we made the investment and were able to reach our target,” said Jake.
 
 Project type: 
 
  Ruby and Rails upgrades
  Security patch installation
 
 Built using: 
 
  Ruby on Rails
  Timeline: 8 months
 
<p>Want to build something amazing with OmbuLabs? Check out our one-week Design Sprint service 
              opens a new window
            ! We can take you from idea to prototype in 5 days. 🚀</p>
    </div></div>


<h2>Content from: https://noti.st/palkan/MeBUVe</h2>
<div><div>
        <p>Building realtime applications with Rails has become a no-brainer since Action Cable came around. With Hotwire, we don’t even need to leave the comfort zone of HTML and controllers to introduce live updates to a Rails app. Realtime-ification in every house!</p>
<p>Switching to realtime hides many pitfalls you’d better learn beforehand. How to broadcast personalized data? How not to miss updates during connection losses? Who’s online? Does it scale?</p>
<p>Let me dig into these problems and demonstrate how to resolve them for Action Cable and Hotwire.</p>
    </div></div>


<h2>Content from: https://blog.arkency.com/how-i-migrated-a-rails-app-from-webpack-to-esbuild-and-got-smaller-and-faster-js-builds/</h2>
<div><div>
      <p>In the last week, I have been responsible for migrating a pretty big (300k+ lines of JS code) project from Webpack 4 to esbuild. In our Rails project, we were using Webpacker to integrate our JS stack with the main application. For the last months, we were struggling with very long builds and also were locked into Webpack 4 as Webpacker became a deprecated library. When a few Webpack 4 dependencies received their CVE, we decided it was time to switch to some other bundler.</p>
<p>After short investigation, we decided to use esbuild to prepare our JS entries. And as time has passed and we have finally said goodbye to IE 11, there was also an opportunity to improve the stack by switching to ECMAScript modules - almost 95% of web users can understand them and there is no point in not using them today. And few years after we looked at our JS stack for the last time, it turned out that we don’t need Babel and some polyfills anymore as most features we are using are already built in modern browsers.</p>
<p>In this post, I am describing and discussing the current configuration of our JavaScript setup.</p>
 esbuild configuration 
<p>Our current esbuild options look like this:</p>
<div>const glob = require("glob");
const esbuild = require("esbuild");
const {lessLoader} = require("esbuild-plugin-less");
const isProduction = ["production", "staging"].includes(
  process.env.WEBPACK_ENV
);
const config = {
  entryPoints: glob.sync("app/javascript/packs/*.js"),
  bundle: true,
  assetNames: "[name]-[hash].digested",
  chunkNames: "[name]-[hash].digested",
  logLevel: "info",
  outdir: "app/assets/builds",
  publicPath: `${process.env.CDN_HOST ?? ""}/assets`,
  plugins: [lessLoader({javascriptEnabled: true})],
  tsconfig: "tsconfig.json",
  format: "esm",
  splitting: true,
  inject: ["./react-shim.js"],
  mainFields: ["browser", "module", "main"],
  loader: {
    ".js": "jsx",
    ".locale.json": "file",
    ".json": "json",
    ".png": "file",
    ".jpeg": "file",
    ".jpg": "file",
    ".svg": "file",
  },
  define: {
    global: "window",
    RAILS_ENV: JSON.stringify(process.env.RAILS_ENV || "development"),
    VERSION: JSON.stringify(process.env.IMAGE_TAG || "beta"),
    COMMITHASH: JSON.stringify(process.env.GIT_COMMIT || ""),
  },
  incremental: process.argv.includes("--watch"),
  sourcemap: true,
  minify: isProduction,
  metafile: true,
  target: ["safari12", "ios12", "chrome92", "firefox88"],
};
</div>
<p>Let’s start from entryPoints list - as we were using Webpacker, we had a pretty standard location for our entries (packs) - app/javascript/packs. I didn’t want to list all entries that we were creating (and remember to add any new entries manually) so I used the glob package to generate the list of all files matching the given pattern. This way I can add any new entries to app/javascript/packs directory and they will be automatically built on the next run. We do want to inline all imported dependencies into created entries so we’re using bundle: true setting.</p>
<p>The next two settings: assetNames and chunkNames are set to properly handle the asset pipeline managed by sprockets and prevent digesting chunks and assets twice. Note the -[hash].digested part - this is required in order not to digest generated files once again in sprockets. Without these settings, all dynamic imports or imports of files handled by the file loader won’t work after the assets compilation.</p>
<p>As we’re building more than one entry, the outdir property is needed. It’s set to app/assets/builds so that we can integrate it with the Rails asset pipeline later.</p>
<p>In most of tutorials I found, the publicPath was set to assets. But this setting won’t work properly when splitting option is enabled - imported chunks will have a relative path so they won’t work on most pages. This will also not work with any CDN. We’re prepending the publicPath with the CDN host set by the env variable so that we don’t need to serve assets through the Rails app server (CDN_HOST is equal to config.asset_host value).</p>
<p>We are using one plugin for LESS support - we’re going to move all CSS out of the JS stack, but not all stylesheets have been moved out yet and some of them are using LESS. This plugin will be removed soon.</p>
<p>With Webpacker, we were using a resolve alias. It allowed us to not use relative paths in imports, we could use import foo from "~/foo" instead. esbuild doesn’t support such aliases by default, but it has support for tsconfig.json files. The tsconfig option allows specifying the path for the tsconfig.json file. This works also when you’re not using TypeScript in your application. Our tsconfig.json file looks like this:</p>
<div>{
  "compilerOptions": {
    "target": "es6",
    "baseUrl": ".",
    "paths": {
      "~/*": [
        "./app/javascript/src/*"
      ]
    }
  },
  "include": [
    "app/javascript/src/**/*"
  ],
}
</div>
<p>compilerOptions.path object allows us to preserve imports from Webpacker and resolve the ~/ prefix properly.</p>
<p>The next options (format &amp; splitting) enable ESM format and support for chunk splitting with dynamic imports. As we are using dynamic imports and have multiple lazy-loaded pages in our single-page application, we needed this option to optimize the size of JS files needed for the initial render. To properly handle React components we needed a shim that is injected into every file generated by esbuild (inject option). Our react-shim.js file is very simple and looks like this:</p>
<div>import * as React from "react";
export {React};
</div>
<p>We also needed to change the default mainFields setting as one or two libraries we were using were not exporting code for the browser correctly. That resulted in errors during the build as node packages were not available. You can refer to the mainFields documentation to read more about this.</p>
<p>There is another story with loaders. In our project, we’re using i18next with custom backend to handle i18n. We store translations in JSON files and load them via dynamic imports. To make it work with digested assets we needed to use the file loader so that we can get the digested URL in our i18n init module. But after using just {".json": "file"} loader, it turned out that we started getting other errors from one of our dependencies. After a brief investigation, it turned out that requiring one of our dependencies have a side effect of importing a JSON file. As a result we couldn’t just use the file loader for all JSON files. We ended up with using .locale.json suffix for our translation files and using the file loader only for .locale.json extension while leaving the json loader for .json suffix. We don’t use .jsx extension so we just enabled JSX loader for all .js files and left the file loader for images.</p>
<p>With Webpack, we were using the define plugin to inject env variables into the code. With esbuild, we don’t need any plugins to handle that as there is already a define option to handle that.</p>
<p>The last options are used mostly for development mode or production optimization. The incremental option allows us to speed up rebuilding assets in the development environment. We’re not using the built-in watch setting as it didn’t work with our setup. We decided to use a custom file watcher that is using chokidar package to watch our JS directory and rebuild entries after detecting any changes:</p>
<div>/* ... */
const fs = require("fs");
const config = { /* see above */ };
if (process.argv.includes("--watch")) {
  (async () =&gt; {
    const result = await esbuild.build(config);
    chokidar.watch("./app/javascript/**/*.js").on("all", async (event, path) =&gt; {
      if (event === "change") {
        console.log(`[esbuild] Rebuilding ${path}`);
        console.time("[esbuild] Done");
        await result.rebuild();
        console.timeEnd("[esbuild] Done");
      }
    });
  })();
} else {
  const result = await esbuild.build(config);
  fs.writeFileSync(
    path.join(__dirname, "metafile.json"),
    JSON.stringify(result.metafile)
  );
}
</div>
<p>At the moment we’re generating the source maps in all environments and minifying the code for production environments. The metafile is stored in metafile.json when the file watcher is not used.</p>
<p>The last option: target specifies the target environment for the generated JS code.</p>
<p>We store our esbuild config in the esbuild.config.js file and use the following scripts in our package.json file to build/rebuild all JS files:</p>
<div>{
  "scripts": {
    "build:js": "node esbuild.config.js",
    "watch:js": "node esbuild.config.js --watch",
  }
}
</div>
 Rails integration 
<p>After inspecting jsbundling-rails sources we have decided not to use that library and just add one rake task that is doing the same as that gem. Integrating esbuild with Rails is very easy and the only thing that’s needed is to make sure you add this line to your  app/assets/config/manifest.js file:</p>
<p>You should also enhance a few Rake tasks to make sure your esbuild assets are generated before the asset precompilation. We are using this code to make it work:</p>
<div>namespace :javascript do
  desc "Build your JavaScript bundle"
  task :build do
    system "yarn install" or raise
    system "yarn run build:js" or raise
  end
  desc "Remove JavaScript builds"
  task :clobber do
    rm_rf Dir["app/assets/builds/**/[^.]*.{js,js.map}"], verbose: false
  end
end
Rake::Task["assets:precompile"].enhance(["javascript:build"])
Rake::Task["test:prepare"].enhance(["javascript:build"])
Rake::Task["assets:clobber"].enhance(["javascript:clobber"])
</div>
<p>Now each time you run rails assets:precompile the Yarn package manager will install all dependencies and then build your JS files into app/assets/build. If you want to set the file watcher while developing your app, you can just run yarn run watch:js in your terminal and start your dev server.</p>
 Possible improvements 
<p>This configuration works perfectly for us at the moment and resulted in smaller and faster builds. With Webpack we needed from 6 to 15 minutes to build our assets, depending on the load. With esbuild, we can build minified assets in less than a minute. And it’s even faster in development - the initial build with the file watcher enabled takes less than 5 seconds on my 2019 iMac and rebuilds are even faster. However, there are still some things we are going to improve in the future. When developing your JS files locally, if you change files that are used in many other modules often, the number of files generated in app/assets/builds may grow very fast. That can make your Rails server very slow on the first request. I made an esbuild cleanup plugin to resolve this issue.</p>
<p>Another issue is with the app/assets/builds itself. If you start the watch:js script and there would be any error during the rebuild, esbuild process will be killed but the assets directory won’t be cleaned so your assets will still be served by Rails and you might wonder why you can’t see changes in your modules after refreshing the page. In order to fix this we’ll probably need another process that will manage esbuild process state and restart it or at least send a notification on error. If you know how to resolve this issue, feel free to share your knowledge.</p>
    </div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-67</h2>
<div><div>
Consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody
<p>Support the newsletter for 1.8$/week</p>
<p> You can jump directly to a section:</p>
<p>🚀 New Products &amp; 📅 Events</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>🚀 Harrison Broadbent announced a new project ❯ RAILSG · Ruby on Rails Generator Reference and Command Builder</p>
<p>🚀  Julian Rubisch launched the Article Illustrator Bot</p>
<p>🚀  Modern Rails launched RubyGPT</p>
<p>🕒🚀 [Pre-launch] Cyril Rohr announced they are thinking about building Make that slow test suite fly</p>
<p>🕒🚀 [Pre-launch] Ahmed Nadar shared they are working on a collection of UI ViewComponents for Rails. Follow him to get updates about the project:</p>
<p>📅 Amsterdam Ruby Meetup announced the next meetup in  November Amsterdam Ruby meetup, Tue, Nov 21, 2023, 6:00 PM </p>
<p>📅 Tropical.Rb opened the tickets sales on 9 November and until 12 November they were sold out → Tropical.Rb 2024</p>
<p>👉 nalsh announced the release of Ruby 3.3.0-preview3 and Jean Boussier invited us to test it out:</p>
<p>👉 Aristóteles Coutinho shared a code sample showing how they use pattern matching: </p>
<p>👉 Tagomoris shared about enabling YJIT on Aws Lambda function task and performance improvements: </p>
<p>On the same note: </p>
<p>👉 David Heinemeier Hansson shared a commit merged by Jean Boussier about Enable YJIT by default if running Ruby 3.3+ · rails/rails@c29cda2</p>
<p>👉 Jorge Manrubia shared a code sample about using models validation and render to show form errors: </p>
<p>👉 William Kennedy asked about testing mailers with RSpec: </p>
<p>Here are some replies:</p>
<p>👉 Adrien Poly shared a performance test done for Rubyvideo.dev (take into consideration there are req/min)</p>
<p>👉 Emmanuel Hayford shared a code sample about query constraints: </p>
<p>👉 Jean Boussier shared a performance benchmark of Time.new about merging a PR by Peter Zhu</p>
<p>👉 Xavier Noria shared they are thinking to write a book: </p>
<p>👉 Ruby On Rails shared that Rails has more than 6000 contributors. See the documentary about the beginnings at Ruby on Rails: The Documentary</p>
Support ShortRuby by subscribing for only $7.5/month ($1.8/week). 
Get an ad-free experience and help us maintain our quality for everyone.
<p>Support the newsletter for 1.8$/week</p>
<p>👉  Joel Drapper started a discussion about wanted new features for Ruby:</p>
<p>👉 Robby Russell asked about Heroku alternatives:</p>
<p>Here are some replies: </p>
<p>👉 Craig shared about how defining lambdas with → is called: </p>
<p>👉 Stephen Margheim shared  a code sample from their work in progress Ruby SQLite query builder: </p>
<p>👉 Hasumi Hitoshi shared an .irbrc  configuration Configuring IRBRC to improve the visibility of completion dialog colors</p>
<p>👉 Andrew Mason asked for recommendations of color themes, so if you want to discover a new theme, read the replies (read on nitter):</p>
<p> 👉 James Yorston shared how to enable YJIT on Heroku running ruby 3.2 with yjit · Issue #1362 · heroku/heroku-buildpack-ruby</p>
<p>👉 Vinicius Stock shared the progress of their work on ruby-lsp: </p>
<p>👉 Bhumi shared a code sample about Module#included: </p>
<p>👉 Ruby City Matsueプロジェクト shared that Kevin Newton received the Ruby Prize 2023: </p>
<p>👉 Deepak Mahakale reminded us to run bundle clean: </p>
<p>👉 Prabin Poudel shared about using Rails delegate_missing_to to create a presenter object: </p>
<p>👉 Brad Gessler shared a gist about The Phlex::Element class makes creating simple Phlex components easier</p>
<p>👉 Adrian Valenzuela shared The Smallest Rails App</p>
<p>👉 Vincent Rolea shared a code sample to check if all files are loaded properly:</p>
<p>👉 Donn Felker shared a code sample about batching updates: </p>
<p>👉 EtienneVan Delden De La Haije shared that rails assets:reveal can be used to display a list of assets for projects using propshaft</p>
<p>👉 John Nunemaker shared a code sample showing how to chain expectations on RSpec: </p>
<p>👉 Bhumi shared about using Kernel#binding: </p>
<p>👉 Nick Schwaderer asked about side projects and some nice replies (read on nitter): </p>
<p> 👉 Tomoya Ishida shared that now IRB can be used with type autocompletion: </p>
<p>👉 Andrei Bondarev announced a new discord for Join the Langchain.rb Discord Server!</p>
<p>👉 u/UsuallyMooACow published a long post on /r/rails. Here I include only the first part of it but you should read it all:</p>
<p>I will include here only one reply, but you should read all comments (there are over 240 comments): </p>
<p> 👉 u/to-too-two asked about using Rails for creating a venture:</p>
<p>Here are some projects from the replies:</p>
<p>Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody</p>
<p>Support the newsletter for 1.8$/week</p>
<p>🧰 Ruby language announced the release of Ruby 3.3.0 Preview3</p>
<p>🧰 Ruby On Rails announced a new release for Rails 7.1.2 has been released!</p>
<p>🧰 Hanami announced the release of Hanami 2.1.0.rc2</p>
<p>🧰 Andrei Kaleshka shared actual_db_schema: Keep DB schema clean and consistent between branches while develop a Rails application</p>
<p>🆕 🧰 Dave Kimura announced a new gem called action_auth: ActionAuth is an authentication Rails engine crafted to integrate seamlessly with your Rails application. Optimized for Rails 7.1.0, it employs the most modern authentication techniques and streamlined token reset processes.</p>
<p>🧰 Marc Busqué announced a new version of web_pipe - One-way pipe, composable, rack application builder</p>
<p>🧰 Depfu.Com announced Support for import maps in Rails</p>
<p>🧰 Daniel Doubrovkine announced a new release of grape - An opinionated framework for creating REST-like APIs in Ruby</p>
<p>🧰 Joe Masilotti announce they are working on Upstream Turbo Navigator by joemasilotti · Pull Request #158 · hotwired/turbo-ios </p>
<p>🧰 Mohammad A. Ali announced a new release for litestack</p>
<p>🧰 Mari Imaizumi shared Release v0.4.0 · ruby/reline</p>
<p>🧰 Peter Zhu announced a merged PR to Ruby about Implement embedded TypedData objects by peterzhu2118 · Pull Request #7440</p>
<p>🧰 Jeremy Evans announced a new release of minitest-parallel_fork 2.0.0 Released · jeremyevans minitest-parallel_fork · Discussion #13</p>
<p>🧰 Vinicius Stock announce a new version  Release v0.5.0 · Shopify/vscode-ruby-lsp</p>
<p>🧰 Kevin Newton announced a PR implemented by Tomoya Ishida to IRB  Type based completion using Prism and RBS by tompng · Pull Request #708 · ruby/irb</p>
<p>🧰 Faraaz Ahmad announced a new version of Release v0.3.0 · faraazahmad/tainted</p>
<p>🧰 Mari Imaizumi announced a new version for Release v1.9.0 · ruby/irb</p>
<p>🧰 R7kamura shared a draft PR proposal New matcher idea: `match_pattern` for Ruby's pattern-matching by r7kamura · Pull Request #1436 · rspec/rspec-expectations</p>
<p>🆕 🧰 Ori Marash announced a new gem active_cortex - Easily add AI-generated fields to your Rails models</p>
<p>🤝 Postmodern shared about a faster rebase:</p>
<p>🤝 Naofumi Kagami shared about organising tests:</p>
<p>🤝 Dmytro Krasun shared a trick to make the Chrome driver faster with Puppeteer: </p>
<p>🤝 Kio shared about strange formats for emails: </p>
<p>🤝 Naofumi Kagami shared about code reviews: </p>
<p>🗞 Ruby On Rails published a new edition about YJIT enabled by default, Active Model improvements and much more</p>
<p>🗞 Hotwire Weekly published a new edition about Week 45 - Bridged Strada components, AnyCable goes serverless, and more</p>
<p>🗞 Ruby Weekly published a new edition of Rails: The Movie</p>
<p>🗞 Awesome Ruby Newsletter published an article about Awesome Ruby Newsletter 390</p>
<p>🗞 Sara Jackson published a new edition about This Week In Open Source (November 3, 2023)</p>
<p>🗞 Harrison Broadbent published a new edition of The Rails Notes Newsletter Issue #18</p>
<p>🗞 Ruby Radar published a new edition about Ruby Conf 2023 Is Upon Us! </p>
<p>🎧 Drew Bragg published a new episode of Code and the Coding Coders Who Code it about Episode 30 - Adarsh Pandit</p>
<p>🎧 Carolina Code Conference published a new episode about EP06 - Around the Rails World: Amsterdam, Bucharest, Asheville, and Greenville</p>
<p>🎧 Ruby For All published a new podcast about Bridging Design and Development with Jerimie Lee | Ruby for All | Episode 51</p>
<p>🎧 Remote Ruby published an article about Turbo Morph &amp;Amp; Active Record Encryption With Jorge Manrubia</p>
<p>🎧 Matt Swanson published a new podcast about YAGNI | GraphQL w/ Trevor Turk (Bonus: VCR)</p>
<p>🎧 The Rubber Duck Dev Show published a new podcast about Polling Vs Web Sockets Vs Server Sent Events (SSE)</p>
<p>🎧 The Ruby on Rails Podcast published a new podcast about The Ruby On Rails Podcast Episode 495: Marc Reynolds On Packwerk </p>
<p>🎧 Joël Quenneville and Stephanie Minn published an article about The Bike Shed: 405: Retro: Sandi Metz Rules</p>
<p>🎙️ Ruby Conf TH release the videos from  RubyConf  TH 2023</p>
<p>🎥 Drifting Ruby published a new video about Episode 427 - Detect Spam with AI | Drifting Ruby and about Episode 428 - Form Input UX</p>
<p>🎥 CJ Avilla published an article about Recursively Summarize Blog Posts With Open AI and Jupyter with Ruby and Rails (plus OpenAI function calling)</p>
<p>🎥 Yaroslav Shmarov published a new video about Ruby On Rails #150 Global Search</p>
<p>🎥 Honeypot published a new video about Ruby on Rails: The Documentary</p>
<p>🎥 Thoughtbot published a new video about Rails Development LIVE and about Ruby gem development LIVE: suspenders</p>
<p>🎥 Tim Morgan published a new video about Bytecode Generation | Ruby | Compiler Hacking</p>
<p>🎥 Steven R. Baker published a new video about The Shitshow 5: Build a Multiplayer Game in Ruby on Rails 7.1</p>
<p>🎥 Andrei Bondarev published a new video about Live coding GPTs (see the nitter link)</p>
<p>🎥 Andreas C. published a new video about Kamal Rails 7.1 PostgreSQL Deployment in Under 90 Seconds</p>
<p>Marc Busqué published a new article about  Open Source Status: October 2023 - Syntax: dry-operation vs. do notation</p>
<p>I published a new article about  Ruby Gems Download Trends: An Analysis from 2013 to 2023 and about Explore Chatwoot: Open Source Ruby On Rails Customer Engagement App</p>
<p>Vladimir Dementyev published a new article about The Future Of Full Stack Rails: Turbo Morph Drive</p>
<p>Matt Sears published an article about It’s never been better time to be a full stack Developer</p>
<p>Jonathan Rochkind published an article about Beware Sinatra, Rails 7.1, Rack 3, Resque Bundler Dependency Resolution</p>
<p>Akshay Khot published an article about Interview With Daniela Baron, Staff Engineer At Fund Through</p>
<p>Alkesh Ghorpade published an article about Rails 7.1 Adds An Option To Extract The Sample Rate Of An Audio File</p>
<p>Radan Skoric published an article about Should I Add Typing To My Ruby Project?</p>
<p>Neenu Chacko published an article about Rails 7.1 Adds New Option Path Params For Url For Helper Method</p>
<p>Alain Pannetrat published an article about how they build an Etsy for electronics A Peak Behind The Curtain</p>
<p>Victor Shepelev published an article about “Useless Ruby Sugar”: Keyword Argument And Hash Values Omission</p>
<p>Alex Taylor published an article about Grokking Instance Eval</p>
<p>Stephen Margheim published an article about SQLite Primary Keys</p>
<p>David Copeland published an article about Fan Out Sidekiq Jobs To Manage Large Workloads</p>
<p>Ryan Bigg published an article about Ruby 3, Hashes And Keyword Arguments</p>
<p> Kingsley Silas published an article about How To Organize Your Code Using Rails Concerns</p>
Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:
<p>Support the newsletter for 1.8$/week</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-66</h2>
<div><div>
Consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody
<p>Support the newsletter for 1.8$/week</p>
<p> You can jump directly to a section:</p>
<p>🚀 New Products &amp; 📅 Events</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>🚀  Kevin Newton launched the documentation website for ruby.github.io/prism</p>
<p>🚀 Colleen Schnettler announced the launch of Get Podcast Leads</p>
<p>🚀 Chris Oliver announced the launch of a new learning path: The Ruby on Rails Learning Path</p>
<p>🚀 Andrei Bondarev  invited us to fill in the Ruby AI Survey 2023. I think it will be great to see where we are and what we use for Ruby AI: </p>
<p>📅 Friendly.Rb shared the conference’s after-movie Friendly.rb 2023 - Bucharest and also announced that tickets are on sale for next year's edition on September 18-19, 2024, in Bucharest → Tickets</p>
<p>📅 Helvetic Ruby announced the early-bird tickets are done but if you want to participate there is still time to buy the normal price tickets at helvetic-ruby.ch</p>
<p>📅 Simmon Li announced Toronto Ruby: Refreshed for the 3.0 era</p>
<p>📅  Honeypot announced the release of the Ruby on Rails documentary and Live Q&amp;A. Register here for Q&amp;A link</p>
<p>👉 Jorge Manrubia shared a diff showing some Turbo 8 code: </p>
<p>👉 Emmanuel Hayford shared about dom_id don’t need an instantiated object: </p>
<p>👉 Stephen shared a code sample from the new project they are working on:</p>
<p>👉 David Heinemeier Hansson shared that 37signals website has no build step for CSS:</p>
<p>👉Postmodern asked and proposed a solution about defining static data in sub-class that the super-class will access: </p>
<p>👉 Stephen Margheim shared a code sample of a custom query builder: </p>
<p>👉 Andy Croll asked about approaches to test turbo responses working alongside their regular responses:</p>
<p>Here are some replies:</p>
<p>👉 Postmodern shared about IPAddr object supporting include</p>
<p>👉 Ahmed Nadar shared a tip about renaming to avoid conflicts: </p>
<p>👉 Xavier Noria asked about approaches for handling SQLite in production in Rails: </p>
<p>There is a great conversation going on there that I cannot include here as it will be long screenshots :) You should read all replies (or on nitter) as it is an example of a productive conversation in social media. </p>
<p>👉 Yuta Saito shared the grant results for 2023 Ruby Association Grant</p>
<p>All the selected applications seems very interesting. I specially like the idea of a Ruby Playground: </p>
Support ShortRuby by subscribing for only $7.5/month ($1.8/week). 
Get an ad-free experience and help us maintain our quality for everyone.
<p>Support the newsletter for 1.8$/week</p>
<p>👉 Kuba Suder shared an example of a commit description about fixing an SQLite lock issue: </p>
<p>👉 Paweł Swiątkowski shared a code sample about encrypting attributes when using ROM: </p>
<p>👉 Jason Swett shared that using words like “handle” or “manage” to name functions or classes is a code smell:</p>
<p>👉 Bhumi shared a code sample about Module prepand: </p>
<p>👉 Amree Zaid shared a code sample showing how to install a specific version of Rails: </p>
<p>👉 Naofumi Kagami 加々美直史 shared about why they consider Rails special: </p>
<p>👉 Jean Boussier shared a funny code sample:</p>
<p>👉 Errol Schmidt shared about the size of downloads of Mail gem and that might hint how much impact Rails had in the world: </p>
<p>👉 Andreas C. shared a big list of Kamal commands cheatsheet → Simple list of kamal commands</p>
<p>👉 Nate Hopkins shared about using look-ahead Regular expressions in Neovim to search/replace Ruby constant names: </p>
<p>👉 Evgeniy Demin shared a great example of how helpful Ruby community can be. I invite you to read Source: the conversation in the original thread (or read on nitter) to see an example of a friendly and helpful contribution from Xavier and Robert: </p>
<p>👉 Nate Berkopec shared about where the focus of improving latency should be in a Rails app: </p>
<p>👉 Bhumi shared about Active Support concerns works: </p>
<p>👉 Joel Moss shared a hypothetical code for reactive components in Ruby: </p>
<p>Andrew Cetinic shared as a reply a code sample using Turbo - see the repo at Turbo Component</p>
<p>👉 Andreas C. shared a code sample showing how to add a silencer for /up route: </p>
<p>👉 Noel Rappin shared an update about Programming Ruby 3.2 (5th Edition) - Pragmatic Programmers link and for pre-order printed version Amazon link</p>
<p>👉 Salomón Charabati shared about connecting from a different DB from Rails: </p>
<p>Andrei Maxim replied with a code sample: </p>
<p>👉 Nate Hopkins shared about using a GPT plugin for Neovim: </p>
<p>👉 Greg Navis asked about reasons why people think Rails is a good choice for startups. There are some good replies (read them on nitter) if you want to use them to pitch Rails:</p>
<p>👉 u/aeum3893 asked about becoming a senior Rails developer and there are some good answers there: </p>
<p>👉 Nicolò shared about the preference for using if ! instead of unless</p>
<p>There are quite a lot of replies: </p>
<p>👉 Marian Posăceanu shared a tip about deploying to ARM64 from Apple Sillicon:</p>
<p>Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody</p>
<p>Support the newsletter for 1.8$/week</p>
<p>🧰 Tim Riley announced the release of  Hanami 2.1.0.rc1</p>
<p>🧰 The J Ruby Team announced the release of  JRuby 9.4.5.0 Released</p>
<p>🧰 Mike Perham shared a new feature being merged to Ruby about Feature #10602: Support multithreaded profiling - Ruby master</p>
<p>🧰 Avo announced a new release for Avo 2 and Avo 3 - read Avo Admin for Rails - Release changelog</p>
<p>🆕 🧰 Matt Brictson release a new version of nextgen - Generate your next Rails app interactively!</p>
<p>🆕 🧰 Sven Schwyn announced a new gem dry-credentials: A mixin to use encrypted credentials in your classes</p>
<p>🆕 🧰 Landon Gray announced a new repo called Ruby-ReAct-Agent - An implementation of the ReAct approach to give LLMs access to external tools in ruby</p>
<p>🆕 🧰 Ateş Göral announced a new gem event_stream_parser: A lightweight, fully spec-compliant parser for the event stream format</p>
<p>🆕 🧰 David Backeus announced a new gem actioncable-enhanced-postgresql-adapter: An enhanced ActionCable adapter for PostgreSQL</p>
<p>🆕 🧰 Carl Mercier announced a new gem ultimate_turbo_modal - The ultimate Turbo / Stimulus / Hotwire modal window for Rails</p>
<p>🧰 Mike Dalessio announced a new release  Release 1.6.8 / 2023-11-01 · sparklemotion/sqlite3-ruby</p>
<p>🧰 Kevin Newton announced a new release for Release v0.16.0 · ruby/prism</p>
<p>🧰 Jean Boussier announced a merged PR to Ruby aboiut Make String.new size pools aware. by casperisfine · Pull Request #8825 · ruby/ruby</p>
<p>🧰 Greg Molnar announced a new release for textacular: Textacular exposes full text search capabilities from PostgreSQL, and allows you to declare full text indexes</p>
<p>🧰 Dr Nic Williams announced a new version for searchcraft - Instant Search for Rails and ActiveRecord using SQL materialized views</p>
<p>🧰 Yuichiro Kaneko announced new versions for ruby/racc Release v1.7.2 · ruby/racc and Release v.1.7.3</p>
<p>🧰 Jeremy Evans shared a new release for Sequel 5.74.0 Released · jeremyevans sequel · Discussion #2090</p>
<p>🧰 Stefanni Brasil announced a new release for Release v3.2.2 · faker-ruby/faker</p>
<p>🤝 Xavier Noria shared about what does it mean to finish a task: </p>
<p>🤝  Joe Masilotti shared about using ChatGPT as a co-worker:</p>
<p>🤝 Naofumi Kagami shared about the difference between a library and a framework: </p>
<p>🤝 Flavio shared about using input field to take a picture, video or record your voice on mobile: </p>
<p>🤝 Kent Beck started a discussion about TDD: </p>
<p>🤝 Kent Beck also proposed the idea to remove code reviews: </p>
<p>🤝 Andy Hunt shared also about code reviews proposing a name change:  </p>
<p> 🤝 Chris Wanstrath shared a thread about a moment when they deleted the production DB at Github: </p>
<p>🤝 Nate Hopkins shared about impact being different than busy: </p>
<p>🤝 Jorge Manrubia shared about developer happiness: </p>
<p>🗞 Zzak published a new edition of This Week in Rails about "Insert...Returning" For Maria Db, "Set Constraints" For Postgre SQL, "Deferrable" Foreign Keys For SQLite And Much More!</p>
<p>🗞 Ruby Weekly published a new edition about Ruby Weekly Issue 676: Pattern matching: 'A big feature, after all</p>
<p>🗞 Sara Jackson published a new edition about  This Week in Open Source (October 13, 2023)</p>
<p>🗞 Awesome Ruby Newsletter published a new edition about Issue 389 - Deploying Rails on a single server with Kamal</p>
<p>🗞 Matheus Richard published a new edition about This week in #dev (Oct 20, 2023)</p>
<p>🗞 Hotwire Weekly published a new edition about Week 44 - The Anatomy of Turbo Streams, Strada with Turbo Navigator, and more</p>
<p>🗞 Ruby Radar published a new edition about Happy November!</p>
<p>🗞 Harrison Broadbent published a new edition about The Rails Notes Newsletter Issue #17</p>
<p>🎧 Adrian and Yaroslav published a new episode about E7 October Summary, Brovember Plans</p>
<p>🎧 Jason Swett published a new podcast about 201 - Remote Ruby Co-Host and Sin City Ruby 2024 Speaker Jason Charnes</p>
<p>🎧 Indie Rails published a new podcast about IndieRails | Bram Jetten - Building Spina &amp; PlanGo</p>
<p>🎧 Remote Ruby published a new episode about Live At Rails World 2023</p>
<p>🎧 Ruby for All published a new episode about  The Art Of Conference Speaking With Kevin Murphy</p>
<p>🎧 Lucas Barret published a new podcast about GemRuby Show: Mohammed A. Ali, LiteStack</p>
<p>🎧 The Ruby on Rails Podcast published a new episode about The Ruby On Rails Podcast Episode 494: Rails World Live! Pt 2 With Nick Schwaderer And Rafael França</p>
<p>🎧 Matt Swanson published a new episode from Yagni | Friday Deploys W/ Charity Majors</p>
<p>🎧 The Rails Changelog published a new podcast about #14 Talking PostgreSQL with Andrew Atkinson</p>
<p>🎙️ Montreal.rb published the video from Ruby Talk 2023/10 Elevate Your Ro R Views With View Component &amp; Lookbook Parham Ashraf</p>
<p>🎙️ Anubhav Jain published the video from Bengaluru Ruby Users Meetup Nov 2023</p>
<p>🎙️ Kaigi On Rails published the videos from Kaigi on Rails on YouTube at Kaigi on Rails 2023 (JP)</p>
<p>🎑 Andrey Novikov shared their slides from KaigiOnRails about Rails Executor</p>
<p>🎥 GoRails published a new video series about HTML for Beginners</p>
<p>🎥 Yaroslav Shmarov published a new video about  Rails #148 Data Tables Without Page Refresh Using Hotwire Turbo Frames</p>
<p>🎥 Dean DeHart published a series of videos:</p>
<p>🎥 Drifting Ruby published a new video about Episode 426 - readonly?</p>
<p>🎥 Thoughtbot published a new video about Rails Development LIVE</p>
<p>🎥 Tim Morgan published a new video about Natalie Update: Nov 2023 | Ruby | Compilers</p>
<p>Brad Gessler published an article about SQLite Persistence Canary → “As the world boldly moves towards running SQLite in production, there’s a bit of a problem that looms in today’s container-based production environments: persistence”</p>
<p>I published an article about Zammad Ruby On Rails Open Source → “Zammad is an open-source ticketing system, that also offers an on-cloud product”</p>
<p>Matt Muller at AWS published an article about Announcing The End Of Support For Ruby Runtimes 2.3 And 2.4 for The Aws SDK For Ruby → “Starting November 24, 2023, AWS SDK for Ruby version 3 will no longer support these end of life (EOL) Ruby runtime versions: Ruby 2.3 and Ruby 2.4”</p>
<p>Brooke Kuhlmann published an article about Connascence → “You can’t eradicate coupling entirely but there are multiple ways to significantly reduce the burden. This is why knowing what connascence is and how to reduce it helps produce a robust architecture. This article will give you the vocabulary for deeper thought”</p>
<p>Radan Skoric published an article about Experiment: Fully Adding Sorbet And Rbs To A Small Project → “I used statically typed languages and liked the extra safety but I also really like Ruby for how elegant it is and the freedom it gives me. Will I regret adopting types?”</p>
<p>Vishnu M published an article about Rails 7.1 Comes With An Optimized Default SQLite3 Adapter Connection Configuration → “The default SQLite3 Active Record adapter connection configuration has been updated in Rails 7.1 to better tune it to work for modern Rails applications”</p>
<p>Roy Tomeij published an article about Sponsoring Rails World: What Did It Cost, And Was It Worth It? → “Many individuals, particularly founders of other SaaS platforms built on Rails, have inquired about the cost of our Rails World 2023 sponsorship and its worth. While anyone can estimate our expenses based on publicly available data, we're happy to provide a detailed breakdown”</p>
<p>Sam Ruby published an article about Audience Of One → “This blog post will show you how to build a Rails application that streams fly logs output to the browser”</p>
<p>Donn Felker published a new article about Native Where You Need It (Hybrid Mobile Apps) → “NWYNI refers to the practice of using native mobile components only in areas of your app where they’re essential and optimal. In all other instances, web components (web views) are utilized. AKA: Hybrid Mobile Apps. Part of the app is web, and maybe, parts of it are native mobile, when needed”</p>
<p>Garrit Franke published an article about Tracking Sq Lite Database Changes In Git → “If you want to track changes and updates to a database using Git, you won't be able to see full diffs by default (…) So, is there a way around that? Turns out: there is!”</p>
<p>Dhaval Singh published a new article about Concurrency 101: Getting It Right Using Amdahl's Law → “Some things are always inherently vague, like figuring out the exact amount of salt to put in a dish without a recipe. Setting the concurrency of your app might feel the same way!”</p>
<p>Ahmed Nadar published a new article about A Ruby Serenade for 99 Bottles of Beer → “Today's session isn't about vocal ranges or hitting the perfect pitch, although I'm sure you have a lovely voice and I'd not stop your karaoke party. Instead, we're diving into a melody that echoes through the halls of coding exercises: "99 Bottles of Beer.”</p>
<p>Victor Shepelev continued their series about new Ruby features and published an article about “Useless Ruby Sugar”: Pattern Matching (Pt. 3/3) → “In two previous parts, we looked into Ruby’s pattern matching, introduced through a few recent language versions. We discussed how it was implemented and what problems and possibilities it brought to the language syntax and semantics. Now, let’s put it all into a broader context”</p>
<p>Julian Rubisch  published an article about A Deep Dive Into Lite DB For Ruby On Rails → “In the second post of our series covering LiteStack (an alternative way to build Rails applications entirely based on SQLite), we'll explore the database's concepts of flexible typing and type affinity”</p>
<p>Dhaval Singh published a new article about Understanding Rails Callbacks &amp; Common Pitfalls → “Why you should be careful when using Callbacks in Rails and their hidden gotchas”</p>
<p>Steve Polito published a new article about Are you absolutely sure you know how to use the button element? → “after working on a payment form for a client project, I realized that the &lt;button&gt; element is a robust, versatile and under utilized tool. Plus, knowing how to leverage forms and buttons will benefit you when using Turbo and Stimulus”</p>
<p>Cherry Ramatis published an article about Metaprogramming In Ruby → “This magic is on purpose and a quite special feature of ruby called metaprogramming, in this article we'll see more about the deep nested details of ruby and how to create magic APIs with metaprogramming!”</p>
<p>Peter Zhu published a new article about Rubyist's Walk Along the C-side (Part 11): Debugging → “In this article, we’ll look at the various ways to deal with the inevitable scenario: our C extension crashes”</p>
<p>Matt Brictson published an article about Simplify Your Capybara Selectors → “How to use a Ruby-friendly syntax alternative to esoteric CSS and xpath expressions. Plus, a trick for making Capybara automatically aware of data-testid attributes”</p>
<p>Cezary Kłos published a new article about GraphQL in Ruby on Rails: How to Extend Connections → “To enable pagination, GraphQL utilizes a cursor-based system known as Connections. The specification states that each of the above can be extended with additional fields as the schema designer deems necessary. If you're interested in learning how to do this, continue reading”</p>
<p>Jared Norman published an article about Rails Domain Redirects → “Is your Rails app available at multiple domains, but you only want to serve requests from one of them? Here's how to handle that at the app level”</p>
<p>Arun Dhir published a new article about Simplify Data Filtering in Ruby on Rails with Ransack → “One of the common tasks in web applications is filtering and searching through data. This can be complex and time-consuming to implement from scratch, but luckily, there’s a fantastic gem called Ransack that simplifies this process”</p>
<p>Prasanth Chaduvula published an article about Rails 7.1 Introduces Active Record/Base/Normalization → “Using ActiveRecord::Base::Normalization we can specify unique normalization rules for model attributes. When an attribute is assigned or changed, normalization is applied, and the normalised value is stored in the database”</p>
<p>Alkesh Ghorpade published an article about Rails 7.1 Adds Support For Infinite Ranges For Length Validators → “Rails 7.1 adds support for infinite ranges for LengthValidators. You can pass an infinite range to the in and within options of the LengthValidators” and about Rails 7.1 Expands Its Support For Active Record Asynchronous Queries</p>
<p>Harrison Broadbent published an article about Rails Generate Mailer (Quick Breakdown) → “This is a short and sweet article covering rails generate mailer, the Rails generator for ActionMailer, plus all it's options. I cover it's basic usage to generate an ActionMailer mailer with some mailer methods, then dig into all the flags we can pass”</p>
<p>Daniel Hoelzgen published a new article about Enhancing Video Search &amp; Discovery In A Rails Application By Using Whisper And Chat GPT → “The general idea is simple: We transcribe the videos using Whisper, use GPT to generate summaries of its content, and calculate embeddings we can use for search and discovery”</p>
<p>Josef Strzibny published a new article about Deploying Rails on a single server with Kamal → “Here’s one way of a cloud-independent deployment of Rails, Sidekiq, PostgreSQL, and Redis on single virtual server with Kamal”</p>
<p>kojix2 published an article about Mixing Ffi, Fiddle, And C Extension In Ruby → “If you're working with Ruby and need to invoke a function written in C language, there are some convenient gems available: Ruby-FFI and Fiddle”</p>
<p>Hernan Velasquez published an article about Be Careful When Using Assign Attributes With Has One Relations In Rails 7 → “Recently I was tasked to solve a bug on a feature that allows a user to mass import the relationships of an existing record of a model via a yml file”</p>
<p>Adrian Oprea published a new article about Monolith is the new old fashion</p>
<p>Rachele Di Tullio published a new article about Autocomplete accessibility bookmarklet</p>
<p>Indie Hackers published a new article about Tony Dinh hit $22k in 11 days by decoupling input from output</p>
Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:
<p>Support the newsletter for 1.8$/week</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-65</h2>
<div><div>
Consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody
<p>Support the newsletter for 1.8$/week</p>
<p> You can jump directly to a section:</p>
<p>🚀 New Products &amp; 📅 Events</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>🚀 David Heinemeier Hansson announced Skiff. See the video on twitter or on nitter: </p>
<p>🚀 Jared White launched his new course  Building Courseware I Can Understand: The Launch of CSS Nouveau</p>
<p>📅 Andrew Atkinson shared that 2024 Southeast Ruby in Memphis, TN is back:</p>
<p>📅 Robb Shecter announced they are starting the Denver meetup again and asked us to fill in the survey about day and time and join the meetup </p>
<p>👉 Maxime Chevalier shared their paper about YJIT: a basic block versioning JIT compiler for CRuby is published</p>
<p>👉  Kerri Miller (Parody) asked about the difference between let and subject in RSpec: </p>
<p>Here are some of the answers</p>
<p>👉 Deepak Mahakale shared about using find_each over all when expecting a large dataset: </p>
<p>👉 Jan Dudulski asked about strategies to handle JSON payloads: </p>
<p>Here are some of the possible ways to achieve the same: </p>
<p>👉 Janko Marohnić asked about how to differentiate between default value from DB and user input: </p>
<p>Ariel Juodziukynas proposed the solution: </p>
<p>👉 Bhumi shared about Ruby keywords: </p>
<p>👉 Naofumi Kagami shared about why not have fat controllers: </p>
<p>👉 Dr Nic Williams shared about RBS boolish: </p>
<p>See the section here: </p>
<p>👉 Simon Chiu shared about their gem geetfun/deployed</p>
<p>👉 Robby Russell shared about Rails being the Radiohead of software  read it full at Rails In 2024: Still Relevant Or Living In the Past </p>
<p>If you want to read other people reactions here are some places where this was posted: r/ruby (22 comments), r/programming (339 comments)</p>
<p>👉 Yaroslav Shmarov shared a code sample showing the email regexp validator from Ruby:</p>
<p>👉 Alessandro Rodi showed that when retrying it is important to be aware of caching: </p>
<p>👉 Josh Pigford asked about the simplest way to render a boolean toggle: </p>
<p>Matt Swanson replied:</p>
<p>👉 Panos shared an IRB easter egg: </p>
Support ShortRuby by subscribing for only $7.5/month ($1.8/week). 
Get an ad-free experience and help us maintain our quality for everyone.
<p>Support the newsletter for 1.8$/week</p>
<p>👉 Kevin Glowacz shared how they managed to run Ruby 3.2 on Elastic Beanstalk:</p>
<p>👉 Julian Rubisch shared a new Challenge 14: Stimulus - KeyboardEvent 101 | The Hotwire Club</p>
<p>👉 Emmanuel Hayford shared a tip about changing the DB in Rails: </p>
<p>👉 Andrea Rocca shared they used turbo_boost-commands: Commands to help you build robust reactive applications with Rails &amp; Hotwire</p>
<p>👉 Chris Oliver shared a Ruby tip about choosing to define methods instead of method_missing: </p>
<p>👉 Maxim Gurin shared a security tip about doing symbol to string coercion: </p>
<p>👉 Joel Moss shared about how using Stimulus and Turbo cut the JS lines of code: </p>
<p>👉 Vladimir Dementyev shared a slide they work on about advantages of profiling tests: </p>
<p>Here are some answers: </p>
<p>👉 Nate Hopkins shared a trick for debugging deep app internals: </p>
<p>👉 Joe Masilotti shared a code sample of handling authentication when working with Turbo Native: </p>
<p>👉 Kevin Newton shared that Prism supports JavaScript</p>
<p>👉 Dhaval Singh asked about the order of the after_commit hooks are run: </p>
<p>Petrik De Heus answered and provided a link to a PR about after_commit callbacks run in the wrong order </p>
<p>👉 Matt Swanson shared about adding extra checks in development to catch bugs:</p>
<p>👉 Bhumi shared about &amp; in Ruby:</p>
<p>👉 Yaroslav Shmarov shared about using Postgres for Action Cable (see Action Cable Guides) and he also shared there are some limitations - read this</p>
<p>👉 John Nunemaker shared about using net_http_timeout_errors: Provides a list of Net::HTTP timeout errors</p>
<p>👉 Matt Swanson shared a code sample about writing a test instead of a TODO to remember what to remove when upgrading: </p>
<p>👉 Santanu Bhattacharya shared about using yard stats to show undocumented objects: </p>
<p>👉 I asked about email service with generous free tier: </p>
<p>Here are some of the replies: Postmark, Brevo, AWS SES, SendGrid, Qui, MailPace, Resend, MailerSend, MailGun, MailJet, </p>
<p>👉 Yusuke Endoh shared a slide about TracePointを活用してモデル名変更の負債解消をした話</p>
<p>👉 Georgie Boy shared some performance stats for using Phlex Components:</p>
<p>👉 /u/okizeme asked about salaries for Rails developers and received almost 100 responses: </p>
<p>👉 u/just-for-throwaway asked about the idiomatic way to handle validations (click to read their entire post as it includes more information that what I added here):</p>
<p>Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody</p>
<p>Support the newsletter for 1.8$/week</p>
<p>🆕 🧰 Dr Nic Williams announced a new gem searchcraft - Instant Search for Rails and ActiveRecord using SQL materialized views</p>
<p>🆕 🧰 Joel Moss announced a new gem inspectacular: Custom inspection for your Ruby objects</p>
<p>🆕 🧰  Vladimir Dementyev announced a new gem imgproxy/imgproxy-rails</p>
<p>🆕 🧰 Chad Wilken announced a new gem chadwilken/tiptap-ruby: A library that allows you to generate, parse, and render TipTap documents in Ruby</p>
<p>🆕 🧰 Julián Pinzón announced a new gem called actionview_attribute_builders</p>
<p>🧰 Jake Zimmerman announced a new version of Sorbet that now supports  Methods with Overloaded Signatures · Sorbet</p>
<p>🧰 Alexander Adam shared a gemcrimson-knight/fruit_juice: A simple gem for triggering background jobs in Ruby into Crystal for the Mosquito background processor</p>
<p>🧰 Avo shared an update for Avo 2 and Avo 3</p>
<p>🧰 Glauco Custódio announced a new release for tanakai - Tanakai is a modern web scraping framework written in Ruby. A fork of Kimurai</p>
<p>🧰 Jeremy Evans shared Rodauth 2.32.0 Released · jeremyevans rodauth · Discussion #371</p>
<p>🧰 Gert Jan Peeters announced they made stimulus-lsp work on neovim feat: add stimulus-language-server support by Gert-JanPeeters · Pull Request #2870 · neovim/nvim-lspconfig</p>
<p>🆕 🧰 Faraaz Ahmad announced a new gem tainted: Taint checking for Ruby using data-flow analysis</p>
<p>🧰 Nate Hopkins announced a draft PR for UniversalID gem - Update serialization to use MessagePack</p>
<p> 🧰 Dr Nic Williams shared an announcement from Heroku that pgvector now generally available for Heroku Postgres | Heroku Dev Center</p>
<p>🧰 Benjamín Silva H. talked about chaskiq/plain - Plain is a Rails engine that serves as an Artificial Intelligence (AI) assistant for your Rails project</p>
<p>🧰 Koichi Ito announced a new release of Rubocop Rails → Release RuboCop Rails 2.22.0 · rubocop/rubocop-rails</p>
<p>🧰 Hiroshi Shibata announced a new Release v13.1.0 · ruby/rake. The release changelog is big but here is just a part of it: </p>
<p>🧰 Alex Rudall shared an update for alexrudall/superagi: OpenAI API + Ruby</p>
<p>🤝 Jonathan H. Wage shared performance improvements after using pgbouncer: </p>
<p>🤝  Una Kravets shared that adding a simple &lt;hr&gt; in between options will make an horizontal rule → Select element: now with horizontal rules</p>
<p>🤝 Jeffrey Way shared that MacOS Safari added a new feature to see a website in iOS Simulator: </p>
<p>🤝 Robby Russell asked a question that I think we should ask ourselves everyweek: </p>
<p> 🤝 Jason Swett shared that code is also a tool for thinking and exploration:"</p>
<p>🤝 Nate Hopkins shared that taking time to identify the right primitives and good names will pay in the long run: </p>
<p>🤝 Matt Johansen shared a thread about Okta being hacked: </p>
<p>🗞 Vipul A M published a new edition of This Week in Rails about Reduce Memory Used By Active Support/Callbacks, Non Column Backed Attributes For Enum And More!</p>
<p>🗞 Ruby Weekly published a new edition about How memoization can bend Ruby out of shape</p>
<p>🗞 Awesome Ruby Newsletter published a new edition Awesome Ruby Newsletter Issue 388 - Performance impact of the memoization idiom on modern Ruby</p>
<p>🗞 Sara Jackson published a new edition about This Week In Open Source (October 13, 2023)</p>
<p>🗞 Greg Molnar published a new edition of Rails Tricks about Ruby On Rails Password Validation</p>
<p>🗞 Harrison Broadbent published a new edition of The RailsNotes Newsletter ISSUE #16</p>
<p>🗞 Ruby Radar published a new edition about Ruby AST In The Browser</p>
<p>🗞 Hotwire Weekly published a new edition about Week 43 Stimulus LSP Goes Beyond VSCode And Ruby</p>
<p>🎧 Remote Ruby published a new episode about Dhh On Rails World 2023 Rails 7.1</p>
<p>🎧 The Ruby on Rails Podcast published an article about The Ruby On Rails Podcast Episode 493: Rails World Live! Pt.1 With Nick Schwaderer And Andrew Mason</p>
<p>🎧 Rooftop Ruby Podcast published a new episode about p29: Ruby Central’s Adarsh Pandit And Allison Mc Millan</p>
<p>🎧 Life on Mars published an article about 73 From Rails To Revenue, With Khash Sajadi (Ceo &amp; Co Founder @ Cloud 66)</p>
<p>🎧 Jason Swett published a new podcast about 200 - Saron Yitbarek, Founder of CodeNewbie and RubyConf Keynote Speaker</p>
<p>🎧 Ruby For All published a new podcast about Microservices, Mayhem, and Main Branches | Episode 49</p>
<p>🎙️ Confreaks, Llc published the videos from Rocky Mountain Ruby 2023</p>
<p>🎥 The Rubber Duck Dev Show published a new video about Stack Overflow vs ChatGPT</p>
<p>🎥 Jason Swett published a new podcast about Building a Search Engine Part 1 (Adding a Layer of Abstraction)</p>
<p>🎥 Yaroslav Shmarov published a new video about Rails #147 DataTables - search, sort, pagination with Ransack and Pagy</p>
<p>🎥 Cezar Halmagean published a new video about Build a SaaS with Ruby on Rails 7 - UTM URL Builder</p>
<p>🎥 Dean DeHart published a series of videos:</p>
<p>🎥 Dave Kimura published a new episode about  Episode 425 - Kamal in GitHub Actions and about Using Ansible to Update Kamal Servers</p>
<p>🎥 Steven R. Baker published a new video about The Shitshow 3 (with special guest!): Build a Multiplayer Game in Ruby on Rails 7.1</p>
<p>🎥 Thoughtbot published a new video about Rails Development LIVE</p>
<p>Jean Boussier published an article about Performance Impact Of The Memoization Idiom On Modern Ruby → “One major internal change in Ruby 3.2 was the introduction of object shapes. In this post, we’ll try to cover why they were introduced, how they work, and what their limitations are” and he also published an article about Effects Of Pitchfork Reforking On Shopify’s Monolith</p>
<p>Jorge Manrubia published an article about Exploring Server Side Diffing In Turbo → “We did a lot of exploratory work before coming up with the Turbo improvement we presented in Rails World. One of those experiments included diffing in the server instead of in the client”</p>
<p>Akshay Khot published an article about Akshay’s Blog Is Now Write Software, Well → “After two years and hundreds of thousands of readers, the blog has outgrown my personal domain and needs a new home. Welcome to «Write Software, Well»”</p>
<p>Patrick Helm published an article about My Love Letter To Rails (And Ruby) → “Here's why Ruby on Rails is far from being dead... Honeypot developers are even writing love letters to Rails”</p>
<p>Greg Molnar published an article about Rails Authentication For Compliance → “Suppose you are working on a Rails application that needs to meet specific security compliance requirements like PCI, ISO 27001, or SOC2. In that case, one of the objectives is to have proper authentication and access control”</p>
<p>Alkesh Ghorpade published an article about Rails 7.1 Raises An Error On Generating Model Attributes With Dangerous Name → “Rails 7.1 raises error on generating model attributes with dangerous name. The feature will raise an error if you specify any dangerous attribute when generating a migration” and another article about Rails 7.1 Adds Validation To Enums</p>
<p>Apoorv Tiwari published an article about Limiting Maximum Index Name Length In Ruby On Rails 7.1 → “With the introduction of Rails 7.1, a new 62 byte limit has been specified. If the index name exceeds this limit, it will fallback to a short format, along with a hash that ensures uniqueness”</p>
<p>Vladimir Dementyev published an article about The Future Of Full Stack Rails Ii: Turbo View Transitions → “In the previous post, we introduced the Turbo Music Drive application and enhanced it with DOM morphing techniques to provide a smoother UX. Now, we’ll take it to the next level and add slick animations”</p>
<p>Brad Gessler published a new article about Rails Background Jobs with Fly Machines → “Fly Machines can boot a VM in 500ms, run a Rails background job, then turn off when it’s done. That means you don’t have to pay for a server to sit idle if there’s no jobs to process and you can have a much more scalable pool of on-demand workers when your application starts to get busy”</p>
<p>Victor Shepelev published an article about “Useless Ruby Sugar”: Pattern Matching (Pt. 2) → “With all the good things that I’ve said in the previous article about chosen pattern syntax looking natural, it still stands as a separate syntactic area of the code. This is mostly unusual for Ruby, which, once you get to know it closer, is characterized by a uniformity of semantics”</p>
<p>Noel Rappin published an article about Better Know A Ruby Thing #2: Constants – Noel Rappin Writes Here → “Today: constants. They aren’t actually constant. They aren’t only used for small strings or magic literals. They aren’t even mostly used for that in most Ruby programs. Constants are one of the core pieces of Ruby and they aren’t super-well documented in the official site”</p>
<p>Paweł Strzałkowski published an article about Tetris On Rails → “The story behind Tetris on Rails”</p>
<p>Harrison Broadbent published an article about Action Mailer Attachments In Ruby On Rails → “ActionMailer makes it easy to attach files to your emails. In this article, I show you how to attach single or multiple files, set custom encodings and mime_types, and attach images as inline attachments to display in your email body” and an article about Action Mailer Cc And Bcc Multiple Recipients</p>
<p>Sam Ruby published an article about Accommodating Safari Users  → “When you generate a new Rails app, you are given a choice whether or not you want JavaScript support or to include a CSS framework. The default is to use import maps. What isn’t clear at this time is that there is no documented upgrade path should you change your mind later. In fact, upgrading is difficult as support for things like Turbo, Stimulus, Action Cable and Action Text further lock you into this choice”</p>
<p>Stefan Wienert published an article about Rails 7.1 Migrate from secrets.yml to credentials.enc.yml → “If you have been using the Rails.application.secrets feature, you have been able to ignore the deprecation until Rails 7.1. But now, Secrets is gone! We had been using config/secrets.yml in the past because our deployment script would just replace the file during deployment”</p>
<p> Jeffery Morhous published an article about Factory Bot For Rails Testing → “Dive into FactoryBot to ensure your testing data is reliable and consistent”</p>
<p>Akshay Khot published an article about Base64 Encoding, Explained → “This article covers the basics of Base64 encoding, including what it is, how it works and why it's important. It also shows how to encode and decode Base64 data in various programming languages”</p>
<p>Gelsey Torres published an article about How Action Dispatch/Response#Content Type Changed Between Rails 5.2 To 6.1 → “What happened with ActionDispatch::Response#content_type between Rails 5.2 to 6.1? In this article, we will go into some background to learn what this method does, look at the differences in ActionDispatch::Response#content_type’s return value between the several Rails versions, and how you can fix the problem if you come across it in your codebase”</p>
<p>I published an article about How To Skip All Callbacks For All Models In Rails → “Different approaches for avoiding all callbacks on a Rails Active Record model”</p>
<p>James Garcia published a new article about Binged Watched (almost) a Rails Upgrade → “I watched Chad Pytel and other developers from thoughtbot Upgrading a Rails 3.2 app to Rails 7. Be warned it 17 hours over several videos, but it was well worth the time invested. 🙂 I wanted to share some things that I learned”</p>
Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:
<p>Support the newsletter for 1.8$/week</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-64</h2>
<div><div>
Consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody
<p>Support the newsletter for 1.8$/week</p>
<p> You can jump directly to a section:</p>
<p>🚀 New Products &amp; 📅 Events</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>🚀 Georgie Boy announced a library of components built with Phlex → PhlexUI - Component Library</p>
<p>🚀 Thoughtbot announced an update of the Ruby Science book to work with Rails 7 and Ruby 3.2.2</p>
<p>🚀 Keshav Biswa launched a new programming language for fun called Confuscript</p>
<p>🚀 Dave Paola announced applications for the Agency of Learning are open at agencyoflearning.com</p>
<p>🚀 Ruby Cademy announced they are going to launch RubyCademy on 27 October:</p>
<p>📅 Rubyfuza &amp; Friends shared they will organise a new conference in 2024 in Cape-Town: </p>
<p>📅 Adrian Marin announced the first meetup of Ruby Romania meetup #01, Wed, Nov 22, 2023, 6:30 PM | Meetup</p>
<p>👉Benoit shared  a benchmark between Struct.new VS Data.define</p>
<p>👉 Emmanuel Hayford shared a Rails config to start the rails console in the sandbox by default: </p>
<p>👉 Dhaval Singh shared a good picture showing a high-level overview of how Ruby works: </p>
<p>👉 Joel Drapper shared about how to use ChatGPT to explain code from the book:</p>
<p>👉 Paul Mucur shared about how to get the client IP when using Cloudflare: </p>
<p>👉 Robert shared about bundler supporting an option to use a local gem file: </p>
<p>👉 Lucas Mendelowski shared about how to make Turbo work with View Transitions while keeping the header persistent: </p>
<p>👉 Brad Gessler shared how to generate Dockerfiles for Rails using dockerfile-rails gem: </p>
<p>👉 Joel Drapper shared a code sample from their new web framework Yippee!</p>
<p>👉 Stephen shared a new channel for SQLite on Join the Naming Things Discord Server!</p>
<p>🤝 David Heinemeier Hansson shared about Rails being fit for software entrepreneurship: </p>
Support ShortRuby by subscribing for only $7.5/month ($1.8/week). 
Get an ad-free experience and help us maintain our quality for everyone.
<p>Support the newsletter for 1.8$/week</p>
<p>👉  Irina Nazarova shared a thread (read it on nitter) about Rails world: </p>
<p>👉 Andrew Culver shared how to fix then rbenv install fails with LDFLAGS error: </p>
<p>👉 John Pollard shared a before and after refactoring code sample (the code screenshots are too big to include them here - you have to open the post on twitter or nitter): </p>
<p>👉 Chris Oliver shared that Jumstart Rails now also offers the option to use Stripe Checkout: </p>
<p>👉 Brad Gessler shared a code sample from the Superform showing how to build a UI with Ruby code: </p>
<p>👉 Vladimir Dementyev shared they added view transitions for AnyCable Docs (click on the post or on nitter to see the video of view transitions)</p>
<p>👉 Nate Berkopec shared how quickly a multi-million line Rails monolith starts: </p>
<p>👉 Ernest Anyewe Adonu shared their reasons why they chose Ruby on Rails for a project: </p>
<p>👉 Bram Jetten shared how they are avoiding N+1 queries with a mix of AR and Ruby processing: </p>
<p>👉 Chris Oliver asked the community about what questions they will like to ask DHH and got a lot of replies:  </p>
<p>He also asked for questions for Jorge and Amanda: </p>
<p>I think it is good to read the replies. It shows a bit of some community concerns or questions. </p>
<p>👉 Nate Berkopec shared a quick tip to improve performance: </p>
<p>👉 David Alejandro shared about using local_time gem to display time in local users time: </p>
<p> 👉 John Nunemaker shared a use case for Github Copilot Chat: </p>
<p>👉 Stanislav Katkov shared two improvements when using Solid Cache: </p>
<p>👉 Brad Gessler shared about advantages and disadvantages when using Tailwind: </p>
<p>👉 Rob Zolkos shared they encountered an issue when using Turbo with route paths that contains dots: </p>
<p>Tony Messias explained why it does not work: </p>
<p>Benjamín Silva H. shared a possible solution:</p>
<p>👉 Samuel Cochran shared about reverting from GraphQL and React to Rails:</p>
<p>👉 David Alejandro shared a thread (read it all or on nitter) about printing to local printer from Rails with Turbo (this is just the first part of it): </p>
<p>👉 Lewis Youl shared about Rails mark_for_destruction:</p>
<p>👉 Bhumi shared a Ruby trick about associating a name for a class: </p>
<p>👉 Matt Swanson shared about using Rails core concepts: </p>
<p>👉 Amanda Brooke Perino shared a thread (read on nitter) about the purpose of Rails Foundation:</p>
<p>👉 Brad Gessler shared a perspective about Rails sessions: </p>
<p>👉 Nate Berkopec shared about collecting data with Resource Timing API:</p>
<p>👉 Akash Manohar shared a code sample showing how to load partial data for multiple rows of a table: </p>
<p>👉 Josef Strzibny shared a perspective about how to think about Kamal: </p>
<p>👉 Avo shared the discounted prices for Avo 3 are available until the final launch: </p>
<p>Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody</p>
<p>Support the newsletter for 1.8$/week</p>
<p>🆕 🧰 Simon Chiu announced a new project geetfun/deployed: Mountable deployment engine for Ruby on Rails using Kamal</p>
<p>🧰 Andy Maleh published a new release of Glimmer Wordle:  </p>
<p>🧰 JRuby released a new version of JRuby 9.4.4.0 version </p>
<p>🆕 🧰 Jeffrey Charles announced a new project called Ruvy - Ruvy aims to initialize the ruby VM using wizer and execute ruby code passed into the wasm</p>
<p> 🧰 Cédric Delalande  announced a new version for barley: Barley is a dead simple, fast, and efficient ActiveModel serializer</p>
<p>🧰 Dr Nic announced they are adding RBS signatures to tiktoken ruby gem → RBS signatures by drnic · Pull Request #16 · IAPark/tiktoken_ruby</p>
<p>🧰 RubyGems announced a new release 3.4.21 Released</p>
<p>🧰 David Heinemeier Hansson announced a new release of kredis → Release v1.6.0 · rails/kredis</p>
<p>🧰 Marco Roth announced a new release for stimulus-lsp Release v0.2.0 · marcoroth/stimulus-lsp</p>
<p>🧰 Maciej Mensfeld announced a new release of karafka version 2.2.8</p>
<p>🤝 Gergely Orosz shared about the influence of current economy on software engineering: </p>
<p>🤝 Tony Dinh shared about ChatGPT affecting Stack Overflow traffic (see the source for this data):</p>
<p>🤝 Chris Wanstrath shared a thread about how Github started: </p>
<p>🤝 Jason Swett asked a question about priorities in a software project: </p>
<p>🤝 Emma Bostian asked managers and engineers how to celebrate a job well done and received a lot of answers. Read the replies (read on nitter)</p>
<p>🤝 Daniel Vassallo shared a perspective about motivation:</p>
<p>🤝 Cameron Moll shared about their experience with Tailwind: </p>
<p>There is an interesting discussion with Adam Wathan (the creator of Tailwind): </p>
<p>🤝 Nate Hopkins shared about talking and doing when operating a business: </p>
<p>🤝 Irina Nazarova shared a thread about the important of documentation: </p>
<p>🗞 Greg Molnar published a new edition of This Week in Rails about Rails World Talks Online, Fix Of A 13 Years Old Bug And More!</p>
<p>🗞 Awesome Ruby Newsletter published a new edition about Awesome Ruby Newsletter Issue 387, Oct 19, 2023</p>
<p>🗞 Hotwire Weekly shared  Week 42 - Welcome new Subscribers, Rails World Recordings, and more!</p>
<p>🗞 Ruby Weekly published a new edition about The state of Ruby HTTP clients</p>
<p>🗞 Harrison Broadbent published a new edition about The Rails Notes Newsletter Issue #15</p>
<p>🗞 Ruby Radar published a new edition about Hacking at RubyConf 2023</p>
<p>🎧 Indie Rails published a new podcast about IndieRails | Greg Molnar - Security on Rails</p>
<p>🎧 Lucas Barret published a new episode about Gem Ruby Show: Stephen Margheim , Active Record Enhanced SQLite Adapter</p>
<p>🎧 Ruby For All published a new podcast about Plants, Zombies, and Pull Requests | Ruby for All | Episode 48</p>
<p>🎧 Remote Ruby published a new episode about Live With Adam Wathan At Rails World 2023</p>
<p>🎧 The Ruby on Rails Podcast published a new episode about The Ruby On Rails Podcast Episode 492: Vladimir Dementyev On Layered Design</p>
<p>🎧 Stephanie Minn and Joël Quenneville published a new episode about The Bike Shed: 404: Estimation</p>
<p>🎙️ Euruko published the videos at https://2023.euruko.org/recordings</p>
<p>🎙️ Ruby On Rails published a new video about Rails World 2023 - Amsterdam - Oct 5 &amp; 6</p>
<p>🎥 Dean DeHart published a series of videos:</p>
<p>🎥  Yaroslav Shmarov published a new video about Ruby on Rails #146 Generate Barcodes with JsBarcode. StimulusJS, Importmaps</p>
<p>🎥 Jason Swett published a new video about Building a Word Stemmer Part 2 (Ruby OOP + Testing)</p>
<p>🎥 Thoughtbot published a live video about  Rails Development</p>
<p>🎥 Drifting Ruby published a new video about Episode 424 - Solid Cache | Drifting Ruby</p>
<p>🎥 Steven R. Baker published a new video about The Shitshow 2: Adding AppSignal to a Rails 7 Application</p>
<p>Amanda Perino published an article about Rails World 2023: A Recap Of Two Days Of Rails → “The first edition of Rails World in Amsterdam was a two-day, two track community conference featuring technical talks, demos, workshops, networking, and keynotes about the latest features and best practices in Rails development”</p>
<p>Miles published a new article about New App Sneak Peek → “The existing tools I found were more focused on tracking after eating which is great in terms of capturing data and measuring over time, but I found really didn’t help me with locking in a routine. I wanted to fix this and bring some of this planning side along with tracking into an easy to use app”</p>
<p>Craig Kerstiens published a new article about Postgres Goodies in Ruby on Rails 7.1 → “In conversations with developers over the week, I had some notable takeaways from the newest version of Ruby on Rails that I just had to get written up”</p>
<p>Alkesh Ghorpade published an article about Rails Adds The Ability To Pass The Expires At Option To Active Storage/Blog#Signed → “When using the expires_in option to generate an expiring URL, the URL will change each time it is generated. This means the browser cannot cache the URL, and the user will have to download the file each time they access it” and published an article about Ruby 3.3 Introduces Range Overlap? Method</p>
<p>Ruby Central published an article about September 2023 Monthly Update → “During September, Ruby Central's open source work was supported by 35 different companies, including Fastly, Ruby member Zendesk and Ruby Shield sponsor Shopify”</p>
<p>Jeff Charles published an article about Introducing Ruvy (2023) → “We’ve recently open sourced a project called Ruvy! Ruvy is a toolchain that takes Ruby code as input and creates a WebAssembly module that will execute that Ruby code”</p>
<p>I published an article about A Quest For A Method Defined In Main → “Explore the question: Where is a method defined in Ruby when not defined inside an object?”</p>
<p>Ruby Gems published an article about September 2023 Ruby Gems Updates Ruby Gems Blog → “Read on to find out what updates were made to RubyGems and RubyGems.org in September”</p>
<p>Vladimir Dementyev published an article about The Future Of Full Stack Rails: Turbo Morph Drive → “In this two-part series, I’d like to explore these aforementioned frontend technologies and demonstrate how we can use them today with Turbo 7”</p>
<p>Stephan Hagemann published an update about their book  Message to Readers of Gradual Modularization → “A message I sent to the readers of Gradual Modularization for Ruby and Rails regarding the new update published today”</p>
<p>Victor Shepelev published another article in his series about new features in Ruby about “Useless Ruby Sugar”: Pattern Matching (Pt. 1) → “The importance of this feature and its effect on the Ruby code is a source of severe disagreements. Some put it in the “mere syntax sugar” bin (which is how it ended up as a part of this series… which I already regret a bit because the feature is a huge thing to discuss!). At the opposite extremum, there are people who believe that pattern matching is a separate paradigm, and “if you want a language with one, you just switch to that language.”</p>
<p>Bill Tihen published an article about Rails Design: Protected Modules With Injection → “Long-term Manageable Rails through Low Dependency/Entanglement and Loose Coupling”</p>
<p>Noel Rappin published an article about Better Know A Ruby Thing #1: Method Missing → “I do think the way that Ruby uses method_missing to make infinite API’s not just possible but easy to write is very basic to what I think of as the Ruby aesthetic. It’s also not something that everybody loves, and it’s something that you can get into trouble with.”</p>
<p>Akshay Khot published an article about Understanding The Instrumentation Api In Rails → “The Instrumentation API in ActiveSupport serves a dual purpose. You can use it to implement the observer (pub-sub) pattern, as well as benchmark how long it took to execute some action”</p>
<p>Radan Skoric published an article about Understand Rails Async Database Queries By Reimplementing Them In 51 Lines Of Simple Ruby → “I’ve read the original PRs that added the async loading functionality and used the debugger to dig down to the actual raw happy path logic and summarised my findings here. So let’s peel away the layers from ActiveRecord async queries”</p>
<p>David Copeland published an article about The Katz Conjecture: You Must Understand What An Abstraction Abstracts → “To effectively use any abstraction, you must—eventually—have a solid understanding of what it’s abstracting. I’m calling this the Katz Conjecture because Yehuda Katz made this statement in a conference talk”</p>
<p>Mike Coutermarsh published an article about Easy Rails Controller Rate Limiting With Rails.Cache → “Here's an easy trick I reach for when wanting to add simple rate limiting to an endpoint”</p>
<p>Brad Gessler published an article about Better Rails Forms With Superform → “Superform is a new form helper library built from scratch on top of Phlex that makes building forms in Rails less tedious”</p>
<p>Josef Strzibny published an article about Adding Slugs To Active Record Models In Rails → “Here’s how to implement a Sluggable module that turns an ActiveRecord model into one with a user-defined slug for nice page identifiers”</p>
<p>Ahmed Nadar published a new article about Mastering Rails Web Navigation with link_to and button_to Helpers → “In Part 1 (you are reading), we'll explore the Rails web navigation system, understand how Rails handles requests, and delve deep into the world of middleware” and Mastering Rails Web Navigation With Link To And Button To Helpers Part 2</p>
<p>I published an article about Chat GPT, Github Copilot: How To Generate Tailwind Width Configuration → “Examining the results of ChatGPT 4, Github Copilot and Chat and Phind in generating Tailwind width configurations utilizing the golden ratio”</p>
<p>Aestimo Kirina published an article about Advanced Usages Of Action Policy For Ruby On Rails → “In part one of this series, we looked at some basic usages of Action Policy. Now we'll leverage Action Policy for more advanced authorization use cases”</p>
<p>Harrison Broadbent published an article about Action Mailer Console Script For Bulk Testing Mailers → “Here's a handy ActionMailer console script for sending test emails locally (packaged up as a rake task)”</p>
<p>Hopper Gee published an article about Rest Man → A visual guide about how to use the rest-man gem</p>
<p>Khash Sajadi published an article about Using Rails With SES, SNS And SQS To Avoid Bounce Rate → “Using SES directly, you will not get some of the features you might need to control the bounce rate of your emails. In a perfect world, you'd want to monitor bounce rate of your emails and take them out of your email list so no further email is sent to those recipients”</p>
<p>Rishi Jain published an article about  I18n Gem Gotchas in Ruby 3.0: What You Need to Know → “If you are using the i18n gem opens a new window  with Ruby 3.0 or are planning to upgrade Ruby to 3.0 while using the i18n gem, this blog post will cover a gotcha that can be tricky to understand”</p>
<p>Julia Evans published an article about Some Miscellaneous Git Facts → “None of these things feel super surprising in retrospect, but I hadn’t thought about them clearly before”</p>
<p>Josef Strzibny published an article about Marketing My Book To 1000 Sales → “Here’s a simple list of what I was doing on my way to 1000 sales of my book and how much success I had with them”</p>
Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:
<p>Support the newsletter for 1.8$/week</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-63</h2>
<div><div>
Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody
<p>Support the newsletter for 1.8$/week</p>
<p> You can jump directly to a section:</p>
<p>🚀 New Products &amp; 📅 Events</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>🚀 Hotwire Weekly announced the first email was sent → Welcome To Hotwire Weekly!</p>
<p>🚀 Julian Rubisch shared they launched RailsReviews on Product Hunt → RailsReviews - Product Information and More 2023</p>
<p>🚀 Irina Nazarova shared the new page at Evil Martians: Product Development Consulting for Dev Tools Startups</p>
<p>🚀 Lucas Barret shared their gem has GemRuby Show</p>
<p>🚀 Arian Celina launched a script that can automate Rails deployment on Hetzner via Terraform → Buy or download for free the scripts here</p>
<p>📅 Ruby Conf announced the final list of scholars and guides for RubyConf 2023</p>
<p>📅 Juliana Dias shared the form to send proposals for Indicação Ruby Brasil Awards</p>
<p>📅 Rubyconftw shared the deadline for call for papers is closing soon RubyConf Taiwan 2023</p>
<p>📅 Visuality shared their first speaker for Polish Ruby User Group (PLRUG) meetup, Thu, Oct 19, 2023, 6:00 PM | Meetup</p>
<p>📅 Ruby Conf shared the form to submit questions for Matz at RubyConf → Google Forms: Sign-in</p>
<p>👉 Petrik De Heus shared that Feature #19744: Namespace on read - Ruby master - Ruby Issue Tracking System was addressed during the last Ruby developer meeting:</p>
<p>👉 David Heinemeier Hansson shared they are running Hey.com on Ruby YJIT:</p>
<p>👉 Xavier Noria shared the Rails contributors website at contributors.rubyonrails.org</p>
<p>👉 Joel Drapper shared a code sample showing how they want to improve GreenDots testing framework: </p>
<p>👉Postmodern asked an interesting question that I had multiple times: </p>
<p>The consensus is for "N &gt; max_things”. Xavier also shared an idea that maybe the name can be changed: </p>
<p>👉Marc Busqué shared about the limitations of #to_proc in terms of binding: </p>
Support ShortRuby by subscribing for only $7.5/month ($1.8/week). 
Get an ad-free experience and help us maintain our quality for everyone.
<p>Support the newsletter for 1.8$/week</p>
<p>👉 Noel Rappin announced that Programming Ruby 3.2 (5th Edition) would start be available as a print in November: </p>
<p>👉Prem Sichanugrist shared about using measure in IRB</p>
<p>👉 David Heinemeier Hansson shared Hey.com runs on no-build Javascript: </p>
<p>👉 Deepak Mahakale shared a code sample about using dig when accepting nested hash: </p>
<p>👉 John Nunemaker shared a code sample showing how to configure Net:HTTP retries (class Net::HTTP - Documentation for Ruby 3.3)</p>
<p>👉 Stanislav Katkov shared about Ruby scaling and a gem called autotuner to tune GC properly: </p>
<p>👉 Julian Rubisch published a new challenge for Hotwire Club at Challenge 13: Turbo Streams - Custom Stream Actions - Video Playlist Management | The Hotwire Club</p>
<p>👉 Nicolas Alpi shared a post about the evolution of Rails in the last 15 years. Here is a snapshot from it, but you should read it all (read on nitter)</p>
<p>👉 Xavier Noria shared about Turbo drive and client caching: </p>
<p>👉 Nate Berkopec shared some advice about using jemalloc: </p>
<p>👉 Jason Swett shared that their newsletter Nonsense Monthly - a snail mail newsletter - Code with Jason hit 300 people: </p>
<p>👉 Nate Hopkins shared about the Hotwire evolution, the possible effects on the Stimulus Reflex and Cable Ready, and the impermanent nature of code: </p>
<p>Julian Rubisch shared something along the same lines: </p>
<p>👉 Brad Gessler shared their gratitude for the painless Rails upgrades: </p>
<p>👉 Rafael França shared about open source work and expectations: </p>
<p>👉 Mohammad A. Ali shared about the benefits of using Litestack: </p>
<p>👉 Carlos Antonio asked what people want to see more or less in Devise. There are a lot of good ideas in the replies (read on nitter):</p>
<p>👉 Josef Strzibny shared a post with a summary from DHH keynote: </p>
<p>👉 Maciej Mensfeld shared a code sample about what’s coming in Karafka: </p>
<p>👉 Nick Schwaderer shared about remaining in the community: </p>
<p>👉 Greg Navis shared that 95% of the market uses Rails 4.2+</p>
<p>👉 Mayra Lucia Navarro shared about how the community got together to help her get the trip to RubyConf: </p>
<p>👉 Hello Max shared the name of the &lt;=&gt; operator (that I also forget how it is called from time to time): </p>
<p>👉 Josef Strzibny announced a survey for their started kit for Rails at Business Class Survey</p>
<p>👉 u/bracket17 asked in r/rails about learning Ruby on Rails and received a lot of responses. I am not adding them here as it will make the newsletter too big 🤭 but I invite you to read the thread there. </p>
<p>There was also a discussion on r/ruby about learning Ruby as a Java dev: </p>
<p>Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody</p>
<p>Support the newsletter for 1.8$/week</p>
<p>🧰 Ruby on Rails announced a new release for Rails 7.1.1 </p>
<p>🧰 Koichi Sasada merged Feature #19842: Introduce M:N threads - Ruby master - Ruby Issue Tracking System to Ruby main:</p>
<p>🆕 🧰 Makoto Kuwata published a new gem called benry-cmdapp - a framework to create command-line application. If you want create command-line application which takes sub-commands like git, docker, or npm, Benry-CmdApp is the solution.</p>
<p>🆕 🧰 Marc Busqué announced they are working on a new gem called dry-operation - We introduce a thin DSL on top of dry-monads' result type to define operations that can fail</p>
<p>🆕 🧰 Stephen Margheim published a new gem called activerecord-enhancedsqlite3-adapter - ActiveRecord adapter for SQLite that enhances the default</p>
<p>You can also read Stephen Margheim’s article about SQLite On Rails</p>
<p>🧰 Heartcombo announced there are releases for Devise, Simple Form, Responders: </p>
<p>They also announced they are dropping support for older versions of Ruby and Rails: </p>
<p>🧰 Mohammad A. Ali announced a new release of Litestack that now contains a Litesearch Guide</p>
<p>🧰 Chris Oliver announced that Jumpstart Pro now runs on Rails 7.1: </p>
<p>🧰 Gabriel Arcangel Zayas announced a new release for masamune-ast - A Ruby source code analyzer based on Ripper’s Abstract Syntax Tree generator</p>
<p>🧰 Bozhidar Batsov announced a new version for Release RuboCop 1.57 · rubocop/rubocop</p>
<p>🆕 🧰 Geoff Wright released a new gem called hyperlayer - An entirely new way to visualise Ruby apps, combining application flow, state and the code itself (link to demo in the video)</p>
<p>🧰 Solidus announced a new release Solidus V4.2</p>
<p>🧰 Keshav Biswa announced a new version for seedie - A ruby gem to run seeds for you in your Ruby on Rails application</p>
<p>🧰 Jeremy Evans announced a new version for Roda 3.73.0 Released · jeremyevans roda · Discussion #335</p>
<p>🧰 Andrew Atkinson shared a PR opened a couple weeks ago about Reduce pg_stat_statements churn using `= any()` instead of `IN ()` by seanlinsley · Pull Request #49388 · rails/rails</p>
<p>🧰 Kirill Platonov announced a new version for hotwire-livereload - Live reload gem for Hotwire Rails apps.</p>
<p>🧰 Kevin Newton announced a new version Release v0.14.0 · ruby/prism</p>
<p>🤝 Dave Thomas shared they are looking to discuss with people about teams what works and what doesn’t → Pick a time</p>
<p>🤝 Cezar Halmagean shared about using Vim:</p>
<p>🤝 Dave Meier shared about productivity tools and efficiency: </p>
<p>🤝 Lázaro Nixon shared Open Props: sub-atomic styles</p>
<p>Chris Oliver published their slides from Rails World about Rails World 2023: Powerful Rails Features You Might Not Know Talk Slides</p>
<p>Eileen M. Uchitelle published their slides from Rails World at  [Rails World 2023 - Day 1 Closing Keynote] - The Magic of Rails</p>
<p>Marco Roth published their slides from Rails World at  The Future of Rails as a Full-stack Framework Powered by Hotwire @ Rails World 2023, Amsterdam</p>
<p>Yaroslav Shmarov published their slides from Rails World at RailsWorld 2023 Hotwire Cookbook Yaroslav Shmarov</p>
<p>🗞 Andy Croll published a new edition of One Ruby Thing about Customize And Abbreviate Number To Human</p>
<p>🗞 This Week in Rails published a new edition about Ruby On Rails &amp;Mdash; Special Rails World Edition: Rails 7.1.1, Solid Queue, Solid Cache, Turbo 8, Etc</p>
<p>🗞 Greg Molnar published an article about Rack Attack 404 Errors And Custom Response Message Rails Tricks Issue 20</p>
<p>🗞 Ruby Weekly published a new edition about Ruby Weekly Issue 673: DHH's Lego hypercar</p>
<p>🗞 Awesome Ruby Newsletter published a new edition about Issue 386 - "Useless syntax sugar": Numbered block parameters </p>
<p>🗞 Any Cable published a new edition about Any Cables Monthly #14</p>
<p>🗞 Ruby Radar published a new edition about Virtual Top-Level Namespaces in Ruby</p>
<p>🗞 Hotwire Weekly published a new edition about Welcome to Hotwire Weekly!</p>
<p>🎧 The Ruby on Rails Podcast published a new episode about The Ruby On Rails Podcast Episode 491: Reflecting On Rocky Mountain Ruby With Bekki Freeman</p>
<p>🎧 The Rubber Duck Dev Show published two episodes about Revisiting Leaving The Cloud and Beyond Technical Complexity With Thiago Pinto </p>
<p>🎧 Yaroslav Shmarov and Adrian Marin published a new episode about Friendly Show E6 RailsWorld, EuRuKo, FriendlyRB</p>
<p>🎧 Jason Swett published a new podcast about 198 - TDD with Wisen Tanasa - The Code with Jason Podcast</p>
<p>🎧 The Rails Changelog published a new podcast about 013: Rails World Edition - Turbo Native with the Turbo Native Guy, Joe Masilotti | The Rails Changelog | Episode 13</p>
<p>📽️ Sebastian Wilgosz published a new episode on Hanami Mastery  about Special: Hanami Core Team Interview</p>
<p>📽️ Ruby On Rail published a new video about Rails World 2023 Opening Keynote - David Heinemeier Hansson</p>
<p>📽️ Ruby On Rails published a new video about Rails World</p>
<p>📽️ Boulder Ruby published a video about Rocky Mountain Ruby 2023 Conference Recap</p>
<p>🎥 Cj Avilla published a new video about Fun with Rails Generators</p>
<p>Jorge Manrubia published a new article about A happier happy path in Turbo with morphing → “Turbo 8 is coming with smoother page updates and simpler broadcasts”</p>
<p>Stephen Margheim published an article about SQLite Myths → “Today, I want to explore the myth that attempting concurrent writes from concurrent threads/processes to a single SQLite database file can corrupt that file. This isn’t true. Let’s dig into why” and about SQLite On Rails</p>
<p>Akshay Khot published an article about Interview With Miles Woodroffe, Former Global CTO of Cookpad → “Miles Woodroffe is a veteran Ruby &amp; Rails developer who served as a Global CTO at Cookpad for many years and represents the company as a founding board member at the Rails Foundation”</p>
<p>Ben Sheldon published an article about Reflections On Good Job For Solid Queue → “I reflected on some of the design and motivations that became GoodJob, and that I believe are important regardless of the Active Job backend under development”</p>
<p>David Heinemeier Hansson published two articles about You can't get faster than No Build → “For the first time since the 2000s, I'm working on a new Rails application without using any form of real build steps on the front-end. We're making it using vanilla ES6 with import maps for Hotwire, and vanilla CSS with nesting and variables for styling. All running on a delightfully new simple asset pipeline called Propshaft. It's all just so... simple” and We tried that, didn’t work</p>
<p>Rafael Montas published an article about Rails World 2023 → “A quick recap of the amazing Rails World 2023 and also my first Rails related conference ever”</p>
<p>Stanko Krtalić published an article about Rails World → “I haven't been to Amsterdam since 2019 when I briefly meandered through it's streets on my way to EuRuKo in Rotterdam. This time I was going there for Rails World which was special to me since I've never been to Rails-specific conference before”</p>
<p>Miles published a new article about Spectacular Rails World → “I’m just home from the inaugural Rails World conference in Amsterdam, and the word that keeps popping in my head to describe it is simply «Spectacular»”</p>
<p>I published an article about Ruby On Rails Scalability: One Example → “A case study of an open source web app using Ruby on Rails, managing 300 million monthly visits”</p>
<p>Greg Navis published an article about Build The Framework You Need → “how to retain the vanilla Rails feel beyond the early stages”</p>
<p>Matt Brictson published an article about 7 Lesser Known Features And Changes In Rails 7.1 → “as I dug deeper into the 2,000+ pull requests merged since Rails 7.0, I realized that there are several interesting features and changes, many of which haven’t been widely promoted”</p>
<p>Alexis Bernard published an article about Background Job Queues And Priorities May Be The Wrong Path → “Indeed, defining latency queues (latency_15s, latency_15m, latency_8h) is much better. Because if the high priority queue is always busy, others will never start. However, with the idea of SLO latency, we could totally get rid of queues”</p>
<p>Victor Shepelev published an article about “Useless Syntax Sugar” Numbered Block Parameters → “Let’s start with the feature that at the moment of its introduction I disliked to the extent of taking it as almost personal offense (the story was already told here): Numbered, or anonymous block parameters”</p>
<p>Dmitry Tsepelev published an article about Service Objects In Rails: How To Find A Mess → “In this post we will discuss two things that are often missing: contracts and composability. After that I will share a list of anti–patterns I found while working on dozens of Rails applications”</p>
<p>Akshay Khot published an article about Length, Size, And Count In Ruby And Rails: When To Use Which? → “This post explores the difference between these methods and explains how you should choose which method to use according to the needs of your application”</p>
<p>Daniel Lempesis published an article about Expressive Ruby And Rails: Communicate Effectively With Your Code → “In this post, we'll look at why expressive code is important and its impact on your productivity as a developer. Then, we'll explore how to best use some of Ruby's methods”</p>
<p>Tiago Cardoso published an article about The State Of HTTP Clients, Or Why You Should Use HTTPx → “most http clients you’ve been using since the ruby heyday are either broken, unmaintained, or stale, and you should be using httpx nowadays”</p>
<p>Kyle Keesling published a new article about Deploying a Rails App Using Kamal and SQLite → “When you combine that with my recent discovery of the litestack gem, the recent release of Kamal, and the recent GoRails series on building your own URL shortner, and the stars had aligned”</p>
<p>Harrison Broadbent published a new article about Some View Component Tips (How I Write Them) → “After spending years building with ViewComponents, including building an entire Rails email component library, I've got some handy tips to share!”</p>
<p>Brad Gessler published an article about Better Rails Forms with Superform → “Rails form helpers have been around for so long that they seem unquestionable, but did you know there’s a way to build forms in Rails that are easier to customize and permit their own strong parameters?”</p>
<p>Garrett Dimon and John Nunemaker published an article about 14 Ways To Reduce Risk With Feature Flags → “We’ve pulled together all of the ways that feature flags can make releases much less anxiety-inducing”</p>
<p>Lucas Barret published an article about Optimistic Locking (Rails Internals Again) → “Aside from the LISTEN/NOTIFY mechanism, another essential mechanism in GoodJob is advisory Locks. In this article, we will try to understand better what they are and how to use them in Rails”</p>
<p>Igor Alexandrov published an article about Upgrading Rails Application From 7.0 To 7.1 → “In this article, I will show you how I upgraded one of our projects, OneTribe, to the new major release within one day of my holidays”</p>
<p>James Garcia published an article about Javascript Embeddable Widget With Hotwire Turbo And Stimulus → “There are many articles on how to create an embeddable widget with Javascript, but I wanted to see if I could do the same with just Hotwire Turbo and Stimulus”</p>
<p>Jon Lunsford published an article about Refactoring Ruby: Extract Method Dev Community → “Extract Method can be used when you have several expressions, a code fragment, that can be grouped together”</p>
<p>Kevin Murphy published an article about Preparing Conference Talk Delivery Kevin Murphy → “Conference Talk Preparation Series! A conference accepted my proposal and I’ve built a slide deck. I still have a lot to do before hitting the stage!”</p>
<p>Justin Searls published an article about 16 Things You Believe About Software: A Retrospective On The Searls Briggs Type Indicator® → “I’ll take a moment to reflect on each of these questions and what our answers might tell us about ourselves and the particular era of software development we exist in”</p>
<p>Nina Torgunakova published an article about 5 Best Practices For Preventing Chaos In Tailwind CSS → “as the application grows, the lists of classes grow. Then, one day you realize you can’t understand your code, you’re confused with the structure of the application and magic variables, and work becomes a struggle. This article is all about avoiding this scenario”</p>
Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:
<p>Support the newsletter for 1.8$/week</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-62</h2>
<div><div>
Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody
<p>Support the newsletter for 1.8$/week</p>
<p> You can jump directly to a section:</p>
<p>🚀 New Products &amp; 📅 Events</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>🚀 Marco Roth announced at RailsWorld a wide range of improvements for Hotwire and launched hotwire.io: </p>
<p>🚀 Brad Gessler launched their new product tinyzap.com</p>
<p>🚀 Greg Molnar announced their book is available to buy Secure code review for Rails Developers</p>
<p>🚀 Landon Gray (He/Him) announced a new community Ruby AI on Twitter:</p>
<p>This conference season started with Wroclove.rb in Wroclaw followed by Euruko in Vilnius, and continued with Friendly.rb in Bucharest (see photos from the event here). </p>
<p>This week we had 3 conferences running at the same time: </p>
<p>Rails World in Amsterdam - see more pictures and insights at #RailsWorld@twitter (nitter link) , #RailsWorld@ruby.social</p>
<p>RubyConf Thailand - see more pictures and insights at #rubyconfth@twitter (nitter link), #rubyconfth@ruby.social</p>
<p>Rocky Mountain Ruby Conference - see more pictures and insights at rmrubyconf@twitter (nitter link), #rockymtnruby@ruby.social</p>
<p>📅  North West Ruby User Group announced their new meeting Get tickets – North West Ruby User Group's October Meeting</p>
<p>📅 Brighton Ruby Conference  announced early bird tickets available at  Brighton Ruby Conference:</p>
<p>📅 Rubyday | 16th June | Verona announced early bird tickets open at RubyDay Tickets  and CFP open at rubyday 2024: Call for Papers</p>
<p>📅 Inao shared that timetable for Oedo conference 大江戸Ruby会議10 is published: </p>
<p>👉 Xavier Noria shared that it is never too late to learn programming: </p>
<p>👉 David Teren also shared their story:</p>
<p>Upgrade to paid</p>
<p>👉 Emmanuel Hayford announced the Rails Youtube channel where videos from RailsWorld will be published → Ruby on Rails</p>
<p>👉 Marc Busqué shared a code sample showing that String#[] </p>
<p>Some additional replies showing other use cases: </p>
<p>👉 Paul Mucur shared about setting Cache-Control on public files: </p>
<p>👉 Kasper Timm Hansen shared a code sample showing how to use their gem active_job-performs</p>
<p>👉 Samuel Williams shared a screenshot from a small game implemented at their repo where they show how to use Falcon as a web server with Rails (see falcon-rails-example)</p>
<p>👉 Juraj Kostolanský shared a Stimulus controller that implements an around action for a Turbo Stream event: </p>
<p>👉 David Aldridge shared a code sample about PostgreSQL partitioning: </p>
If you like this newsletter and get value from reading it, please consider becoming a paid subscriber to support for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:
<p>Support the newsletter for 1.8$/week</p>
<p>👉 Ruby Cademy shared  a Rails tip for creating direct URLs:</p>
<p>👉 Emmanuel Hayford shared that Rails 7.1 checkbox will respected the checked option: </p>
<p>👉 Josef Strzibny shared a code sample showing how to add slugs and UUIDs to a rails model: </p>
<p>👉 Robby Russell asked about how is hiring Rails developers and received some good replies (nitter alternative):</p>
<p>Here are some replies: </p>
<p>👉 Brad Gessler shared code sample from how to work with select from their project rubymonolith/superform: Build highly customizable forms in Rails</p>
<p>👉 Josef Strzibny shared a code sample showing Rails helpers for updating a counter: </p>
<p>👉 Mike Coutermarsh shared that Rails 7.1 is fixing the long index name error: </p>
<p>👉 Yaroslav Shmarov shared a screenshot from RailsWorld that summarisez the direction of rails:</p>
<p>👉 Stanislav Katkov shared a screenshot from Flavor presentation where they share that Rails 7.1 now has HTML5 sanitizer support: </p>
<p> 👉 Kyle Daigle shared why they like Rails: </p>
<p>👉 Tobi Lutke talked about how Rails influenced other web frameworks: </p>
<p>👉 José Valim shared a thread about one person framework (open the post to see the entire text, I cut here just the first part):</p>
<p>👉 Jason Meller shared they are already running Rails 7.1 in production: </p>
<p>👉 Drazen asked if anyone is building something with Ruby and AI:</p>
<p>👉 Josef Strzibny shared a code sample about configuring disk service in Rails: </p>
<p>🧰 Rails announced the release of Rails 7.1 during Rails World conference:</p>
<p>🧰 Tim Riley announced a new release of Hanami version 2.1.0.beta2 (see source diff here): </p>
<p>🆕 🧰 Donal McBreen launched solid_cache - A database-backed ActiveSupport::Cache::Store</p>
<p>🧰 Alberto Fernández-Capel opened a PR at hotwire/turbo about Page refreshes by afcapel · Pull Request #1019 · hotwired/turbo</p>
<p>🆕 🧰 Marco Roth published a new extension for VSCode - Stimulus LSP - Intelligent Stimulus tooling for Visual Studio Code</p>
<p>🆕 🧰 Dima Fatko published a new gem columns_trace - Detect unnecessary selected database columns</p>
<p>He also recommended to read the following article: Reasons Why Select * Is Bad For SQL Performance</p>
<p>🧰 Tiago Cardoso announced the release of version 1.0 of httpx - An HTTP client library for ruby</p>
<p>🆕 🧰 Justin Searls and Aaron Patterson announced a new testing framework called TLDR - A Ruby test framework for people who don't have time for slow tests</p>
<p>Justin published an article explaining the reasons behind the decision of running tests in 1.8 seconds</p>
<p>🆕 🧰 Samuel Williams announced a demo repository where they show a Web Socker in Rails 7.1 running via Falcon web server falcon-rails-example/app/controllers/chat_controller.rb at 51536cab600017eadcf64f9733259058fa8828c9 · socketry/falcon-rails-example:</p>
<p>🆕 🧰 Modern Rails shared a repo they created to play with solid cache over SQLite → codergeek121/solid_cache_demo: Small demo app with solid_cache sqlite setup</p>
<p>🧰 Nate Hopkins shared a draft where they explore to Add ability to drive Commands from a Stimulus controller by hopsoft · Pull Request #106 · hopsoft/turbo_boost-commands</p>
<p>🆕 🧰 Brad Gessler announced a new gem NoCheckout is the smallest possible Stripe integration</p>
<p>🧰 Julian Rubisch announced they refactored their PR for Hotwire about Add MutationObserver to Turbo Drive Preloader by julianrubisch · Pull Request #911 · hotwired/turbo</p>
<p>🧰 Nick Janetakis announced they updated their repo docker-rails-example: A production ready example Rails app that's using Docker and Docker Compose.</p>
<p>🧰 Tim Morgan announced a PR for natalie-lang about Add experimental support for the common Ruby idiom `$LOAD_PATH &lt;&lt; stuff` by seven1m · Pull Request #1299 · natalie-lang/natalie</p>
<p>🆕 🧰 Jesper Christiansen announced a new repository at jespr/rails-emoji-generator: A simple Ruby on Rails app that uses replicate to create Apple style emojis</p>
<p>🧰 Lázaro Nixon announced Release v3.0.0 · lazaronixon/authentication-zero</p>
<p>🧰 Nick Janetakis shared GitHub - nickjj/docker-rails-example: A production ready example Rails app that's using Docker and Docker Compose</p>
<p>🤝 Joel Drapper shared about using GPT to name things: </p>
<p>🤝 Tony Dinh shared about being consistent in their work:</p>
<p>🤝 Paul Graham shared about what startup ideas to pick: </p>
<p>🤝 Nate Hopkins shared about working smarter not harder:</p>
<p>🤝 Tim Morgan shared about “I don’t know” as a powerful start of learning journey: </p>
<p> 🤝 Hassan Zahirnia shared a Tailwind CSS trick: </p>
<p>🗞 Ruby Weekly published a new edition It's a Rails (7.1) World</p>
<p>🗞 Awesome Ruby Newsletter published a new edition Issue 385 - Writing Object Shape friendly code in Ruby</p>
<p>🗞 Ruby Radar published a new edition about From Amsterdam With Love</p>
<p>🎧 The Ruby on Rails Podcast published a new episode about Ruby On Rails As A Career Choice With Olly Headey </p>
<p>🎧 Maintainable Software Podcast published a new episode about Dave Bryant Copeland Quantifying The Carrying Cost</p>
<p>🎧 Lucas Barret published a new episode about Gem Ruby Show : Julian Rubisch, Cable Ready</p>
<p>🎧 Code And The Coding Coders Who Code It published a new podcast about Episode 29 - Ben Orenstein</p>
<p>🎧 Indie Rails published a new podcast about Managing Yourself - Tips and advice for managing being indie longterm | IndieRails | Episode 18</p>
<p>🎧 Ruby For All published a new podcast about Welcome back! | Ruby for All | Episode 46</p>
<p>🎥 Sebastian Wilgosz published a new episode about Registry Pattern In Hanami Apps</p>
<p>🎥 GoRails published a video about Health Check Endpoint In Rails 7.1 (Example)</p>
<p>🎥 Dave Kimura published a video about Embedding Stripe Checkout</p>
<p>🎥 Dean DeHart published two videos about Revise Auth Gem In Ruby On Rails 7 and about GPT Turbo To Audio: Real Time Answers With Rails 7</p>
<p>🎥 Thoughtbot published a new video about The final push to Rails 7</p>
<p>Victor Shepelev published an article about That Useless Ruby Syntax Sugar That Emerged In New Versions → “What I feel as an interesting mind exercise, though, is providing a thought framework of looking at the new syntaxes and language features to understand what are their causes, reasoning, and consequences”</p>
<p>Ruby Central published an article about See The Full Line Up: Ruby Conf 2023 Announces 2023 Speakers → “This year’s keynote speakers represent some of the values we strive to promote in the Ruby community; like continuous learning, inclusion, collaboration and empathy”</p>
<p>Donal McBreen published an article about Solid Cache → “Solid Cache uses a SQL database as its cache store. We get a much larger cache at a fraction of the storage costs of memory caches like Redis or Memcached. For us, that’s a cache size of months rather than days”</p>
<p>Adrian Marin published an article about The 2023 Ruby Conference Season Is (Almost) Over → “I call it a Conference season because we just had 6 Ruby conferences in four consecutive weeks on three continents. And that's wild! This is just a testament to how vibrant and healthy the Ruby community really is”</p>
<p>Paweł Świątkowski published an article about On Using Phlex → “Seb Wilgosz recently published an article Phlex with Hanami on Hanami Mastery. It made the latest Ruby Weekly issue as the first item and generally was quite well received. I write this post as an addendum to Seb’s article, giving my perspective on using Phlex in Ruby applications”</p>
<p>Kemal Akkoyun &amp; Javier Honduvilla Coto published an article about Profiling Python And Ruby Using eBPF → “ In our continued efforts to expand and improve your profiling experience, we are excited to announce new additions to our language support: Ruby and Python”</p>
<p>Karol Galanciak published an article about Integration Patterns For Distributed Architecture Intro To Kafka → “The good news is that we have many tools available that we could add to our Ruby on Rails applications to make them work with Kafka. And there is even better news - one of these tools is a clear winner - Karafka”</p>
<p>Chad Pytel  published an article about Running Old Ruby Versions On Apple Silicon By Fully Emulating X86 64 → “If you find yourself in a situation where you need to run an older version of Ruby on Apple Silicon, this might be a solution for you”</p>
<p>Navaneeth D published an article about Rails 7.1 Adds Support For Multi Column Ordering In Active Record/Batches → “In Rails 7.1, an enhancement has been introduced to ActiveRecord::Batches methods, related to models with composite primary keys. This update allows developers to specify ascending or descending order for each key within a composite primary key”</p>
<p>Akshay Khot published an article about Refactoring: Improving The Design Of Existing Code (My Notes And Highlights) → “What follows are not my thoughts, opinions and interpretations, but just a copy + paste of my notes and highlights taken straight from the book”</p>
<p>Cherry Ramatis published an article about Pattern Matching Dealing With The If Statement Nightmare → “I think we all faced(or wrote) that 20 lines of if statements to check a single variable in all the possibilities, and I think we all suffered to add one more statement to that function leaving it even more unreadable. Well, on this article we'll see a better way in my opinion called pattern matching, essentially we'll learn how to use switch cases with steroids”</p>
<p>Peter Berkenbosch published an article about Getting Started With Solidus And A Custom Tailwind CSS Frontend → “This first article is the setup and getting Solidus up and running for you locally”</p>
<p>Aestimo Kirina published an article about Using Action Policy For A Ruby On Rails App: The Basics → “In this two-part series, we'll take a deep dive into using the Action Policy gem for a Ruby on Rails blog application. In this part, we'll cover the basics of Action Policy”</p>
<p>Rishi Jain published an article about Dealing With Schema Changes In Rails 7 → “When you upgrade a Rails application from Rails 6.1 to 7.0, you may suddenly see a lot of changes in the schema.rb file and wonder where those changes come from and how to deal with them. In this post, we look at what those changes are, and how to deal with them when upgrading a Rails application”</p>
<p>Matt Brictson published an article about Bundler 2.4.20 Understands .Ruby Version Files → “You can now DRY up your Ruby version declarations with Bundler’s new Gemfile syntax”</p>
<p>Randy Stauner published an article about Enabling Bootsnap In Truffle Ruby → “Eager loading the app with a native build of the latest TruffleRuby commit on a development cloud instance was taking as long as 134 seconds. By simply enabling Bootsnap it finishes in under 122 seconds (consistently about 10% faster)”</p>
<p>Dennis Martinez published an article about Distributing Docker Images For Rails Apps With Git Hub Actions → “Learn how to automatically build and distribute Docker images for your Rails apps and streamline your development, testing, and deployment workflows”</p>
<p>Jonas Downey published an article about Why side projects are essential for creatives—and employers should embrace them</p>
<p>Rémy Hannequin published a new article about “I have a bad English accent”</p>
<p>Daniel Terhorst North published a new article about McKinsey Developer Productivity Review</p>
Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:
<p>Support the newsletter for 1.8$/week</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-61</h2>
<div><div>
<p>This edition arrived one day late in your inbox. I was involved in Friendly.rb as an organizer and speaker last week, and I spent the weekend catching up on some sleep and spending time with my family. If you're interested in learning how the conference went, check out the #friendlyrb hashtag on Twitter or #friendlyrb hashtag on Mastodon. </p>
<p> You can jump directly to a section:</p>
<p>🚀New Products &amp; 📅 Events</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>🚀 Dave Gauer launched reporat - A static website generator for Git repos written in Ruby</p>
<p>🚀 Rob Zolkos launched Turbo Native directory</p>
<p>🚀 Mike &amp; Nicole: The Pragmatic Studio announced an update for thei Ruby course at The Pragmatic Studio</p>
<p>🚀 Andrei Kaleshka launched BudgetingKid - Foster good financial habits in your children</p>
<p> 📅 Visuality shared a new event Meetup</p>
<p>📅 Kaigi On Rails announced the Schedule - Kaigi on Rails 2023</p>
<p>📅 Boulder Ruby shared their Schedule</p>
<p>📅 Friendly.Rb shared a photo with all the speakers: </p>
<p>👉 Xavier Noria shared about the autoload section from Upgrading Ruby on Rails — Ruby on Rails Guides</p>
<p>👉 Postmodern asked about resolving a relative path and removing “../” and “./”</p>
<p>👉 Kyle Keesling shared about readable code in Minitest: </p>
<p>👉 Bram Jetten shared a code sample: </p>
<p>👉 Emmanuel Hayford shared a code sample about access tokens: </p>
<p>👉 Bhumi shared a thread about how constants work in Ruby: </p>
<p>👉 Dainius 🇱🇹  asked about recommendations for Turbo Native tutorial/courses: </p>
<p>👉 Stephen Margheim shared about the progress for improving SQLite: </p>
<p>👉 Nicolas Alpi shared a thread about their experience in choosing Turbo Native (read the entire thread or alternatively on nitter): </p>
<p>👉 Benjamín Silva H. asked for gem recommendations: </p>
<p>Here are some of the recommendations:</p>
<p>👉 Nate Berkopec shared about working on N+1: </p>
<p>👉 Takashi Kokubun shared about thinking to remove C extension for Haml: </p>
<p>There was a good conversation about this: </p>
<p>👉 Olly Headey asked about companies hiring Juniors: </p>
<p>Here are some of the replies:</p>
<p>👉 John Nunemaker shared about implementing honeybadge: </p>
<p>Here is an alternative code provided by Pradyumna: </p>
<p>👉 Rob Zolkos shared an invitation to keep gems up to date: </p>
<p>👉 Matt Swanson shared about creating skeleton loaders with Hotwire and Tailwind: </p>
<p>👉 Ruby Cademy shared a code sample showing Object presence: </p>
<p>👉 Bhumi shared about freeze and constant reassignment: </p>
<p>👉 Adam Wathan shared about using partials with Tailwind in Rails: </p>
<p>👉 Harrison Broadbent shared an advice about using .size over .count in Rails: </p>
<p>👉 John Nunemaker shared a code sample about setting limits: </p>
<p>🧰 Ruby On Rails announced their Rails 7.1 enters the Release Candidate phase</p>
<p>🧰 Dorian announced their PR was merged to Rails about Allow attaching File or Pathname to has_one_attached by dorianmariefr</p>
<p>🆕 🧰 Santosh Wadghule announced a new gem colorize_logs - simplifies and accelerates Rails application debugging by highlighting crucial information in the logs</p>
<p>🆕 🧰 Dima Fatko announced a new gem GitHub - fatkodima/rubocop-disable_syntax: A RuboCop plugin that allows to disable some unfavorite ruby syntax, such as `unless`, safe navigation etc.</p>
<p>🧰 Brad Gessler announced a new release of Sitepress version 4</p>
<p>🧰 Brad Gessler announced a new release of sitepress/markdown-rails: Markdown as a static templating language for Rails views and partials. Read the thread (nitter alternative) if you want to see the list of all changes: </p>
<p>🧰 Vladimir Dementyev announced a new release for palkan/isolator</p>
<p>🧰 Dean DeHart announced a fork for a game in Ruby GitHub - Deanout/stellar-invictus: Stellar Invictus Browsergame forked for play in development!</p>
<p>🧰 Kevin Newton announced the rename of YARP to Prism and an update Release v0.13.0 · ruby/prism</p>
<p>🧰 Kirill Platonov announced a new version for polaris_view_components Release v1.2.0 · baoagency/polaris_view_components</p>
<p>🧰 Rob Zolkos shared the rails repo about solid_cache: A database-backed ActiveSupport::Cache::Store</p>
<p>🧰 Jeremy Evans announced a new version for Sequel 5.73.0 Released · jeremyevans sequel · Discussion #2084</p>
<p>🤝 Marc Köhlbrugge published a list of Stripe events useful to watch when building integration with Stripe</p>
<p> 🤝 Steven R. Baker shared about microservices and monolith:</p>
<p>🤝 Nate Berkopec shared about communicating with OSS maintainers: </p>
<p>🤝 Flavio shared a Tailwind tip:</p>
<p>🤝 Matt Swanson shared a tip about fieldset:</p>
<p>🗞 Joe Masilotti published a new edition about ⚡️ Hotwire dev newsletter - September 2023</p>
<p>🗞 Greg Molnar published a new edition of Rails Tricks newsletter about Rails form_with</p>
<p>🗞 Ruby On Rails published a new edition about This Week in Rails - September 29</p>
<p>🗞 Ruby Weekly published a new edition about Dave Thomas is back</p>
<p>🎧 Creston Jamison published a new podcast about Software Developer Management and Remote Work</p>
<p>🎧 Jason Swett published a new podcast about 196 - Defensive Programming with Prarthana Shiva - The Code with Jason Podcast</p>
<p>🎧 The Ruby On Rails Podcast published a new podcast about The Ruby on Rails Podcast Episode 489: Hello, Elise! Goodbye, Brittany.</p>
<p>🎧 Ruby For All published a new podcast about How We Use ChatGPT | Ruby for All</p>
<p>🎧 Creston Jamison published a new podcast about Our Favorite Development Tools with Drew Bragg | Rubber Duck Dev Show 102</p>
<p>🎧 Remote Ruby published a new podcast episode about Layered Rails Design with Vladimir Dementyev | Remote Ruby | Episode 244</p>
<p>📽️ The Rubber Duck Dev Show published a new video about Our Favorite Development Tools with Drew Bragg</p>
<p>🎥 Steven R. Baker published a new stream about The Shitshow 1: Adding Subscriptions to a Ruby on Rails 7 Application</p>
<p>🎥 Hanami Mastery published a new episode about  Phlex with Hanami - make your views written in Ruby. Completely.</p>
<p>🎥 Drifting Ruby published a new video about Episode 421 - Parent Relationships and Turbo Frames</p>
<p>🎥 Thoughtbot published a new video about Upgrading a Rails 3.2 app to Rails 7 and another one that continues the work</p>
<p>🎥 Dean DeHart published a new video about Generative Speech AI with Turbo &amp; Ruby on Rails 7</p>
<p>Svyatoslav Kryukov shared their slides about Let there be docs! A documentation-first approach to Rails API development by Svyatoslav Kryukov</p>
<p>Ben Sheldon published an article about Writing Object Shape Friendly Code In Ruby → “This is a brief blog post about how to write your own Ruby application code that is optimized for Object Shapes”</p>
<p>Mayank Agnihotri published an article about Rails 7.1 Now Allows Error Reporter To Handle Several Error Classes → “Recently Rails introduced a new way of handling errors which removes the need of using begin..end and makes handling of multiple errors much more easier to read and write”</p>
<p>Jorge Manrubia published a new article about Navigating personal information with care → “With the launch of HEY in 2020, we developed some technology and processes to support a very simple principle: employees shouldn’t have access — intentionally or unintentionally — to personal information from our users without their explicit consent. In this post, I’ll show what this looks like in practice”</p>
<p>Kevin Liebholz published a new article about Cheatsheet “Practical Object Oriented Design in Ruby” → “I took some notes during reading “Practical Object Oriented Design in Ruby” by Sandi Metz”</p>
<p>Stephen Margheim published a new article about Enhancing your Rails app with SQLite: More ActiveRecord adapter improvements → “After opening my first few ActiveRecord PRs last week, I kept going and opened 4 more to bring more key improvements to the SQLite adapter”</p>
<p>Prasanth Chaduvula published an article about Set And Restore Public Attributes Around A Block Using Object#With → “Object#with helps to streamline and elegantly improve this technique. It is an addition to the Ruby Object class that offers a simpler method of managing object states”</p>
<p>Julian Rubisch published a new article about An Introduction to LiteStack for Ruby on Rails → “In this series of posts, we will look at LiteStack, a one-stop-shop solution that hosts and processes all your production data on a single machine”</p>
<p>Igor Alexandrov published a new article about 18 Tools and Techniques to Improve Rails Application Performance → “Within almost 15 years of our history we collected a quite vast collection of tools and techniques that help us to provide the best performance to our clients projects”</p>
<p>Dave Kimura published an article about Using SQLite In Production → “there is a recent push on using SQLite in production, but there's also little talks around the pros and cons of doing so. This article will try to cover the pros and cons of using SQLite in production”</p>
<p>Mohit Sindhwani published an article about  Ruby Learning by Reversing: Native Gems, Part 6 → “Part 6 examines how the benchmark is run to compare the performance of the native version with the original Ruby version”</p>
<p>Brandon Weaver published an article about Understanding Ruby Memoization Dev Community → “Memoization is a common technique in Ruby, but alas it's one with a few potential gotchas we need to be aware of to use it effectively. This post gives a short introduction to things that you probably want to watch out for when memoizing, or rather remembering, values that methods compute”</p>
<p>Lucas Barret published an article about The Railtie, The Gem And The Middleware → “The middleware was directly available in the rails Middlewares list without any action except: bundle install and rails s. I wanted to understand how this is possible in Rails”</p>
<p>Julian Rubisch published an article about The Importance Of Postgresql Indexes In Your Rails Application Rails Reviews → “Accurate performance assessment necessitates access to the production database. This article will explore two methods for identifying and rectifying index-related inefficiencies in Postgresql within a Rails environment”</p>
<p>Miles published a new article about Password-less Auth with Rails → “for a recent project I implemented password-less authentication for the web. Since this project benefits from HealthKit integration on iOS, I decided to use Turbo Native for a hybrid iOS app which meant I had to extend this password-less flow in Swift too”</p>
<p>Cadu Ribeiro published an article about Using Devcontainers To Set Up Your Development Environment → “Having this reproducible development environment ensures that everyone on the team is using the same environment, making project setup easier”</p>
<p>Michael Roudnitski published an article about Infinite Scrolling With Zero Java Script [Rails] → “In this article, we'll explore how to implement this feature in a Ruby on Rails application without writing a single line of JavaScript, thanks to the Hotwire library”</p>
<p>Alexey Poimtsev published an article about Rails Graph Ql Authentication From Scratch #2 → I adds authentication, whoAmI method, inflections and GraphQL schema dump.</p>
<p>Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:</p>
<p>Support the newsletter for ~ $1.8/month</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-60</h2>
<div><div>
<p>This week's edition is shorter because I'm co-organizing the Friendly.rb event. See you there!</p>
<p> You can jump directly to a section:</p>
<p>🚀New Products</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>[Sponsor⬇]</p>
<p>Get 20% off when buying Deployment from Scratch from the affiliate link👇</p>
Deployment from Scratch (affiliate link with 20% discount) 
An introductory but comprehensive guide to web application deployment. Learn the groundwork for setting up Linux virtual servers and containers. Provision of web servers and databases. Includes bash scripts to deploy a Static Website, a full-featured Rails app, and a PostgreSQL cluster.
<p>Buy book with 20% discount</p>
<p>🚀  Stanislav Katkov launched their extension vscode-posh-docsets - Visual Studio Marketplace for POSH TUI</p>
<p>🚀 37signals launched Strada</p>
<p>🚀 R. Konstantin Haase shared Simple, goal-oriented success</p>
<p>📚 Andrew Hodson launched a new book learnrubyinorbit.com:</p>
<p>🚀 Donn Felker launched Gramifier - Create Instagram Images from Tweets and Quotes</p>
<p>👉 Xavier Noria shared about why they like Ruby: </p>
<p>👉 Postmodern shared Micro-benchmark to test `||=` and `[]=` vs. explicit initialize xor `[]=`</p>
<p>👉  Brad Gessler shared about not using inheritance but composition: </p>
<p>👉 Josef Strzibny shared about active storage: </p>
<p>👉 Emmanuel Hayford shared a tip about using select fields as hashes in Rails 7.1: </p>
<p>👉 Matt Swanson shared a code sample about Active Record: </p>
<p>👉 Deepak Mahakale shared a tip about using pluck over map: </p>
<p>👉 Eric Berry shared a tip about Scratch files in RubyMine</p>
<p>👉 Tobi Lutke shared about scaling web: </p>
<p>👉 Simon Chiu asked about what people always forget and need to search to find out. Read the replies (nitter link):</p>
<p>👉 Matt Swanson shared about adding comments in Gemfile to know when to upgrade: </p>
<p>👉 Fabian shared a code sample showing how they used DATA and __END__:</p>
<p>👉 David Heinemeier Hansson shared they are thinking to deploy SQLite in production for ONCE product:</p>
<p>👉 Brad Gessler shared a code sample showing I haven't used Strong Parameters in weeks!</p>
<p>👉 Jesper Christiansen shared a tip about converting a string to a boolean in Rails: </p>
<p>👉 Michael Chaney shared their story about upgrading from Rails 3 to Rails 7. Here is a part of the entire post: </p>
<p>👉 Andrew Hodson shared a tip about using the hash syntax for select in Rails 7.1:</p>
<p>👉 Ruby Cademy shared a code sample showing low coupling and high cohesion:</p>
<p>🧰 Nate Berkopec announced Release 6.4.0 - The Eagle of Durango · puma/puma</p>
<p>🧰 David Heinemeier Hansson launched version 1 of Kamal → Deploy web apps anywhere</p>
<p>🆕 🧰 Kevin Newton announced a new gem parser-yarp</p>
<p>🧰 Ruby On Mac announced a new version of Ruby on Mac version 2.0</p>
<p>🧰 Stephen Margheim shared that their PR about Add SQLite3 support for `supports_insert_returning?` was merged to Rails: </p>
<p>🆕🧰 Dmitry Tsepelev annoucned a new gem clean_actions: A modern modular service object toolkit for Rails, that respects database transactions and adds type checks to returned values</p>
<p>🆕🧰 Paweł Strzałkowski launched the source of the Tetris Game at Euruko GitHub - pstrzalk/tetris-on-rails</p>
<p>🤝 Michael Buckbee shared a tip about dot files on Git:</p>
<p>🤝 Dave Thomas announced they are back at leading pragdave - PragProg 2.0 </p>
<p>🤝 Adrian Valenzuela asked for S3 alternatives. Read the replies (read on nitter):</p>
<p>🤝 Stephen Margheim shared about how to think about link vs button:</p>
<p>🤝 Florin Pop asked about resources for learning CSS and they received some good recommentations. Read the replies (read on nitter)</p>
<p>🤝 Jason Swett shared about the cause of poor naming:</p>
<p>🤝 Cezar Halmagean shared about how they think about MVP:</p>
<p>🗞 Emmanuel Hayford published a new edition of This Week in Rails about SQLite3 adapter now handles default functions with concatenation an...</p>
<p>🗞 Harrison Broadbent published a new edition about The RailsNotes Newsletter ISSUE #12</p>
<p>🗞 Ruby Weekly published a new edition about  It’s 95 sleeps till Ruby 3.3</p>
<p>🗞 Awesome Ruby Newsletter published a new edition about Awesome Ruby Newsletter Issue 383, Sep 21, 2023</p>
<p>🎧 Adrian Marin published a new podcast about Friendly Show | André Arko and how we got RubyGems and Bundler. RubyConf 2023: what to expect?</p>
<p>🎧 Creston Jamison published a new podcast about Looking Back On 100 Episodes! | Rubber Duck Dev Show 100</p>
<p>🎧 Indie Rails published a new podcast about IndieRails | Robby Russell - Maintaining Planet Argon</p>
<p>🎧 Lucas Barret published a new podcast about GemRubyShow: Ben Sheldon, GoodJob</p>
<p>🎧 Remote Ruby published a new podcast about Rails 7.1 Is Gonna Be HUGE | Remote Ruby | Episode 243</p>
<p>🎧 The Ruby on Rails Podcast published a new episode about Episode 488: Rubyconf 2023 Preview With Allison Mc Millan And Chelsea Kaufman</p>
<p>🎥 Jason Swett published a new video about Building a Vim plugin for ChatGPT (I finally fix the bug)</p>
<p>🎥 Janko Marohnić published a new video about Adding passkeys to custom authentication using Rodauth</p>
<p>🎥 Thoughtbot published a new video about Upgrading a Rails 3.2 app to Rails 7</p>
<p>🎥 David Heinemeier Hansson published a video showing how Kamal works (nitter link)</p>
<p>Takashi Kokubun published a new article about Ruby 3.3’s YJIT Runs Shopify’s Production Code 15% Faster</p>
<p>Oinak published an article about A Take Home Exercise Scaffold For Ruby Dev Community</p>
<p>Miles published a new article about Get Started with Strada! A First Look on iOS</p>
<p>Joe Masilotti published an article about Strada Officially Launched!</p>
<p>Tony Messias published an article about Welcome Strada</p>
<p>Maciej Mensfeld published an article about Asset Handling In Roda: Cache Forever, Refresh When Needed Closer To Code</p>
<p>Alexis Bernard published an article about Optimisation Is Often Doing Fewer Things</p>
<p>Mika Henriksson published a new article about Using session cookies directly in playwright</p>
<p>Maful Prayoga published an article about Build Load More Pagination With Pagy And Rails Hotwire Dev Community</p>
<p>Greg Molnar updated their article about Deploying a Rails app with Kamal</p>
<p>Igor Alexandrov updated their article about How To Use Basecamp’s Kamal With AWS and GitHub</p>
<p>Stephen Margheim published a new article about Enhancing your Rails app with SQLite:Performance metrics</p>
<p>Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:</p>
<p>Support the newsletter for ~ $1.8/month</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


<h2>Content from: https://newsletter.shortruby.com/p/edition-59</h2>
<div><div>
<p> You can jump directly to a section:</p>
<p>🚀New Products &amp;  📅 Events</p>
<p>👉 All about Code and Ruby</p>
<p>🧰 Gems, Libraries, and Updates</p>
<p>🤝 Related (but not Ruby-specific)</p>
<p>More content: 📚 🗞 🎧 🎥  ✍🏾 (articles, podcasts, videos, newsletters) </p>
<p>[Sponsor⬇]</p>
Stop spending countless hours screening developers! Create tech assessments in seconds and learn who the best candidate is through Revelo AI-powered insights. 100% free.
<p>🚀 Ruby Cademy announced they launched a new course on Rubycademy:</p>
<p>🚀 Jason Swett launched a new section Let's talk - Code with Jason where he invites us to a talk: </p>
 I always enjoy meeting my fellow programmers. I’d love to have a call with you to get to know you. If that sounds fun to you, fill out the form below. 
<p>🚀 Luke launched Markie </p>
<p>🚀 Miguel Michelson announced the open source version of rauversion/rauversion-ror: Self hosted music industries</p>
<p>📅 Sergy Sergyenko shared that people can ask questions and the most liked one will be answered by Matz at Euruko: </p>
<p> 📅Fukuoka Ruby shared FUKUOKA Ruby Award 2024 - 福岡県Ruby・コンテンツビジネス振興会議</p>
<p>👉 Emmanuel Hayford shared a tip about Rails 7.1 enum validation: </p>
<p>[Promo Content⬇]</p>
👨‍✈️Candidates' skills testing on autopilot - let Revelo guide you through it!
<p>👉 Kirill Shevchenko shared about how using module in Ruby simulates multiple inheritance:</p>
<p>👉 Ruby For Good shared that the majority of UK Government websites are built with Ruby on Rails →  Conventions for Rails applications - GOV.UK Developer Documentation</p>
<p>👉 Chris Oliver shared a tip about Rails 7.1 normalize: </p>
<p>👉 David Heinemeier Hansson shared a post about companies using Ruby on Rails that generated a lot of conversations about which company uses or not: </p>
<p>I am going to include some replies here but I think if you want to get a better image of the discussion, you should read yourself the replies (read on nitter) and the quotes:</p>
<p>👉 Julian Rubisch shared a new challenge for Hotwire Club Challenge 11: Turbo Frames - Scroll Position Restoration | Patreon</p>
<p>👉 Vincent Rolea shared a tip about rendering partials within a partial layout: </p>
[job ad from this edition partner Revelo.com]  
🚀 [Remote][Latin America] Get a full-time, long-term remote job and a dollar salary in amazing US tech companies.  Apply at careers.revelo.com
<p>Apply to Revelo</p>
<p>👉 Rob Zolkos shared a tip about rendering a different view template if the user is on a phone or other devices: </p>
<p>👉 Scott Watermasysk asked about how people are managing comments that specify when the code can be cleanup: </p>
<p>Among the possible solutions it was suggested to use normal TODOs and manage them with bin/rails notes or add the events in a shared calendar or use the gem todo_or_die. Here an alternative solution by Petrik De Heus:</p>
<p>👉 Noel Rappin shared an update about the Programming Ruby 3.2 book: </p>
<p>👉 Pragmatic Bookshelf shared an update for the book High Performance PostgreSQL for Rails</p>
<p>👉Joel Drapper shared that feedbin is using Phlex — Fast, Object Oriented View Framework For Ruby</p>
<p>👉 Agnieszka Małaszkiewicz shared their slides from Wrocloverb about Ruby Rendezvous: Method Call, Proc, and Beyond</p>
<p>👉 William Kennedy shared they noticed a few commits about Strada:</p>
<p>👉 Jeanro announced that on Ruby on Rails Jobs - France et Europe all Junior profiles can be seen for free: </p>
<p>👉 Leandro shared about how timestamps in Ruby work depending on the platform: </p>
<p>👉 Gabriel shared how SQlite can be used to merge CSV files faster: </p>
<p>👉 Mohammad A. Ali shared a post about more simplicity being needed in Rails: </p>
<p>👉 Stephen Margheim shared a checklist to see if you should use SQLite or not with Rails: </p>
<p>👉 Brad Gessler shared about Sitepress performance </p>
<p>👉 Matt Swanson shared about when the rule of not having data changes in migrations would contradict the actual way deploys are happening: </p>
<p>👉 Nate Berkopec shared a tip about web performance: </p>
<p>👉 Matt Swanson shared a code sample about CurrentAttributes: </p>
<p>👉 Greg Navis shared a thread about Ruby Heredocs: </p>
<p>👉 Rafael França shared Development containers</p>
<p>👉 Fast Ruby.Io shared a tip about providing column type in migrations: </p>
<p>👉 Ruby Cademy shared a tip about dependency injection: </p>
<p>👉 Rob Zolkos shared that reading the logs is important: </p>
<p>👉 Josef Strzibny shared about the number of contributions for Rails:</p>
<p>🧰 Postmodern announced that Ruby 3.3.0-preview2 is available on ruby-install:</p>
<p>🧰 Hiroshi Shibata announced a new release for ruby-build 20230914 · rbenv/ruby-build</p>
<p>🧰 Ruby on Rails announced the release of Rails 7.1.0.beta1: </p>
<p>There are some posts about this but you will find many more in this newsletter: </p>
<p>🧰 Mike Perham shared a new version for Sidekiq, read the release notes for Sidekiq, Sidekiq Pro and Sidekiq Enterprise: </p>
<p>🧰 Avo announced a new release for both Avo 2 and Avo 3: </p>
<p>🧰 Jason Meller submitted a PR that has been merged → Add Bun support by terracatta · Pull Request #49241 · rails/rails</p>
<p>🧰 Maciej Mensfeld announced they released the UI for karafka</p>
<p>🧰 Nicolas Buduroi shared they discovered a new gem trace_location: 🔍Help you get reading the huge open souce libraries in Ruby and trace its source locations</p>
<p>🆕🧰 Dmitry Tsepelev announced a gem called “rubocop_director”, read more about how to use it to refactor in this article:</p>
<p>🧰 Vinicius Stock announced a new version for Release v0.10.0 · Shopify/ruby-lsp</p>
<p>🧰 Bozhidar Batsov shared Release RuboCop 1.56.3 · rubocop/rubocop</p>
<p>🧰 Donal McBreen submitted a PR that was merged to Kamal Asset Paths By Djmb · Pull Request #449</p>
<p>🧰 Yuichiro Kaneko announced a new version of lrama Release v0.5.6 · ruby/lrama </p>
<p>🆕🧰  Jeremiah Parrack published a new gem revise_auth-jets - A pure Ruby on Jets authentication system like Devise</p>
<p>🧰 Chris Oliver announced that Jumpstart Pro now runs on Rails 7.1:</p>
<p>🧰 Jeremy Evans announced a new version for Tilt → Tilt 2.3.0 Released · jeremyevans tilt · Discussion #9</p>
<p>🧰 Espen shared that we need to upgrade ImageMagick due to a security issue Security: shell escape using ghostscript · Issue #4172 · ImageMagick/ImageMagick (see instructions about how to override ImageMagick settings)</p>
<p>🧰 Kevin Newton announced a new version for YARP → Release v0.12.0 · ruby/yarp</p>
<p>🧰 Greg Molnar shared a PR for Rails about Ignore env files (except templates) by dhh · Pull Request #49278 · rails/rails</p>
<p>🧰 Brad Gessler shared PR for dockerfile-rails about Generates a Dockerfile for a sqlite production environment if Litestack is present</p>
<p>🤝 Samuel Williams asked about 101 HTTP status code: </p>
<p>and Roy T. Fielding answered: </p>
<p>🤝 John Nunemaker shared a PostgreSQL code sample about calculating distance between two strings (see the gist here or documentation at F.17. fuzzystrmatch):</p>
<p>🤝 Adam Wathan shared about the importance of being part of a group: </p>
<p>🤝 Nate Berkopec shared about scaling</p>
<p>🗞 Andy Croll published a new One Ruby Thing → Express yourself clearly with positive? and negative? for numbers</p>
<p>🗞 Greg Molnar published a new edition about This Week in Rails: 7.1 beta release, Bun support and more!</p>
<p>🗞 Ruby Weekly published an article about A Ruby 3.3 preview and Rails 7.1 beta</p>
<p>🗞 Awesome Ruby Newsletter published an article about Issue 382 - It’s dangerous to go alone: take our guide to the “IDEAL” HTTP client! (With examples in Ruby)</p>
<p>🎧 Creston Jamison published a new podcast about When Should You Use Background Jobs? | Rubber Duck Dev Show 99</p>
<p>🎧 Code And The Coding Coders Who Code It published a new podcast about Episode 28 - Matt Swanson</p>
<p>🎧 Code And The Coding Coders Who Code It published a new podcast about Bonus Canadian Football Episode</p>
<p>🎧 Jess Brown published a new podcast about Starting a Business in a Snowstorm | 2min snip from IndieRails</p>
<p>🎧 The Ruby On Rails Podcast published a new podcast about The Ruby on Rails Podcast Episode 487: Building the Rails World Application with Shami Tomita and Eric Halverson</p>
<p>🎧 Ruby Rogues published a new podcast about Stimulus, Hotwire, and Turbo, Oh My! - RUBY 607 - Ruby Rogues - Top End Devs</p>
<p>🎧 Jason Swett published a new podcast about Code review with Jonathan Bennett (tests, namespaces)</p>
<p>🎧 The Bike Shed published a new episode about The Bike Shed: 401: Making The Right Thing Easy</p>
<p>📽️ Hanami Mastery shared a new video about Hanami 2.0 an alternative to Rails - Daniel Nguyen from Ruby Australia</p>
<p>🎥 Chris Oliver published a new video about Rails 7.1 Authentication From Scratch (Example) | GoRails</p>
<p>🎥 Lázaro Nixon published a new video about Creating native apps with turbo</p>
<p>🎥 Dean De Hart published new videos about:</p>
<p>Mike Perham published a new articlea bout Ruby HTTP Server from scratch | Mike Perham → “Recently I decided to add support for Kubernetes HTTP health checks to Sidekiq Enterprise. This means, within each Sidekiq worker process, we need to implement an HTTP server which listens on port X and simply returns 200/OK if the process is alive”</p>
<p>Dmitry Tsepelev published a new article about Ruby goes to the movie theater: directing the refactoring of your application → “This post introduces a method I use to refactor big applications. I want the process to happen in a predictable manner and make sure that important things are addressed before others”</p>
<p>Brad Gessler published a new article about Sqlite &amp; Rails in Production → “When deploying a Rails application to production, its rare to question the idea of running a Postgres or MySQL database to persist data and Redis for caching, background job processing, and WebSockets, but what if it could all be done without running these services?”</p>
<p>Deepak Mahakale published a new article about What’s new in Rails 7.1 → “Let’s see what is new in rails 7.1”</p>
<p>Rashmi published a new article about Rails 7.1 - authenticated_by → “In Rails 7.1 authenticated_by method has been introduced” </p>
<p>Gabriel Chuan published an article about Merge Csv Files In Ruby Efficiently Dev Community → “Ever had issues merging CSV files in Ruby? Use sqlite instead! Theoretically, it can handle large csvs, and is very fast”</p>
<p>I published an article about Use Gpt 4 To Refactor A Simple Html Page → “Utilizing Cursor IDE and GPT-4 for logo placement, spacing adjustment, equal column height, and group hover element display”</p>
<p>Harrison Broadbent published an article about Refactoring From Feature Specs To System Specs → “In it, I break down the difference between system specs and feature specs in RSpec and Rails, and walk you through refactoring your feature specs to system specs”</p>
<p>Prasanth Chaduvula published an article about Set And Restore Public Attributes Around A Block Using Object#With → “Object#with helps to streamline and elegantly improve this technique. It is an addition to the Ruby Object class that offers a simpler method of managing object states”</p>
<p>Shalvah published an article about Exploring Concurrent Rate Limiters, Mutexes, Semaphores → “This is a dump of my learnings and experiments while going down a little rabbit hole (…) I was studying Sidekiq's page on rate limiters (…) So I asked myself, how would I implement a concurrent rate limiter?”</p>
<p>Matheus Richard published a new article about Mining Gold in Digital Conversations → “Gold Miner is an app I created to transform interesting conversations we have at thoughtbot into blog posts”</p>
<p>Akshay Khot published a new article about How To Debug And Step Through Rails Codebase → “Do you want to read the Rails source code for a deeper understanding of the framework, but feel intimidated by the sheer size of the codebase, or don't know where to start?”</p>
<p>Artur Petrov published an article about It’s Dangerous To Go Alone: Take Our Guide To The “Ideal” Http Client! → “This guide is about understanding the best practices for any HTTP client and how to leverage them to your advantage. This guide is not limited to backend applications (although most of the examples are in Ruby), the same principles are applicable for any language and platform, even the frontend”</p>
<p>Paweł Urbanek published an article about How To Improve Rails Caching With Brotli Compression → “In this blog post, I’ll describe optimizing the Rails caching mechanism using the Brotli compression algorithm instead of the default Gzip. I’ll also discuss a more advanced technique of using in-memory cache for extreme performance bottlenecks”</p>
<p>Ariel Juodziukynas published an article about Exploring Ruby Warnings Fast Ruby.Io | Rails Upgrade Service → “In this article we will explore how to use them, how to analyze them, and some examples of interesting warnings that can be really helpful during upgrades”</p>
<p>Akshay Khot published an article about The Complete Guide To Working With Cookies In Rails → “This post covers almost everything you need to know about HTTP cookies in the context of Rails. We'll explore what a cookie is, why we need it, how to set &amp; get a cookie, how to restrict cookies to a particular domain/path, prevent JavaScript access, how to sign &amp; encrypt cookies, and much more”</p>
<p>Jeff Dwyer published an article about Let's Talk Tagged Logging Vs Structured Logging In Ruby Or Rails → “What is Tagged Logging? Should you be using it? What libraries support it? Is it the same as structured logging?”</p>
<p>Alkesh Ghorpade published an article about Ruby 3.2 Introduces Data, A New Core Class For Immutable Value Objects → “Ruby 3.2 introduces Data, a new core class for immutable value objects. Value objects are a powerful tool for improving the quality of code. They are easy to understand and use and can help improve the readability and maintainability of code by making it more concise, consistent, and easier to reason about”</p>
<p>Davide Santangelo published an article about Exploring The Null Object Pattern In Ruby Dev Community → “The Null Object Pattern is a behavioral design pattern that helps eliminate the need for explicit null checks in your code. It is particularly useful when dealing with missing or optional objects in your application. In this article, we will explore the Null Object Pattern in the context of Ruby”</p>
<p>Julian Rubisch published a new article about Using Turbo Frames for Navigation - RailsReviews → “Navigating the intricacies of Turbo Frames can be both rewarding and challenging. These custom HTML elements present a method to refine the user experience on web applications. Let's explore some patterns and use-cases that can be achieved with Turbo Frames”</p>
<p>Paweł Urbanek published a new article about How to Improve Rails Caching with Brotli Compression → “I’ll describe optimizing the Rails caching mechanism using the Brotli compression algorithm instead of the default Gzip. I’ll also discuss a more advanced technique of using in-memory cache for extreme performance bottlenecks”</p>
<p>Lucas Barret published a new article about ActionPolicy , GraphQL and Rails → “I wanted to create an article showing you how simple yet powerful ActionPolicy the Gem he develops for Authorization”</p>
<p>Avi Flombaum published a new article about Turbo Forms, Ruby on Rails Drag-Drop: Pt.1 → “In this series of posts we're going to build a Drag and Drop feature to add music tracks to playlists”</p>
<p>Stephen Margheim published a new article about Enhancing your Rails app with SQLite Array columns → “today I want to show you that it is possible to build on top of SQLite’s primitives to provide matching behavior for one of my favorite features of Postgres—array columns” and Local snapshots.</p>
<p>Maful Prayoga published an article about Build Drag And Drop With Rails Hotwire → “Today, we're diving into something super cool: adding drag-and-drop functionality to your Rails app, all powered by the magic of Hotwire”</p>
<p>Paweł Pacana published a new article about Six ways to prevent a monkey-patch drift from the original code → “Monkey-patching in short is modifying external code, whose source we don’t directly control, to fit our specific purpose in the project. When modernising framework stack in “legacy” projects this is often a necessity when an upgrade of a dependency is not yet possible or would involve moving too many blocks at once”</p>
<p>Patricio Mac Adden published an article about Talking To Hostile Ap Is | Sinaptia → “A hostile API is an API that gets in your way, that fights you when you're trying to use it. That seems to be against you using it”</p>
<p>Please consider becoming a paid subscriber to support this newsletter for just $1.8/week ($7.5/month), and you will receive an ad-free version. Your contribution aids growth and maintains the quality of ShortRuby for everybody:</p>
<p>Support the newsletter for ~ $1.8/month</p>
<p>If you consider upgrading and want more information, please read Why to subscribe to paid.</p>
</div></div>


